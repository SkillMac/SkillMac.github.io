[{"title":"é›†æˆbgfxåœ¨macosxå¹³å°","date":"2019-08-14T03:24:55.000Z","path":"/posts/4c19fcfe/","text":"è¿™ä¸€ç¯‡å®åœ¨ä¸Šä¸€ç¯‡åœ¨windowså¹³å°çš„åŸºç¡€ä¸ŠåŠ ä¸Š macosx å¹³å°çš„ç¼–è¯‘ä¸Šä¸€ç¯‡åœ°å€ä¼ é€é—¨ æ¶‰åŠçš„çŸ¥è¯†ç‚¹,å¦‚ä¸‹: ä½¿ç”¨ xmake æ„å»ºå·¥ç¨‹, xmake ä½¿ç”¨lua ä¸ä¼šå¯ä»¥ç®€å•çš„è¡¥ä¸€ä¸‹è¯­æ³• ä¿®å¤ç¼–è¯‘ bgfx æ—¶æŠ¥çš„é”™è¯¯ ç¼–è¯‘ shaderc å¯æ‰§è¡Œæ–‡ä»¶ ç¼–è¯‘ glsl åˆ°äºŒè¿›åˆ¶, å› ä¸ºbgfx ä½¿ç”¨ç¼–è¯‘åçš„ç€è‰²å™¨ä»£ç  ç¼–è¯‘ glfw, bgfx, bimg, bx åº“ è¿™é‡Œå°±ä¸åœ¨è¯¦ç»†è¯´ä¹‹å‰çš„é…ç½®äº†,è¿™é‡Œä¸»è¦è¯´æ˜ macosx xmakeçš„é…ç½® bgfxçš„ xmake é…ç½®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263target(\"bgfx\") set_kind(\"static\") add_cxxflags(\"-std=c++14\", \"-stdlib=libc++\") add_mxxflags(\"-std=c++14\", \"-stdlib=libc++\") if is_mode(\"debug\") then set_targetdir(\"$(buildir)/libs/debug\") elseif is_mode(\"release\") then set_targetdir(\"$(buildir)/libs/release\") end add_includedirs(BGFX_DIR .. \"include\") add_includedirs(BGFX_DIR .. \"3rdparty\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BIMG_DIR .. \"include\") add_includedirs(BGFX_DIR .. \"3rdparty/khronos\") if is_plat(\"windows\") then add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") add_includedirs(BGFX_DIR .. \"3rdparty/dxsdk/include\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_syslinks(\"user32\", \"gdi32\") -- default cl complier add_files(BGFX_DIR .. \"src/**.cpp|amalgamated.cpp\") --|glcontext_glx.cpp|glcontext_egl.cpp elseif is_plat(\"macosx\") then add_defines(\"NDEBUG\") add_cxxflags(\"-Wno-microsoft-enum-value\", \"-Wno-microsoft-const-init\", \"-x objective-c++\") --add_mxxflags(\"-Wno-microsoft-enum-value\", \"-Wno-microsoft-const-init\", \"-x objective-c++\") add_mxxflags(\"-weak_framework Metal\", \"-weak_framework MetalKit\") add_ldflags(\"-weak_framework Metal\", \"-weak_framework MetalKit\") add_frameworks(\"CoreVideo\",\"IOKit\",\"Cocoa\",\"QuartzCore\",\"OpenGL\") add_includedirs(BX_DIR .. \"include/compat/osx\") add_files(BGFX_DIR .. \"src/glcontext_**.mm\") add_files(BGFX_DIR .. \"src/renderer_**.mm\") add_files(BGFX_DIR .. \"src/**.cpp|amalgamated.cpp\") end if is_mode(\"debug\") then add_defines(\"BGFX_CONFIG_DEBUG=1\") end ä¸Šé¢é…ç½®è¡¨çš„é€»è¾‘åº”è¯¥å†™çš„å¾ˆæ¸…æ¥šäº†,è¿™é‡Œç®€å•çš„è¯´æ˜ä¸€ä¸‹. bgfxä½¿ç”¨äº†c++14çš„ç‰¹æ€§ä½†æ˜¯é»˜è®¤ç¼–è¯‘å™¨æ˜¯c++11 æ‰€ä»¥è¦æŒ‡å®šåˆ°c++14 bgfx ä¾èµ–çš„åº“æœ‰: Metal, MetalKit, CoreVideo, IOKit, Cocoa, QuartzCore, OpenGL ä¸‹é¢ç¼–è¯‘ bimgå’Œ bx åº“éƒ½æ˜¯åŒæ ·çš„é“ç†,è¿™é‡Œæˆ‘å°±ç›´æ¥æ”¾ç½®é…ç½®æ–‡ä»¶äº† bx çš„ xmake é…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041target(\"bx\") set_kind(\"static\") add_cxxflags(\"-std=c++14\", \"-stdlib=libc++\") if is_mode(\"debug\") then set_targetdir(\"$(buildir)/libs/debug\") elseif is_mode(\"release\") then set_targetdir(\"$(buildir)/libs/release\") end add_includedirs(BX_DIR .. \"include\") add_includedirs(BX_DIR .. \"include/bx/inline\") if is_plat(\"windows\") then add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_includedirs(BX_DIR .. \"3rdparty\") add_files(BX_DIR .. \"src/**.cpp|amalgamated.cpp\") --|crtnone.cpp elseif is_plat(\"macosx\") then add_includedirs(BX_DIR .. \"include/compat/osx\") add_includedirs(BX_DIR .. \"3rdparty\") add_files(BX_DIR .. \"src/**.cpp|amalgamated.cpp\") end bimg çš„ xmake é…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041target(\"bimg\") set_kind(\"static\") add_cxxflags(\"-std=c++14\", \"-stdlib=libc++\") if is_mode(\"debug\") then set_targetdir(\"$(buildir)/libs/debug\") elseif is_mode(\"release\") then set_targetdir(\"$(buildir)/libs/release\") end add_includedirs(BIMG_DIR .. \"include\") add_includedirs(BIMG_DIR .. \"3rdparty/astc-codec\") add_includedirs(BIMG_DIR .. \"3rdparty/astc-codec/include\") add_includedirs(BX_DIR .. \"include\") if is_plat(\"windows\") then add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") add_includedirs(BX_DIR .. \"include/compat/msvc\") elseif is_plat(\"macosx\") then add_includedirs(BX_DIR .. \"include/compat/osx\") end add_files(BIMG_DIR .. \"src/image.cpp\") add_files(BIMG_DIR .. \"src/image_gnf.cpp\") add_files(BIMG_DIR .. \"3rdparty/astc-codec/src/decoder/*.cc\") glfw çš„ xmake é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152target(\"glfw\") set_kind(\"static\") if is_mode(\"debug\") then set_targetdir(\"$(buildir)/libs/debug\") elseif is_mode(\"release\") then set_targetdir(\"$(buildir)/libs/release\") end add_includedirs(GLFW_DIR .. \"include\") add_files(GLFW_DIR .. \"src/context.c\") add_files(GLFW_DIR .. \"src/init.c\") add_files(GLFW_DIR .. \"src/input.c\") add_files(GLFW_DIR .. \"src/monitor.c\") add_files(GLFW_DIR .. \"src/vulkan.c\") add_files(GLFW_DIR .. \"src/window.c\") if is_plat(\"windows\") then add_defines(\"_GLFW_WIN32\", \"_CRT_SECURE_NO_WARNINGS\", \"_WIN64\") add_files(GLFW_DIR .. \"src/win32_*.c\") add_files(GLFW_DIR .. \"src/wgl_context.c\") add_files(GLFW_DIR .. \"src/egl_context.c\") add_files(GLFW_DIR .. \"src/osmesa_context.c\") add_syslinks(\"shell32\") elseif is_plat(\"linux\") then add_defines(\"_GLFW_X11\") add_files(GLFW_DIR .. \"src/glx_context.c\") add_files(GLFW_DIR .. \"src/osmesa_context.c\") add_files(GLFW_DIR .. \"src/linux*.c\") add_files(GLFW_DIR .. \"src/posix*.c\") add_files(GLFW_DIR .. \"src/x11*.c\") add_files(GLFW_DIR .. \"src/xkb*.c\") elseif is_plat(\"macosx\") then add_defines(\"_GLFW_COCOA\") add_frameworks(\"CoreVideo\",\"IOKit\",\"Cocoa\",\"CoreFoundation\") add_files(GLFW_DIR .. \"src/cocoa_*.m\") add_files(GLFW_DIR .. \"src/cocoa_time.c\") add_files(GLFW_DIR .. \"src/posix_thread.c\") add_files(GLFW_DIR .. \"src/nsgl_context.m\") add_files(GLFW_DIR .. \"src/egl_context.c\") add_files(GLFW_DIR .. \"src/osmesa_context.c\") add_mflags(\"-fno-common\") add_cflags(\"-fno-common\") end è¿™é‡Œé¢åŠ äº†linuxç‰ˆæœ¬çš„é…ç½®ä½†æ˜¯æ²¡æœ‰å®æµ‹,è¿™é‡Œä½ ä»¬æ³¨æ„ä¸€ä¸‹.è¿™é‡Œä¸»è¦çš„é—®é¢˜å°±æ˜¯ ä½ è¦æ­£ç¡®çš„è¿‡æ»¤å‡ºæ¯ä¸ªå¹³å°çš„éœ€è¦åŠ å…¥ç¼–è¯‘çš„æ–‡ä»¶, å…·ä½“ä½ å¯ä»¥å‚è€ƒ glfwçš„cmake é…ç½® é“¾æ¥åˆ°å·¥ç¨‹é‡Œé¢1234567891011121314151617181920212223242526272829303132333435363738394041424344454647target(\"vkEngine\") add_cxxflags(\"-std=c++14\", \"-stdlib=libc++\") add_mxxflags(\"-std=c++14\", \"-stdlib=libc++\") add_deps(\"bgfx\") add_deps(\"bx\") add_deps(\"bimg\") add_deps(\"glfw\") set_kind(\"binary\") add_includedirs(BGFX_DIR .. \"include\") add_includedirs(BGFX_DIR .. \"3rdparty\") add_includedirs(BGFX_DIR .. \"3rdparty/khronos\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BIMG_DIR .. \"include\") add_includedirs(GLFW_DIR .. \"include\") add_includedirs(GLM_DIR) if is_plat(\"windows\") then add_includedirs(BGFX_DIR .. \"3rdparty/dxsdk/include\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_ldflags(\"/SUBSYSTEM:CONSOLE\") elseif is_plat(\"macosx\") then add_includedirs(BX_DIR .. \"include/compat/osx\") add_frameworks(\"CoreVideo\",\"IOKit\",\"Cocoa\",\"CoreFoundation\", \"Foundation\", \"QuartzCore\", \"OpenGL\") add_mxxflags(\"-weak_framework Metal\", \"-weak_framework MetalKit\") add_ldflags(\"-weak_framework Metal\", \"-weak_framework MetalKit\") end add_includedirs(\"src/\") if is_mode(\"debug\") then add_linkdirs(\"$(buildir)/libs/debug\") add_links(\"glfw\", \"bgfx\", \"bx\", \"bimg\") elseif is_mode(\"release\") then add_linkdirs(\"$(buildir)/libs/release\") add_links(\"glfw\", \"bgfx\", \"bx\", \"bimg\") end add_files(\"src/**.cpp|mesh.cpp|bounds.cpp\") è¿™é‡Œä½ ä»¬çœ‹çœ‹ä¹Ÿå°±æ˜¯åº”è¯¥çŸ¥é“è¿™é‡Œéƒ½åšäº†ä»€ä¹ˆäº†, ç¼–è¯‘shader metalç‰ˆé»˜è®¤ macosxä¸Šä½¿ç”¨ metal å›¾å½¢åº“12./shaderc -f ../../examples/cubes/vs_cubes.sc -o ../../examples/cubes/shaders/metal/vs_cubes.bin --varyingdef ../../examples/cubes/varying.def.sc --platform osx -i ../../examples/common/sh/ -p metal --type vertex./shaderc -f ../../examples/cubes/fs_cubes.sc -o ../../examples/cubes/shaders/metal/fs_cubes.bin --varyingdef ../../examples/cubes/varying.def.sc --platform osx -i ../../examples/common/sh/ -p metal --type fragment å…·ä½“æ¯ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆç”¨å¯ä»¥å»çœ‹ä¸Šä¸€ç¯‡æ–‡ç« æœ‰ä»‹ç»è¿™äº›ä¸œè¥¿. ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ‘è¿™é‡Œæ”¾ä¸Šæˆ‘ç¼–è¯‘å¥½çš„ macosxå¹³å° Release ç‰ˆçš„å·¥å…·é‡Œé¢åŒ…å« geometryc geometryv texturec texturev shaderc ä¸‹è½½åœ°å€ endingè¿™é‡Œæˆ‘å°±ä¸æ”¾ä»£ç äº†,,, éœ€è¦ä½ ä»¬è‡ªå·±åŠ¨æ‰‹å»åš,,, æˆ‘å¯ä»¥æŠŠæ„å»ºé…ç½®å‘ç»™ä½ ä»¬æˆ‘ä¹Ÿåªæ˜¯ç”¨äº†ä¸€ç‚¹, åé¢ä¼šç»§ç»­æ·±å…¥,,, å¤§å®¶ä¸€å—å­¦ä¹ ,,, è®¨è®ºäº¤æµ.è¿™ä¸ªå®˜æ–¹çš„æ–‡æ¡£æ¯”è¾ƒçš„å°‘, ä¸å…¨é¢, éœ€è¦è‡ªå·±å¤šçœ‹çœ‹ä»–ä»¬çš„ä¾‹å­å’Œæºç . xmake.lua é…ç½®xmake.lua","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://leng521.top/tags/å‰ç«¯/"},{"name":"cpp","slug":"cpp","permalink":"https://leng521.top/tags/cpp/"},{"name":"bgfx","slug":"bgfx","permalink":"https://leng521.top/tags/bgfx/"},{"name":"xmake","slug":"xmake","permalink":"https://leng521.top/tags/xmake/"},{"name":"lua","slug":"lua","permalink":"https://leng521.top/tags/lua/"}]},{"title":"é›†æˆbgfxå¼€æºçš„æ¸²æŸ“å™¨","date":"2019-07-31T10:48:46.000Z","path":"/posts/ea56194d/","text":"è¿™ä¸€èŠ‚ä¸»è¦è®²è§£é›†æˆä¸€ä¸ªbgfxåˆ°é¡¹ç›®ä¸­bgfx github ä»“åº“åœ°å€ æ¶‰åŠçš„çŸ¥è¯†ç‚¹,å¦‚ä¸‹: ä½¿ç”¨ xmake æ„å»ºå·¥ç¨‹, xmake ä½¿ç”¨lua ä¸ä¼šå¯ä»¥ç®€å•çš„è¡¥ä¸€ä¸‹è¯­æ³• ä¿®å¤ç¼–è¯‘ bgfx æ—¶æŠ¥çš„é”™è¯¯ ç¼–è¯‘ shaderc å¯æ‰§è¡Œæ–‡ä»¶ ç¼–è¯‘ glsl åˆ°äºŒè¿›åˆ¶, å› ä¸ºbgfx ä½¿ç”¨ç¼–è¯‘åçš„ç€è‰²å™¨ä»£ç  123456789101112131415161718å½“å‰æµ‹è¯•çš„ç‰ˆæœ¬bgfx: commit id =&gt; c14ea22eee5866a580899027ef42b3867faa280cbx: commit id =&gt; 7036e3d2d7f73513fc6bed25c969f2cb2818a884bimg: commit id =&gt; dab021bc46dabba270123a32cc1c2f8102593e13xmake: v2.2.5.201904012115vs: VS2019ä½¿ç”¨ cl ç¼–è¯‘å™¨vscode: 1.36.1ç³»ç»Ÿ: win10æ—¶é—´: 2019å¹´7æœˆ31æ—¥17:23:13 è¾¾åˆ°çš„æ•ˆæœé›†æˆ glm, glfw, bgfx, bx, bimg åº“åˆ°é¡¹ç›®ä¸­, å¹¶æˆåŠŸè·‘èµ·æ¥bgfxä¸­ç¬¬äºŒä¸ªæ¡ˆä¾‹ å¯èƒ½ä¼šç”¨åˆ°çš„é“¾æ¥åœ°å€æºç åœ°å€ åº“çš„ä½œç”¨ åœ°å€ æè¿° å¼€æºæ¸²æŸ“åº“ https://github.com/bkaradzic/bgfx - è·¨å¹³å°åŸºç¡€åº“ https://github.com/bkaradzic/bx - Image åº“ https://github.com/bkaradzic/bimg - glmä»“åº“åœ°å€ https://github.com/g-truc/glm - glfwä»“åº“åœ°å€ https://github.com/glfw/glfw - biggä¸€ä¸ªä½¿ç”¨cmakeé›†æˆbgfx, imgui, glfw, and glm. https://github.com/JoshuaBrookover/bigg åé¢ä¸€ä¸ªç®€å•çš„æ¡†æ¶å‚è€ƒä¸è¿™ä¸ªåº“ bgfx-minimal-example ç®€å•çš„ helloworld ä½¿ç”¨ bgfx https://github.com/jpcy/bgfx-minimal-example xmakeçš„æ„å»ºé…ç½®å‚è€ƒä¸å®ƒ å‚è€ƒåšå®¢åœ°å€ åœ°å€ æè¿° https://www.cnblogs.com/kileyi/p/8250919.html shader çš„ç¼–è¯‘å‚è€ƒä¸è¿™ä¸ªåšå®¢ https://bkaradzic.github.io/bgfx/build.html bgfx å®˜æ–¹æ–‡æ¡£ ç¼–è¯‘è¿™å‡ ä¸ªåº“æ³¨æ„è¿™é‡Œxmake.luaé…ç½®ç°åœ¨åªèƒ½è¿è¡Œåœ¨windows éœ€è¦å¦‚ä¸‹å‡ ä¸ªåº“ å·¥ç¨‹çš„åˆ†å¸ƒå›¾ æœ€ä¸Šé¢çš„åŸºç¡€é…ç½®12345678910local BGFX_DIR = \"deps/bgfx/\"local BX_DIR = \"deps/bx/\"local BIMG_DIR = \"deps/bimg/\"local GLFW_DIR = \"deps/glfw-3.3/\"local GLM_DIR = \"deps/glm\"set_project(\"vker\")set_version(\"0.0.1\")add_rules(\"mode.debug\", \"mode.release\") ç¼–è¯‘ bgfx çš„xmakeé…ç½®1234567891011121314151617181920212223242526272829303132333435target(\"bgfx\") set_kind(\"static\") set_targetdir(\"$(buildir)/libs\") add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") if is_mode(\"debug\") then add_defines(\"BGFX_CONFIG_DEBUG=1\") end add_includedirs(BGFX_DIR .. \"include\") add_includedirs(BGFX_DIR .. \"3rdparty\") add_includedirs(BGFX_DIR .. \"3rdparty/dxsdk/include\") add_includedirs(BGFX_DIR .. \"3rdparty/khronos\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_includedirs(BIMG_DIR .. \"include\") -- default cl complier add_files(BGFX_DIR .. \"src/**.cpp|amalgamated.cpp\") --|glcontext_glx.cpp|glcontext_egl.cpp add_syslinks(\"user32\", \"gdi32\") è®¾ç½®æ„å»ºé™æ€åº“ è®¾ç½®æ„å»ºé™æ€åº“çš„è·¯å¾„ æ·»åŠ é¢„å®šä¹‰å® æ·»åŠ å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ æ·»åŠ æºæ–‡ä»¶ å¹¶ è¿‡æ»¤æ‰ amalgamated.cpp|glcontext_glx.cpp|glcontext_egl.cpp è¿™ä¸‰ä¸ªcppæ–‡ä»¶ ä¸ä¼šå‡ºç°å‡½æ•°é‡å®šä¹‰é—®é¢˜ ä¾èµ–ç³»ç»Ÿåº“ user32, gdi32 ç¼–è¯‘ bx çš„xmakeé…ç½®123456789101112131415161718192021222324set_kind(\"static\") set_targetdir(\"$(buildir)/libs\") add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BX_DIR .. \"include/bx/inline\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_includedirs(BX_DIR .. \"3rdparty\") add_files(BX_DIR .. \"src/**.cpp|amalgamated.cpp\") --|crtnone.cpp è®¾ç½®æ„å»ºé™æ€åº“ è®¾ç½®æ„å»ºé™æ€åº“çš„è·¯å¾„ æ·»åŠ é¢„å®šä¹‰å® æ·»åŠ å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ æ·»åŠ æºæ–‡ä»¶ å¹¶ è¿‡æ»¤æ‰ amalgamated.cpp|crtnone.cpp è¿™ä¸¤ä¸ªcppæ–‡ä»¶ ä¸ä¼šå‡ºç°å‡½æ•°é‡å®šä¹‰é—®é¢˜ ç¼–è¯‘ bimg çš„xmakeé…ç½®12345678910111213141516171819202122232425262728set_kind(\"static\") set_targetdir(\"$(buildir)/libs\") add_defines(\"__STDC_LIMIT_MACROS\" , \"__STDC_FORMAT_MACROS\" , \"__STDC_CONSTANT_MACROS\" , \"NDEBUG\" , \"WIN32\" , \"_WIN32\" , \"_HAS_EXCEPTIONS=0\" , \"_HAS_ITERATOR_DEBUGGING=0\" , \"_ITERATOR_DEBUG_LEVEL=0\" , \"_SCL_SECURE=0\" , \"_SECURE_SCL=0\" , \"_SCL_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_WARNINGS\" , \"_CRT_SECURE_NO_DEPRECATE\") add_includedirs(BIMG_DIR .. \"include\") add_includedirs(BIMG_DIR .. \"3rdparty/astc-codec\") add_includedirs(BIMG_DIR .. \"3rdparty/astc-codec/include\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_files(BIMG_DIR .. \"src/image.cpp\") add_files(BIMG_DIR .. \"src/image_gnf.cpp\") add_files(BIMG_DIR .. \"3rdparty/astc-codec/src/decoder/*.cc\") è®¾ç½®æ„å»ºé™æ€åº“ è®¾ç½®æ„å»ºé™æ€åº“çš„è·¯å¾„ æ·»åŠ é¢„å®šä¹‰å® æ·»åŠ å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ æ·»åŠ æºæ–‡ä»¶ å¹¶ è¿‡æ»¤æ‰ amalgamated.cpp|glcontext_glx.cpp|glcontext_egl.cpp è¿™ä¸ªä¸‰ä¸ªcppæ–‡ä»¶ ä¸ä¼šå‡ºç°å‡½æ•°é‡å®šä¹‰é—®é¢˜ ç¼–è¯‘ glfw çš„xmakeé…ç½®12345678910111213141516171819202122232425262728293031target(\"glfw\") set_kind(\"static\") set_targetdir(\"$(buildir)/libs\") add_includedirs(GLFW_DIR .. \"include\") add_files(GLFW_DIR .. \"src/context.c\") add_files(GLFW_DIR .. \"src/egl_context.c\") add_files(GLFW_DIR .. \"src/init.c\") add_files(GLFW_DIR .. \"src/input.c\") add_files(GLFW_DIR .. \"src/monitor.c\") add_files(GLFW_DIR .. \"src/osmesa_context.c\") add_files(GLFW_DIR .. \"src/vulkan.c\") add_files(GLFW_DIR .. \"src/window.c\") if is_plat(\"windows\") then add_defines(\"_GLFW_WIN32\", \"_CRT_SECURE_NO_WARNINGS\", \"_WIN64\") add_files(GLFW_DIR .. \"src/win32_*.c\") add_files(GLFW_DIR .. \"src/wgl_context.c\") elseif is_plat(\"linux\") then add_defines(\"_GLFW_X11\") add_files(GLFW_DIR .. \"src/glx_context.c\") add_files(GLFW_DIR .. \"src/linux*.c\") add_files(GLFW_DIR .. \"src/posix*.c\") add_files(GLFW_DIR .. \"src/x11*.c\") add_files(GLFW_DIR .. \"src/xkb*.c\") end add_syslinks(\"shell32\") è®¾ç½®æ„å»ºé™æ€åº“ è®¾ç½®æ„å»ºé™æ€åº“çš„è·¯å¾„ æ·»åŠ é¢„å®šä¹‰å® æ·»åŠ å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ æ ¹æ®å¹³å°æ·»åŠ ç›¸åº”çš„æºæ–‡ä»¶ ä¾èµ–ç³»ç»Ÿåº“ shell32 ç¼–è¯‘å·¥ç¨‹12345678910111213141516171819202122232425262728293031target(\"vkEngine\") add_deps(\"bgfx\") add_deps(\"bx\") add_deps(\"bimg\") add_deps(\"glfw\") set_kind(\"binary\") add_includedirs(BGFX_DIR .. \"include\") add_includedirs(BGFX_DIR .. \"3rdparty\") add_includedirs(BGFX_DIR .. \"3rdparty/dxsdk/include\") add_includedirs(BGFX_DIR .. \"3rdparty/khronos\") add_includedirs(BX_DIR .. \"include\") add_includedirs(BX_DIR .. \"include/compat/msvc\") add_includedirs(BIMG_DIR .. \"include\") add_includedirs(GLFW_DIR .. \"include\") add_includedirs(GLM_DIR) add_includedirs(\"src/\") if is_mode(\"debug\") then add_linkdirs(\"$(buildir)/libs/debug\") add_links(\"glfw\", \"bgfx\", \"bx\", \"bimg\") elseif is_mode(\"release\") then end -- æ˜¾ç¤ºæ§åˆ¶å°æ–¹ä¾¿æ‰“å°è¾“å‡º add_ldflags(\"/SUBSYSTEM:CONSOLE\") add_files(\"src/**.cpp\") ä¾èµ–å‰é¢é‚£å››ä¸ªæ„å»ºä»»åŠ¡ è®¾ç½®æˆå¯æ‰§è¡Œæ–‡ä»¶ æ·»åŠ å¤´æ–‡ä»¶æœç´¢è·¯å¾„ é“¾æ¥é™æ€åº“ è®¾ç½®é“¾æ¥ å‚æ•° æ·»åŠ æºæ–‡ä»¶ ç¼–è¯‘ Shaderc å·¥å…·å› ä¸º bgfx ä½¿ç”¨çš„ GLSL æ˜¯ç¼–è¯‘åçš„æ–‡ä»¶,ä»–ä»¬ä¹Ÿæä¾›ç¼–è¯‘ ä½ ç€è‰²å™¨ä»£ç çš„å·¥å…·, ä½†æ˜¯éœ€è¦ä½ è‡ªå·±ç¼–è¯‘ æŸ¥çœ‹æ–‡æ¡£,ç”Ÿæˆå®˜æ–¹çš„å·¥ç¨‹ æ„å»ºVSå·¥ç¨‹cd bgfx..\\bx\\tools\\bin\\windows\\genie â€“with-tools â€“with-shared-lib â€“with-examples vs2019 ä½¿ç”¨glfwçš„ä¾‹å­cd bgfx..\\bx\\tools\\bin\\windows\\genie â€“with-tools â€“with-shared-lib â€“with-glfw â€“with-examples vs2019 ä½¿ç”¨sdlçš„ä¾‹å­cd bgfx..\\bx\\tools\\bin\\windows\\genie â€“with-tools â€“with-shared-lib â€“with-sdl â€“with-examples vs2019 xcode çš„æ„å»ºä¾‹å­ä¹Ÿæ˜¯æ ·çš„ å»ºè®®ä½¿ç”¨é»˜è®¤çš„æ„å»ºå·¥ç¨‹ ,,, ä¹Ÿå°±æ˜¯ ä¸é€‚ç”¨ glfw, æˆ–è€… sdl ç„¶åä½ ä¼šçœ‹åˆ° ç›´æ¥ç¼–è¯‘è¿™äº›å·¥ç¨‹å°±ä¼šç”Ÿæˆ 5ä¸ªå¯æ‰§è¡Œæ–‡ä»¶,, shder ç¼–è¯‘(shderc) æ¨¡å‹ç¼–è¯‘(geometryc) æ¨¡å‹ç¼–è¯‘åæŸ¥çœ‹å™¨(geometryv) çº¹ç†ç¼–è¯‘(texturec) çº¹ç†ç¼–è¯‘åæŸ¥çœ‹å™¨(texturev) ç¼–è¯‘ shader åˆ°äºŒè¿›åˆ¶çœ‹ä»–ä»¬çš„ä¾‹å­ æ¯ä¸ªshader éƒ½ä¼šå¼•ç”¨ bgfx_shader.sh å’Œ shaderlib.sh ä¸¤ä¸ªæ–‡ä»¶ æ‰¾åˆ°ä¸‹é¢ shader.mk æ–‡ä»¶ çœ‹ä¸‹é¢çš„å†…å®¹, è¿™äº›ä¸œè¥¿å¯ä»¥æç¤ºä½ æ€ä¹ˆä½¿ç”¨ shaderc ç¼–è¯‘å™¨ è¿™ä¸ªæ˜¯ä»–ä»¬shaderç¼–è¯‘å™¨çš„å¸®åŠ©ä¿¡æ¯ windows opengl å‘½ä»¤å¯ä»¥æ–°å»ºä¸€ä¸ªæ‰¹å¤„ç†æ‰§è¡Œä¸‹é¢çš„å†…å®¹ 1234shaderc -f ../examples/cubes/vs_cubes.sc -o ..\\examples\\cubes\\shaders\\glsl\\vs_cubes.bin --platform windows -i ..\\examples\\cubes\\ -p 120 --type vertexshaderc -f ../examples/cubes/fs_cubes.sc -o ..\\examples\\cubes\\shaders\\glsl\\fs_cubes.bin --platform windows -i ..\\examples\\cubes\\ -p 120 --type fragmentpause windows dx11 å‘½ä»¤1234shaderc -f ../examples/cubes/vs_cubes.sc -o ..\\examples\\cubes\\shaders\\dx11\\vs_cubes.bin --platform windows -i ..\\examples\\cubes\\ -p vs_5_0 --type vertex -O 3shaderc -f ../examples/cubes/fs_cubes.sc -o ..\\examples\\cubes\\shaders\\dx11\\fs_cubes.bin --platform windows -i ..\\examples\\cubes\\ -p ps_5_0 --type fragment -O 3pause ç¼–è¯‘å‚æ•°éƒ¨åˆ†è§£é‡Š â€“varyingdef æŒ‡å®š varying.def.sc è‡³äºè¿™ä¸œè¥¿ åªæ˜¯è§„å®š, åé¢å†è¯´.-f è¾“å…¥æ–‡ä»¶-o è¾“å‡ºæ–‡ä»¶â€“platform ç¼–è¯‘å¹³å°-i è¦åŒ…å«æ–‡ä»¶çš„è·¯å¾„-p è¿™ä¸ªå‚æ•°æ˜¯ç€è‰²å™¨çš„æ¨¡å¼ ä¸»è¦å‚è€ƒ shader.mk é‡Œé¢çš„å‚æ•°åšå‚è€ƒâ€“type ç¼–è¯‘çš„ç±»å‹-O &lt;0,1,2,3&gt; DX9 æˆ–è€… DX11 ä¼˜åŒ–ç­‰çº§ ç¼–è¯‘å¥½çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ‘è¿™é‡Œæ”¾ä¸Šæˆ‘ç¼–è¯‘å¥½çš„ macosxå¹³å° Release ç‰ˆçš„å·¥å…·é‡Œé¢åŒ…å« geometryc geometryv texturec texturev shaderc ä¸‹è½½åœ°å€ endingè¿™é‡Œæˆ‘å°±ä¸æ”¾ä»£ç äº†,,, éœ€è¦ä½ ä»¬è‡ªå·±åŠ¨æ‰‹å»åš,,, æˆ‘å¯ä»¥æŠŠæ„å»ºé…ç½®å‘ç»™ä½ ä»¬æˆ‘ä¹Ÿåªæ˜¯ç”¨äº†ä¸€ç‚¹, åé¢ä¼šç»§ç»­æ·±å…¥,,, å¤§å®¶ä¸€å—å­¦ä¹ ,,, è®¨è®ºäº¤æµ.è¿™ä¸ªå®˜æ–¹çš„æ–‡æ¡£æ¯”è¾ƒçš„å°‘, ä¸å…¨é¢, éœ€è¦è‡ªå·±å¤šçœ‹çœ‹ä»–ä»¬çš„ä¾‹å­å’Œæºç . xmake.lua é…ç½®xmake.lua","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://leng521.top/tags/å‰ç«¯/"},{"name":"cpp","slug":"cpp","permalink":"https://leng521.top/tags/cpp/"},{"name":"bgfx","slug":"bgfx","permalink":"https://leng521.top/tags/bgfx/"},{"name":"xmake","slug":"xmake","permalink":"https://leng521.top/tags/xmake/"},{"name":"lua","slug":"lua","permalink":"https://leng521.top/tags/lua/"}]},{"title":"WebGLä»¥æ— ç¬¦å·å­—èŠ‚ä¼ é€’é¢œè‰²çš„åŸç†","date":"2019-06-14T01:27:29.000Z","path":"/posts/af81a0c5/","text":"è¿™ä¸ªç®—å±äº WebGL è¿›é˜¶å§, å› ä¸ºè¿™ä¸ªå±äºä¼˜åŒ–, è¿è¡Œæ•ˆç‡, å¦‚æœä½ ä¸äº†è§£ WebGL çš„åŸºæœ¬çŸ¥è¯†,ä½ å¯ä»¥åˆ°è¿™é‡Œå…ˆå­¦ä¹ åŸºç¡€çŸ¥è¯†.æˆ‘ä¼šåœ¨ä¸‹é¢æ”¾ä¸Šå‡ ä¸ªæ¯”è¾ƒå¥½çš„å­¦ä¹ é“¾æ¥. æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¦‚ä¸‹ ç¼–ç¨‹é‡Œé¢çš„ä½è¿ç®— ä¸­çš„(&amp;)è¿™ä¸ªç¬¦å·çš„è¿ç®—æ³•åˆ™ WebGL vertexAttribPointer è¿™ä¸ªæ¥å£ä¸­çš„ normalized åˆ°åº•æ˜¯æ€ä¹ˆåšçš„å½’ä¸€åŒ– ç»™ WebGL ä¼ é€’ä¸€ä¸ªå€¼ ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½æ‹¿åˆ°å››ä¸ªå€¼(ç”¨äºä¼˜åŒ–æ¯æ¬¡ä¼ é€’æ•°æ®çš„å°ºå¯¸) å¦‚æœå…ˆäº†è§£å†™è¿™ç¯‡æ–‡ç« çš„æ„å›¾è¯å¯ä»¥ç›´æ¥è·³è½¬åˆ°æ„å›¾å¼€å§‹çœ‹. å•Šå“ˆ æ„å›¾åœ¨çœ‹ä¸€äº›å¼•æ“æºç çš„æ—¶å€™æ€»æ˜¯åœ¨ç»™ GUP ä¼ é€’é¢œè‰²çš„æ—¶å€™ä¼šçœ‹ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç . ä¸‹é¢æˆ‘å†™ä¸€ä¸ªä¼ªä»£ç . 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// ç€è‰²å™¨ä¼ªä»£ç let vs = `attribute vec2 a_position;attribute vec2 a_texCoord;attribute vec4 a_tint; ğŸ˜„ğŸ˜„ğŸ˜„varying vec2 v_texCoord;varying vec4 v_tint;void main() &#123; gl_Position = vec4(a_position, 1.0, 1.0); v_tint = a_tint; v_texCoord = a_texCoord;&#125;`;let fs = `precision mediump float;uniform sampler2D u_texture;varying vec2 v_TexCoord;varying vec4 v_tint;void main() &#123; gl_FragColor = texture2D(u_texture, v_TexCoord) * v_tint;&#125;`;let arrayBuffer = new ArrayBuffer(5*4);let float32Array = new Float32Array(arrayBuffer);let uint32Array = new Uint32Array(arrayBuffer);// ä¼ é€’é¡¶ç‚¹æ•°æ®float32Buffer[0] = 1;float32Buffer[1] = 0;// ä¼ é€’uvåæ ‡float32Buffer[3] = 0;float32Buffer[4] = 0;// ä¼ é€’é¢œè‰²let a = &#123; tint: 0x00ff00, alpha: 1,&#125;;let b = (a.tint &gt;&gt; 16) + (a.tint &amp; 0xff00) + ((a.tint &amp; 0xff) &lt;&lt; 16) + (a.alpha * 255 &lt;&lt; 24); ğŸ˜„ğŸ˜„ğŸ˜„uint32Array[5] = b; ğŸ˜„ğŸ˜„ğŸ˜„// ... å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–çš„æ•°æ®ä¼ é€’è¿™ä¸ªéƒ½å¾—çœ‹ä»–ä»¬æ˜¯æ€ä¹ˆå¤„ç†äº†,// æŒ‡å®šé¡¶ç‚¹å±æ€§ å’Œ UV å±æ€§æˆ‘å°±ä¸å†™äº†.[...]// æŒ‡å®š é¢œè‰² å±æ€§gl.enableVertexAttribArray(2);// void gl.vertexAttribPointer(index, size, type, normalized, stride, offset);gl.vertexAttribPointer(2, 4, gl.UNSIGNED_BYTE, true, 5*4, 4*4); ğŸ˜„ğŸ˜„ğŸ˜„ æˆ‘åªä¼šè§£é‡Š åœ¨ä»£ç åé¢ å¸¦ ğŸ˜„ğŸ˜„ğŸ˜„ è¿™ä¸ªæ ‡è¯†çš„ä»£ç .æˆ‘ç›¸ä¿¡å…¶ä»–çš„ä»£ç ,èªæ˜çš„ä½ è‡ªå·±çœ‹æ‡‚è¿™ä¸ªçœ‹éšæ„ğŸ˜„. æ€»ä¼šå‡ºç°,åœ¨ä¼ é€’çš„é¢œè‰²çš„æ—¶å€™,ä½¿ç”¨ Uint32Array è¿™ç§ç±»å‹,å…¶ä»–çš„ä¾æ—§æ˜¯ Float32Array, è€Œä¸”ä¹ä¸€çœ‹,è¿˜å¸¦äº†ä¸€å †ä½è¿ç®—.æ™®é€šäººè¡¨ç¤ºçœ‹ä¸æ‡‚. æœ‰ç‚¹å¼º,è¿™ä¸ªä¸‰è¡Œä»£ç . äºæ˜¯ä¹è¿™ç¯‡æ–‡ç« è¯ç”Ÿäº†. è§£å†³ç–‘æƒ‘é¦–å…ˆä½ è¦åšçš„å°±æ˜¯,è‡ªå·±å˜æˆç”µè„‘,å»æ‰§è¡Œä»£ç . é‚£ä¸€å †ä½è¿ç®—åˆ°åº•åšäº†å•¥&amp; è¿™ä¸ªè¿ç®—ç¬¦ å°±æ˜¯ 123451 &amp; 1 =&gt; 11 &amp; 0 =&gt; 00 &amp; 0 =&gt; 0 (a.tint &gt;&gt; 16) + (a.tint &amp; 0xff00) + ((a.tint &amp; 0xff) &lt;&lt; 16) + (a.alpha * 255 &lt;&lt; 24) å®ƒæ—¢ç„¶æ˜¯ä½è¿ç®—,é‚£æˆ‘ä»¬å°±æŠŠä»–è½¬æˆäºŒè¿›åˆ¶çœ‹,æ¯•ç«Ÿè‡ªå·±ä¾ç„¶æ˜¯ç”µè„‘äº†,è¿™ä¸ªæ‰æ˜¯ä½ çš„æ¯è¯­. å¥½ç»è¿‡ä¸Šé¢çš„æ¨ç®—å¾—å‡ºæœ€ç»ˆçš„ç»“æœäº†. å°±æ˜¯ 11111111 00000000 11111111 00000000 æœ‰Uint32Array å¤„ç†ä¸€ä¸‹æˆ‘çš„æ•°æ®å› ä¸ºçš„æ•°æ®å¯èƒ½æ˜¯è´Ÿæ•° è¿™ä¸ªæ˜¯ä¸è¡Œçš„.1uint32Array[5] = b; ğŸ˜„ğŸ˜„ğŸ˜„ ä¸€ä¸ªè´Ÿæ•°å°±å˜æˆæ­£æ•°äº†. è‡³äºä»–æ˜¯æ€ä¹ˆå˜çš„, ä½ å¯ä»¥æ‰¾åº¦å¨˜ é—®å¥¹ ç¼–ç¨‹é‡Œçš„å¤§å°ç«¯æ˜¯ä»€ä¹ˆä¸œè¥¿. æŒ‡å®šè¿™äº›æ•°æ®æ€ä¹ˆç”¨12// void gl.vertexAttribPointer(index, size, type, normalized, stride, offset);gl.vertexAttribPointer(2, 5, gl.UNSIGNED_BYTE, true, 5*4, 4*4); ğŸ˜„ğŸ˜„ğŸ˜„ è§£é‡Šä¸Šé¢çš„å¥å­å°±æ˜¯ ==&gt; æˆ‘æ˜¯ä»¥ æ— ç¬¦å·å­—èŠ‚(unsigned byte) ä¼ é€’ å¹¶ç»™æˆ‘ä¼ é€’è¿™äº›æ•°æ®å½’ä¸€åŒ–, è€Œä¸”æˆ‘çš„å°ºå¯¸æ˜¯4 é‚£å°±è¯´æ˜ä½ è¦ç»™æˆ‘ä¼ é€’çš„è¿™ä¸ªæ•°å­—ç»™æˆ‘åˆ†å‰²æˆ 4ä¸ªæ•°å­—. å¥½æˆ‘ä»¬å°±æ‰§è¡Œè¿™è¡Œä»£ç .åœ¨ä¼ é€’ç»™ GUP çš„æ—¶å€™ä»–åˆ°åº•åšäº†å•¥, æˆ‘è¿™ä¸ªåšä¸€ä¸ª ä¼ªä»£ç  æ¨¡æ‹Ÿä¸€ä¸‹.1234567891011ä¼ é€’ç»™ GPU 11111111 00000000 11111111 00000000 ===&gt; å¯¹åº”çš„åè¿›åˆ¶æ˜¯ 255 0 255 0æˆ‘å¼€å§‹åˆ†å‰² å› ä¸ºä½ çš„å°ºå¯¸æ˜¯ 4, ä»ä½ä½å¼€å§‹åˆ‡å‰²è¾“å‡º ===&gt; [00000000, 11111111, 00000000, 11111111] ===&gt; [0, 255, 0, 255];ä½†æ˜¯è¿™ä¸ªæ•°æ®çš„è¿”å› ä¸æ˜¯ç€è‰²å™¨è¦ çš„ èŒƒå›´, å½’ä¸€åŒ–å› ä¸ºä½ çš„æ•°æ®ç±»å‹æ˜¯ æ— ç¬¦å·å­—èŠ‚(unsigned byte) å®ƒçš„èŒƒå›´æ˜¯ 0 ~ 255, Nice.[0, 255, 0, 255] / 255 ===&gt; [0,1,0,1] ä¼ é€’ç»™ç€è‰²å™¨1attribute vec4 a_tint; ğŸ˜„ğŸ˜„ğŸ˜„ è¿™ä¸ªé‡Œ ä¸Šä¸€æ­¥è¾“å‡ºçš„ æ•°æ®ç±»å‹ç®€ç›´å°±æ˜¯ å­¦ä¹ é“¾æ¥è¿™ä¸ªé‡Œæˆ‘ç»™ èƒ½æœ‰å¹¸çœ‹åˆ°è¿™ç‰‡æ–‡ç« çš„äºº æ¨é€å‡ ä¸ªæ¯”è¾ƒæœ‰ä»·å€¼çš„ å­¦ä¹ ç½‘ç«™å§. è¿™äº›éƒ½å†™çš„ä¸é”™. WebGL(MDN)ä¸­æ–‡ç‰ˆ å¦‚æœä½ æ„Ÿè§‰ä¸Šé¢é‚£ä¸ª([WebGL(MDN)ä¸­æ–‡ç‰ˆ)æ¯”è¾ƒçš„ç®€å•,ä½ å¯ä»¥æµè§ˆè¿™ä¸ªæ•™ç¨‹ç½‘ç«™å†™çš„ä¹Ÿå¾ˆä¸é”™. WebGLå…¥é—¨æ•™ç¨‹WebGL2æ•™ç¨‹ ä½†æ˜¯è¦æ³¨æ„è¿™ä¸ªéƒ½æ˜¯å…¥é—¨æ•™ç¨‹,è¿™ä¸ªä¸œè¥¿ä¸è¶³ä»¥æ”¯æ’‘ä½ å†™é«˜æ•ˆç‡çš„æ¡†æ¶. å®è·µå‡ºçœŸçŸ¥,åªæœ‰å¤šç£¨å¤šç»ƒæ‰æ˜¯ç¡¬é“ç†. æœ‰é—®é¢˜ QQ è®¨è®º. ãƒ¾(ï¿£â–½ï¿£)Bye~Bye~","tags":[{"name":"js","slug":"js","permalink":"https://leng521.top/tags/js/"},{"name":"WebGL","slug":"WebGL","permalink":"https://leng521.top/tags/WebGL/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://leng521.top/tags/å‰ç«¯/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆä¸Šä¼ åª’ä½“æ–‡ä»¶","date":"2019-06-06T09:28:24.000Z","path":"/posts/6512ee5/","text":"è¯­è¨€ï¼š nodejs ä»Šå¤©ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹å¾®ä¿¡å°æ¸¸æˆè”ç³»å®¢æœçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ç»™å¾®ä¿¡ç”¨æˆ·å‘é€å›¾ç‰‡çš„æµç¨‹ã€‚å¦‚æœä½ é‡åˆ°ä»¥ä¸‹å›°éš¾ï¼Œå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œå› ä¸ºå®ƒæ¶‰åŠè¿™äº›ç”¨æ³•å§ã€‚ æœåŠ¡å™¨ä½œä¸ºå®¢æˆ·ç«¯å‘é€ form è¡¨å•æ•°æ® ä½¿ç”¨nodejsä¸Šä¼ åª’ä½“æ–‡ä»¶ç»™å¾®ä¿¡æœåŠ¡å™¨ ä½¿ç”¨æœåŠ¡å™¨æ‹‰å»å…¶ä»–æœåŠ¡å™¨æˆ–cdnç­‰å­˜æ”¾å›¾çš„åœ°æ–¹ï¼Œå°†å…¶å­˜å‚¨ä¸ºbuffer è¿™é‡Œä¸»è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ… requestä»¥å‰éƒ½æ˜¯ä½¿ç”¨ nodejs åŸç”Ÿçš„httpè¯·æ±‚ åŠŸèƒ½æœ‰é™ã€‚ æˆ‘è¿™è¾¹çš„éœ€æ±‚æ˜¯åœ¨å°æ¸¸æˆè”ç³»å®¢æœçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å‘é€ä¸€å¼ å›¾ç‰‡ç»™ç”¨æˆ·ã€‚ æ‹‰å–ç½‘ä¸Šå›¾ç‰‡ä»¥bufferç±»å‹å­˜å‚¨åœ¨å†…å­˜ä¸­ä½¿ç”¨requset æ‹‰å»ç½‘ä¸Šå›¾ç‰‡å¹¶ä¿å­˜ä¸ºbufferè¿™ç§æ•°æ®ç±»å‹ï¼Œå¦‚æœä½ ä¸çŸ¥é“Buufer æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå¯ä»¥ä¸Šç½‘ä¸Šæœï¼Œä¸€å¤§å †ã€‚è¿™é‡Œç›´æ¥å±•ç¤ºä»£ç ï¼Œé€»è¾‘éƒ½æ¯”è¾ƒçš„ç®€å•ã€‚è¿˜æ˜¯ç¬¬ä¸‰æ–¹åº“å°è£…çš„åŠŸèƒ½æœåŠ¡å§ã€‚ 12345678910111213141516171819var request = require('request');let url = \"https://test.com/\";let path = \"test/test.jpg\";request(&#123; url: url + path, encoding: null&#125;, function(err, res, data) &#123; if(err) &#123; cb(err, null); &#125; else &#123; if(res.statusCode == 200) &#123; cb(null,data); &#125; else &#123; cb(new Error(\"err\"),null) &#125; &#125;&#125;) è¿™é‡Œå”¯ä¸€å¥½è¯´æ˜çš„ä¸€ç‚¹å¯èƒ½å°±æ˜¯ åœ¨è¯·æ±‚é…ç½®ä¸­çš„ encoding è®¾ç½®ä¸º null å› ä¸ºé»˜è®¤ä»–ä¼šè¿”å›å­—ç¬¦ä¸²è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¿™æ ·ä»–è¿”å›çš„æ•°æ®å°±æ˜¯ Buffer ç±»å‹çš„æ•°æ®ã€‚ æœåŠ¡å™¨æ¨¡æ‹Ÿè¡¨å•å¡«å†™è¿™é‡Œå®˜æ–¹æ–‡æ¡£åœ¨ è¡¨å• æäº¤é‚£ä¸€å—å†™çš„ä¾‹å­ä¹ŸæŒºå¤šï¼Œä¼ é€’ å­—ç¬¦ä¸²ï¼ŒBufferï¼Œæ–‡ä»¶ï¼Œè‡ªå®šä¹‰æ–‡ä»¶ç­‰ã€‚ ä»£ç å±•ç¤ºä¼ é€’è‡ªå®šä¹‰æ–‡ä»¶çš„è¡¨å•æ•°æ®123456789101112131415161718192021222324252627282930313233var request = require('request');let token = \"22_Oa10EbGd2mqFc3vzzMtQMZFyfh-p999OLKjpi8qnHIPwWt3aAk3zwyjDi36ye5s-jAER28aOemlR15PT99zoM2qzNbu7xzbl1kjxepkC9RoYQRA9Jk6Z0Kxwef2eZ4iRt_ECtCfKXZGlyFDgDCAbAIALKI\";let type = \"image\";let url = `https://api.weixin.qq.com/cgi-bin/media/upload?access_token=$&#123;token&#125;&amp;type=$&#123;type&#125;`;var form = &#123; //æ„é€ è¡¨å• media: &#123; value: buffer, // æ³¨æ„è¿™æœ‰ä¸ªæœªçŸ¥å˜é‡ï¼Œ è¿™ä¸ªå°±æ˜¯ä¸Šä¸€æ­¥è¯·æ±‚è¿‡æ¥çš„ buffer æ•°æ® options: &#123; filename: 'test.jpg', contentType: 'image/jpeg' &#125; &#125;,&#125;request(&#123; url: url, method:'POST', formData: form, json:true&#125;, (err, res, data) =&gt; &#123; if(err) &#123; console.log(\"ERR =&gt;\", err) &#125; else &#123; if(res.statusCode == 200) &#123; console.log(\"SUCCESS\", data); &#125; else &#123; cb(\"STATUS CODE\", res); &#125; &#125;&#125;) è¿™é‡Œçš„ buffer å˜é‡å°±æ˜¯ä¸Šä¸€æ­¥ è¯·æ±‚ è¿‡æ¥çš„æ•°æ®ã€‚ å°±æ˜¯å°†ä¸Šä¸€æ­¥è¯·æ±‚åˆ°çš„ data ç›´æ¥ ä¼ é€’ç»™ è¿™ä¸ªè¯·æ±‚ä¸­å½“ä½œå‚æ•°ã€‚è¿™ä¸ªè¡¨å•æ„å»ºä½ ç›´æ¥å°† request æ–‡æ¡£ä¸Šé¢è‡ªå®šä¹‰çš„å†™æ³•ç›´æ¥ç²˜è¿‡æ¥å°±èƒ½ç”¨å”¯ä¸€ä¸ä¸€æ ·çš„å¯èƒ½å°±æ˜¯ï¼Œå®ƒè¡¨å•é‡Œçš„ value æ˜¯ æµï¼Œ æˆ‘çš„æ˜¯ bufferï¼Œ ä½†æ˜¯ä¹Ÿæ˜¯èƒ½ä¼ é€’çš„ï¼Œè€Œä¸”å¾®ä¿¡çš„ä¾‹å­ä¸­å†™çš„ä¹Ÿæ˜¯bufferã€‚ å¥½äº†è¿™ç¯‡å†…å®¹å°±åˆ°è¿™é‡Œäº†ã€‚æœ‰é—®é¢˜å¯ä»¥å°†å³è¾¹å±•å¼€ï¼ŒåŠ æˆ‘QQåœ¨è®¨è®ºã€‚","tags":[{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"},{"name":"nodejs","slug":"nodejs","permalink":"https://leng521.top/tags/nodejs/"},{"name":"åç«¯","slug":"åç«¯","permalink":"https://leng521.top/tags/åç«¯/"}]},{"title":"ä¸€å¼ å›¾ææ‡‚jsåŸå‹é“¾","date":"2019-04-25T14:02:10.000Z","path":"/posts/5e8fa495/","text":"è¯­è¨€ï¼š js js version: v10.15.1 æ—¶é—´ï¼š 2019.4.25 15:34 è¿™é‡Œæˆ‘ä¸è¯´å¤ªé•¿çš„è¯ï¼Œå»è§£é‡Šï¼Œä¸ç„¶ä¼šæ™•ã€‚js é‡Œé¢çš„åŸå‹æ˜¯çœŸçš„æœ‰ä¸€ç‚¹çš„ç»•ã€‚è®°ä½è¿™å‡ å¥è¯å°±è¡Œäº†ï¼Œæˆ‘å°±ä¸ç”»å›¾äº†ï¼Œä¸ç„¶æˆ‘æ„Ÿè§‰çœ‹å›¾æ›´æ™•ã€‚ ä¸‡ç‰©çš†å¯¹è±¡ã€‚ js å¯¹è±¡åˆ†ä¸º å‡½æ•°å¯¹è±¡ å’Œ æ™®é€šå¯¹è±¡ã€‚ åªæœ‰å‡½æ•°å¯¹è±¡æœ‰ prototype ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ proto å†…ç½®å±æ€§ã€‚ prototype å…¶å®æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚ proto æ˜¯æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ Function.prototype å®ƒæ—¢æ˜¯å‡½æ•°å¯¹è±¡ä¹Ÿæ˜¯ä¸æ™®é€šå¯¹è±¡ã€‚ Object.prototype.proto æ˜¯ä¸ª nullã€‚ ä»€ä¹ˆæ˜¯å‡½æ•°å¯¹è±¡ï¼Ÿä»€ä¹ˆæ˜¯æ™®é€šå¯¹è±¡ï¼Ÿè§£é‡Šï¼š é€šè¿‡ new Function åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯å‡½æ•°å¯¹è±¡ï¼Œ å‡½æ•°å¯¹è±¡çš„å®ä¾‹æ˜¯æ™®é€šå¯¹è±¡ã€‚ Object å°±æ˜¯é€šè¿‡ new Function åˆ›å»ºå‡ºæ¥çš„ã€‚12console.log(typeof Object); // =&gt; function è¿™å°±æ˜¯å‡½æ•°å¯¹è±¡ï¼Œ å› ä¸ºä»–ä»¬æ˜¯js å†…ç½®åˆ›å»ºå‡ºæ¥çš„ã€‚console.log(typeof Function); // =&gt; function ä»€ä¹ˆæ˜¯å‡½æ•°çš„åŸå‹(prototype)åŸå‹(prototype)å…¶å®æ˜¯å‡½æ•°å¯¹è±¡çš„å®ä¾‹ï¼Œå‰é¢è¯´è¿‡.åœ¨ä»£ç ä¸­çš„ä½“ç°å¦‚ä¸‹12345678910111213141516function A()&#123;&#125;A.prototype.walk = function() &#123; console.log(\"walk\");&#125;console.log(typeof A.prototype); // object// è¿™ä¸ªå…¶å®å’Œè¿™ä¸ªå·®ä¸å¤šã€‚function B() &#123;&#125;B.prototype = &#123; walk:function() &#123; console.log(\"walk\"); &#125;&#125;new A().walk(); // =&gt; walknew B().walk(); // =&gt; walk å…¶å®å‡½æ•°å¯¹è±¡A å’Œ å‡½æ•°å¯¹è±¡ B æ˜¯æ‹¥æœ‰ä¸€æ ·çš„åŠŸèƒ½çš„ã€‚ä½ å…¶å®å°±å¯ä»¥æƒ³è±¡æˆä»–å°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡è€Œå·²ï¼Œç¡®åˆ‡çš„è¯´æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚ æ€ä¹ˆåˆ¤æ–­è¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯ å‡½æ•°å¯¹è±¡è¿˜æ˜¯æ™®é€šå¯¹è±¡ï¼Ÿä¸€ä¸ªç®€å•çš„åˆ¤æ–­å¦‚ä¸‹ï¼š1234// è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä½ å¯èƒ½è¯´è¿™ä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å®ƒæ˜¯ new Function() åˆ›å»ºå‡ºæ¥çš„ æ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡console.log(typeof Object); // =&gt; function// è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡console.log(typeof new Object()); // =&gt; object ä»€ä¹ˆæ˜¯proto?proto å…¶å®æ˜¯å‡½æ•°å¯¹è±¡çš„åŸå‹ ä¸¾ä¸ªä¾‹å­è§£é‡Šè¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041// ä¸ºä»€ä¹ˆè¾“å‡ºçš„ funciton å› ä¸ºå®ƒå°± ç­‰åŒäº Function.prototype// å› ä¸º Object è¿™ä¸ªå‡½æ•°å¯¹è±¡å°±æ˜¯ æ ¹æ® Funcitonçš„å‡½æ•°åŸå‹æ„å»ºå‡ºæ¥çš„ã€‚// æ‰€ä»¥å°±æœ‰ä¸‹é¢çš„è¾“å‡ºäº†ã€‚console.log(Object.__proto__); // =&gt; function // å‡½æ•°å¯¹è±¡// ä¸ºäº†éªŒè¯ä¸Šé¢çš„è¯´æ³•console.log(Object.__proto__ === Function.prototype); // trueconsole.log(Object.prototype); // =&gt; &#123;&#125;(object) // å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹, åªæœ‰å‡½æ•°å¯¹è±¡æœ‰ prototype// éªŒè¯ä¸Šé¢çš„è¯´æ³•console.log(Object.prototype === Object.__proto__); // =&gt; false// å†æ¥ä¸€ä¸ª // å¯èƒ½æœ‰äººä¼šé—®ä¸‹é¢è¿™ä¸ªæ˜¯ä»€ä¹ˆä¸œè¥¿// æŒ‰é“ç† Oject.prototype åº”è¯¥æ˜¯ æ™®é€šå¯¹è±¡ï¼Œ é‚£æ™®é€šå¯¹è±¡çš„__proto__ åº”è¯¥æ˜¯ Obejct.prototype// ä½†æ˜¯ä¸æ˜¯ï¼Œå¯èƒ½ è¿™ä¸ª js å°†è¿™ä¸ªé‡Œå¼ºè¡Œ ç½®ä¸º nullï¼›// è¿™ä¸ªæ˜¯åŸå‹é“¾çš„ é¡¶ç«¯ã€‚ è®°ä½å°±å¥½ã€‚// çœŸçš„è®°ä½å°±å¥½å—ï¼Ÿ å—¯å“¼ï¼Œè‚¯å®šä¸è¡Œã€‚åé¢è§£é‡Šconsole.log(Object.prototype.__proto__); // =&gt; null// å‡½æ•°å¯¹è±¡çš„åŸå‹ åº”è¯¥æ˜¯ æ™®é€šå¯¹è±¡.__proto__ åº”è¯¥æ˜¯ Object.prototypeconsole.log(Function.prototype.__proto__); // =&gt; &#123;&#125; æ™®é€šå¯¹è±¡// å¼ºè¡ŒæŒ‰ç…§ä¸Šé¢ prototype çš„æ¦‚å¿µï¼Œ è¿™ä¸ªåº”è¯¥ä¹Ÿæ˜¯ä¸ª Obejct çš„ ä½†æ˜¯ ä»–çš„è¾“å‡ºç¡®å® function// è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ è®°ä½å°±å¥½ï¼Œ ä½†å®ƒä¹Ÿæ˜¯ æ™®é€šå¯¹è±¡ã€‚// é‚£å°±è¯´æ˜äº† Function è‡ªå·± åˆ›å»ºäº†è‡ªå·±console.log(Function.prototype)// çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­// å…¶å® a å°±æ˜¯ æ™®é€šå¯¹è±¡ // æˆ‘è¯´äº† æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ __proto__ åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰ prototypelet a = &#123;&#125;; // let a = new Object();console.log(a.prototype); // null;// __proto__ æŒ‡çš„æ˜¯ æ„é€ å‡½æ•°çš„åŸå‹ æˆ–è€…è¯´æ˜¯å‡½æ•°å¯¹è±¡çš„åŸå‹// &#123;&#125; å’Œ new Object() æ˜¯ä¸€æ ·çš„// æ‰€ä»¥ __proto__ æŒ‡å‘ Object.prototype// æ‰€ä»¥å°±æ˜¯ &#123;&#125;console.log(a.__proto__); // Object.prototype; === &#123;&#125;// éªŒè¯ä¸Šé¢çš„è¯´æ³•console.log(a.__proto__ === Object.prototype); // true å•Šå“ˆï¼Œä¸Šé¢çš„ä¾‹å­æœ‰ç‚¹å¤šå‘µï¼Œè¦æƒ³å­¦ä¹ ä¸œè¥¿å°±è‡ªå·±å¤šæƒ³ï¼Œå¤šçœ‹å§ã€‚ é‚£ä¹ˆè¿™äº›ä¸œè¥¿åˆ°åº•èƒ½å¹²å˜›ï¼Ÿproto å’Œ prototype èƒ½ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿè¿™é‡Œæˆ‘ç†è§£å°±æ˜¯ä¸ºäº†ç»§æ‰¿å§ã€‚ä¸¾ä¸ªä¾‹å­å§ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647let a = &#123;&#125;;console.log(a.__proto__); // =&gt; function =&gt; Object.prototype =&gt; Function.prototype``` a ç»§æ‰¿ Object æ–¹æ³•å»å“ªé‡Œäº† è¿™ä¸ª __proto__ å†…ç½®å±æ€§å¯èƒ½æ˜¯å”¯ä¸€å¯ä»¥è¿½å¯»çš„ å±æ€§äº†ã€‚æ‰€ä»¥æˆ‘çš„ç†è§£å°±æ˜¯ prototype æ˜¯ä¸ªå‚¨å­˜æ–¹æ³•çš„å®¹å™¨ï¼Œæ˜¯å‡½æ•°å¯¹è±¡å‚¨å­˜æ–¹æ³•çš„å®¹å™¨ã€‚__proto__ æ˜¯è¿æ¥ å®ä¾‹ å’Œ å‡½æ•°å¯¹è±¡ä¹‹é—´çš„ æ¡¥æ¢æ‰€ä»¥ç»§æ‰¿æ˜¯é  __proto__ å±æ€§ã€‚### å®ç°ä¸ªç»§æ‰¿çš„ä¾‹å­éªŒè¯ä¸€æ³¢ä¸Šé¢çš„è¯´æ³•```js// åˆ›å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡function A () &#123; console.log('A å¯¹è±¡æ„é€ ');&#125;// åˆ›å»ºæ–¹æ³•A.prototype.walk = function() &#123; console.log('A walk');&#125;// é™æ€æ–¹æ³•A.hello = function() &#123; console.log('A static method hello method is called');&#125;A.hello();new A().walk();// åˆ›å»ºä¸€ä¸ª å‡½æ•°å¯¹è±¡ Bfunction B() &#123; this.name = \"hello\"; console.log('Bå¯¹è±¡æ„é€ ')&#125;// è¿™é‡Œåªæ˜¯å°† A å‡½æ•°å¯¹è±¡çš„æ–¹æ³•æ‰¿è½½è¿‡æ¥äº†B.prototype.__proto__ = A.prototype;// ç»§æ‰¿é™æ€å˜é‡B.hello = A.hello;// Bçš„æ„é€ å‡½æ•°è¿˜æ˜¯Bconsole.log(B.prototype.constructor === B); // truenew B().walk(); // Bå¯¹è±¡æ„é€  A walkB.hello(); // A static method hello method is calledconsole.log(new B().name); // è¯´æ˜æ„é€ å‡½æ•°é‡Œé¢çš„ this æ˜¯å®ä¾‹çš„å¼•ç”¨ æ€»ç»“ä¸çŸ¥ä¸è§‰æœ‰äº›çš„æœ‰ç‚¹é•¿äº†ï¼Œæœ‰äº›å¤æ‚çš„æ„Ÿå¿µåªæœ‰å¤šæ‰“å°ï¼Œå¤šæƒ³ï¼Œæ‰è¡Œã€‚æè¿°çš„å°‘äº†ï¼Œå°±æè¿°çš„ä¸ä¸€å®šå‡†ç¡®ã€‚å“ï½ï¼› å‡½æ•°å¯¹è±¡ =&gt; ç±»(class) æ™®é€šå¯¹è±¡ =&gt; ç±»(class)çš„å®ä¾‹ prototype =&gt; ç±»(class)çš„å®ä¾‹æ–¹æ³• proto =&gt; ç±»(class) ä¸ ç±» ä¹‹é—´ç»§æ‰¿çš„æ¡¥æ¢ B ç»§æ‰¿ A é€šè¿‡ proto å°† Açš„å®ä¾‹æ–¹æ³•æ³¨å…¥åˆ° B ä¸­ Object ï¼Œ Function å‡½æ•°å¯¹è±¡ é»˜è®¤ prototype ä¸­ä¼šè¢« js æ³¨å…¥ä¸€äº›é»˜è®¤çš„æ–¹æ³• constructor è§£ç­”ç–‘æƒ‘ Object.prototype.protoä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼Œä¸Šé¢å¯ä»¥å‚è€ƒç»§æ‰¿çš„ä¾‹å­ è¿™å°±è¯å°±æ˜¯ Object ç»§æ‰¿ä¸è° é‚£å½“ç„¶æ˜¯ nullï¼›å®ƒæ˜¯ä¸€åˆ‡å¯¹è±¡çš„æ ¹æœ¬ å“­ç¬‘ä¸å¾—è¿™æ˜¯å•¥ä¸œè¥¿1234567891011// è¯´æ˜ Function ç»§æ‰¿ Objectconsole.log(Function.prototype.__proto__ === Object.prototype) // =&gt; ture// Object ä¸ç»§æ‰¿ Functionconsole.log(Object.prototype.__proto__ === Function.prototype) // =&gt; false// Object æ˜¯ Function çš„ å®ä¾‹å¯¹è±¡console.log(Object instanceof Function); // true// Function æ˜¯ Object å®ä¾‹å¯¹è±¡console.log(Function instanceof Object); // true å¾ˆå¥‡æ€ªï¼Œ æ‰€æœ‰ä¸œè¥¿ç»§æ‰¿ ObjectObject æ˜¯é€šè¿‡ Function åˆ›å»ºå‡ºæ¥çš„Function ç»§æ‰¿ ObjectFunction æ˜¯ Object çš„å®ä¾‹ çŒœæµ‹å†…éƒ¨å®ç°123456789let Object = new Function();Object.prototype.__proto__ = null;// å°† Function å®ä¾‹å¯¹è±¡çš„ æ³¨å…¥åˆ° Object ä¸­// è¿™é‡Œè¯­æ³•ä¸å¯¹ ï¼Œ åªæ˜¯ä¸ºäº† æ¨¡æ‹ŸObject.prototype &lt;= Function.prototype;// Function ç»§æ‰¿ ObjectFunction.prototype.__proto__ = Object.prototype; è‡³äº Function.prototype ä¸ºä»€ä¹ˆæ˜¯ Function è¿™ä¸ªå¯èƒ½æœ‰ç‚¹ç‰¹æ®Šã€‚ æˆ‘æš‚æ—¶æ²¡æœ‰æ²¡æœ‰æƒ³åˆ°åˆç†çš„è§£é‡Šï¼Œåˆ«çš„æ„Ÿè§‰ï¼Œéƒ½èƒ½å®Œå…¨æŒ‰è¿™ä¸ªç†è®ºè§£é‡Šæ¸…æ¥šã€‚ å¥½äº†,ä¸‹ä¸ªæœˆè§.å·®ç‚¹è¿™ä¸ªæœˆæ²¡å†™æ–‡ç« .å•Šå“ˆ.","tags":[{"name":"åŸå‹é“¾","slug":"åŸå‹é“¾","permalink":"https://leng521.top/tags/åŸå‹é“¾/"},{"name":"js","slug":"js","permalink":"https://leng521.top/tags/js/"}]},{"title":"CocosCreatorç€è‰²å™¨çš„ç®€å•å®ç”¨","date":"2019-03-16T14:01:26.000Z","path":"/posts/e02f2181/","text":"Cocos Creator ç‰ˆæœ¬: 2.0.8 æ—¶é—´: 2019å¹´3æœˆ15æ—¥16:53:18 ç”±äºCocos çš„æè´¨ç³»ç»Ÿå¹¶ä¸æ˜¯å¤ªå®Œå–„ æ‰€ä»¥å®˜æ–¹å¹¶æ²¡æœ‰æ¨å‡ºç›¸å…³ ç€è‰²å™¨çš„æ–‡æ¡£,ä½†æ˜¯å®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªDemo, å¯ä»¥æ›´å…·è¿™ä¸ªè¿›è¡Œæ”¹é€ ä¸€ä¸‹å°±å¯ä»¥å†™è‡ªå·±çš„ç€è‰²å™¨äº†.(å®˜æ–¹ç»™å‡ºçš„ç€è‰²å™¨çš„ä¾‹å­)[https://github.com/cocos-creator/heartfelt] ç»™ Sprite å¡«å……ä¸€äº›å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899// æ”¯æŒè‡ªå®šä¹‰Shaderconst renderEngine = cc.renderer.renderEngine;const SpriteMaterial = renderEngine.SpriteMaterial;const GraySpriteMaterial = renderEngine.GraySpriteMaterial;const STATE_CUSTOM = 101;// å–è‡ªå®šä¹‰æè´¨cc.Sprite.prototype.getMaterial = function(name) &#123; if (this._materials) &#123; return this._materials[name]; &#125; else &#123; return undefined; &#125;&#125;// è®¾ç½®è‡ªå®šä¹‰æè´¨cc.Sprite.prototype.setMaterial = function(name, mat) &#123; if (!this._materials) &#123; this._materials = &#123;&#125; &#125; this._materials[name] = mat;&#125;// æ¿€æ´»æŸä¸ªæè´¨cc.Sprite.prototype.activateMaterial = function(name) &#123; var mat = this.getMaterial(name); if (mat &amp;&amp; mat !== this._currMaterial) &#123; if (mat) &#123; if (this.node) &#123; mat.color = this.node.color; &#125; if (this.spriteFrame) &#123; mat.texture = this.spriteFrame.getTexture(); &#125; this.node._renderFlag |= cc.RenderFlow.FLAG_COLOR; this._currMaterial = mat; this._currMaterial.name = name; this._state = STATE_CUSTOM; this._activateMaterial(); &#125; else &#123; console.error(\"activateMaterial - unknwon material: \", name); &#125; &#125;&#125;// å–å½“å‰çš„æè´¨cc.Sprite.prototype._activateMaterial = function() &#123; let spriteFrame = this._spriteFrame; // WebGL æš‚æ—¶æ”¯æŒWebGL if (cc.game.renderType !== cc.game.RENDER_TYPE_CANVAS) &#123; // Get material let material; if (this._state === cc.Sprite.State.GRAY) &#123; if (!this._graySpriteMaterial) &#123; this._graySpriteMaterial = new GraySpriteMaterial(); this.node._renderFlag |= cc.RenderFlow.FLAG_COLOR; &#125; material = this._graySpriteMaterial; this._currMaterial = null; &#125; else if (this._state === STATE_CUSTOM) &#123; if (!this._currMaterial) &#123; console.error(\"_activateMaterial: _currMaterial undefined!\") return; &#125; material = this._currMaterial; &#125; else &#123; if (!this._spriteMaterial) &#123; this._spriteMaterial = new SpriteMaterial(); this.node._renderFlag |= cc.RenderFlow.FLAG_COLOR; &#125; material = this._spriteMaterial; this._currMaterial = null; &#125; // Set texture if (spriteFrame &amp;&amp; spriteFrame.textureLoaded()) &#123; let texture = spriteFrame.getTexture(); if (material.texture !== texture) &#123; material.texture = texture; this._updateMaterial(material); &#125; else if (material !== this._material) &#123; this._updateMaterial(material); &#125; if (this._renderData) &#123; this._renderData.material = material; &#125; this.markForUpdateRenderData(true); this.markForRender(true); &#125; else &#123; this.disableRender(); &#125; &#125;&#125; æ„å»ºä¸€ä¸ªShader Library åœ¨è‡ªå®šä¹‰Shaderçš„æ—¶å€™ è¦åœ¨æ¸¸æˆè¿è¡Œå‰, ä¼ é€’è‡ªå®šä¹‰çš„ Shader ç»™å¼•æ“è¿›è¡Œç¼–è¯‘ 123456789101112131415161718192021/* Shader Library*/var ShaderLib = &#123; _shaders: &#123;&#125;, // å¢åŠ ä¸€ä¸ªæ–°çš„Shader addShader: function(shader) &#123; if (this._shaders[shader.name]) &#123; console.error(\"addShader - shader already exist: \", shader.name); return; &#125; cc.renderer._forward._programLib.define(shader.name, shader.vert, shader.frag, shader.defines); this._shaders[shader.name] = shader; &#125;, // å–Shaderçš„å®šä¹‰ getShader: function(name) &#123; return this._shaders[name]; &#125;&#125; æ„å»ºè‡ªå®šä¹‰æè´¨(Material) è¿™ä¸ªå’Œ Unity å·®ä¸å¤š ä¹Ÿæ˜¯ å¤šé€šé“(pass)æ¸²æŸ“ ä½†æ˜¯è¿™ä¸ªä¾‹å­é‡Œé¢åªæœ‰ å•é€šé“, æ²¡æœ‰ç”¨åˆ°å¤šé€šé“,æˆ‘è¿™é‡Œä¸¾ä¸€ä¸ªå¤šé€šé“çš„ä¾‹å­å§ æ¯”å¦‚æ¸²æŸ“ æè¾¹, åœ¨ç¬¬ä¸€ä¸ªé€šé“æ¸²æŸ“ æ¯”åŸå›¾å¤§5åƒç´ çš„å›¾ç‰‡, ç¬¬äºŒä¸ªé€šé“ æ¸²æŸ“åŸå›¾, è¿›è€Œå®ç°æè¾¹.è‡³äºè¿™ä¸ª å¤šé€šé“ æˆ‘åé¢çœ‹ä¸€ä¸‹ Creator Engine æºç å§ ,, æœ‰æ—¶é—´å†™ä¸€ä¸‹,, 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109/** * Custom Material */const renderEngine = cc.renderer.renderEngine;const renderer = renderEngine.renderer;const gfx = renderEngine.gfx;const Material = renderEngine.Material;var CustomMaterial = (function (Material$$1) &#123; function CustomMaterial(shaderName, params, defines, passList) &#123; Material$$1.call(this, false); var pass; if(!passList) &#123; // é…ç½®ä¸€ä¸ªç®€å•çš„çš„é€šé“ ä½ ä»”ç»†çœ‹åå‘ç°åé¢å…¶å® æ˜¯ä¸ª æ•°ç»„,, ä¹Ÿå°±æ˜¯è¯´å¯ä»¥é…ç½®å¤šä¸ªé€šé“. // è¿™é‡Œçš„ shaderName å°±æ˜¯ å‰é¢ ä¼ é€’ç»™å¼•æ“çš„ è‡ªå®šä¹‰ Shader çš„åå­— pass = new renderer.Pass(shaderName); pass.setDepth(false, false); pass.setCullMode(gfx.CULL_NONE); pass.setBlend( gfx.BLEND_FUNC_ADD, gfx.BLEND_SRC_ALPHA, gfx.BLEND_ONE_MINUS_SRC_ALPHA, gfx.BLEND_FUNC_ADD, gfx.BLEND_SRC_ALPHA, gfx.BLEND_ONE_MINUS_SRC_ALPHA ); &#125; var techParams = [ &#123; name: 'texture', type: renderer.PARAM_TEXTURE_2D &#125;, &#123; name: 'color', type: renderer.PARAM_COLOR4 &#125; ]; if (params) &#123; techParams = techParams.concat(params); &#125; var mainTech = new renderer.Technique( ['transparent'], techParams, passList ? passList : [pass], ); this.name = shaderName; this._color = &#123; r: 1, g: 1, b: 1, a: 1 &#125;; this._effect = new renderer.Effect( [ mainTech ], &#123;&#125;, defines, ); this._mainTech = mainTech; this._texture = null; &#125; if (Material$$1) CustomMaterial.__proto__ = Material$$1; CustomMaterial.prototype = Object.create(Material$$1 &amp;&amp; Material$$1.prototype); CustomMaterial.prototype.constructor = CustomMaterial; var prototypeAccessors = &#123; effect: &#123; configurable: true &#125;, texture: &#123; configurable: true &#125;, color: &#123; configurable: true &#125; &#125;; prototypeAccessors.effect.get = function () &#123; return this._effect; &#125;; prototypeAccessors.texture.get = function () &#123; return this._texture; &#125;; prototypeAccessors.texture.set = function (val) &#123; if (this._texture !== val) &#123; this._texture = val; this._effect.setProperty('texture', val.getImpl()); this._texIds['texture'] = val.getId(); &#125; &#125;; prototypeAccessors.color.get = function () &#123; return this._color; &#125;; prototypeAccessors.color.set = function (val) &#123; var color = this._color; color.r = val.r / 255; color.g = val.g / 255; color.b = val.b / 255; color.a = val.a / 255; this._effect.setProperty('color', color); &#125;; CustomMaterial.prototype.clone = function clone() &#123; var copy = new CustomMaterial(); copy.texture = this.texture; copy.color = this.color; copy.updateHash(); return copy; &#125;; // è®¾ç½®è‡ªå®šä¹‰å‚æ•°çš„å€¼ CustomMaterial.prototype.setParamValue = function (name, value) &#123; this._effect.setProperty(name, value); &#125;; // è®¾ç½®å®šä¹‰å€¼ CustomMaterial.prototype.setDefine = function (name, value) &#123; this._effect.define(name, value); &#125;; Object.defineProperties(CustomMaterial.prototype, prototypeAccessors); return CustomMaterial;&#125;(Material)); å¼€å§‹æµ‹è¯•åˆšæ‰å†™çš„ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071// å…ˆ Creator çš„ å†™æ³•å¤ªé•¿ è¿›è¡Œç®€å•çš„å°è£…const renderer = cc.renderer.renderEngine.renderer;const PARAMTYPE = &#123; i: renderer.PARAM_INT, i2: renderer.PARAM_INT2, i3: renderer.PARAM_INT3, i4: renderer.PARAM_INT4, f : renderer.PARAM_FLOAT, f2 : renderer.PARAM_FLOAT2, f3 : renderer.PARAM_FLOAT3, f4 : renderer.PARAM_FLOAT4, mat2: renderer.PARAM_MAT2, mat3: renderer.PARAM_MAT3, mat4: renderer.PARAM_MAT4, tex2d: renderer.PARAM_TEXTURE_2D, texCube: renderer.PARAM_TEXTURE_CUBE,&#125;cc.Class(&#123; properties: &#123; &#125;, onLoad() &#123; // åˆå§‹åŒ– ç»™ Sprite è¡¥å……çš„å‡½æ•° require(\"SpriteHook\").init(); // åˆå§‹åŒ– è‡ªå®šä¹‰ çš„ Shader // è¿™ä¸ª Flash æ–‡ä»¶ åé¢åŒæ„ç»™å‡º // å› ä¸ºæˆ‘è¿˜å†™äº†å‡ ä¸ªç®€å•çš„ Shader ShaderLib.addShader(require(\"Flash\")); // åˆå§‹åŒ– ä¸ºäº†å®ç°è¿™æ•ˆæœéœ€è¦çš„å˜é‡ this._time = 0; this._sin = 0; this.sp = this.node.getComponent(cc.Sprite); this.flashShader(); &#125;, /* ç»™ç²¾çµè®¾ç½® æè´¨ */ flashShader() &#123; let name = 'Flash'; let material = this.sp.getMaterial(name); if(!material) &#123; var CustomMaterial = require(\"CustomMaterial\"); material = new CustomMaterial(name,[ &#123;name: 'run_time', type: PARAMTYPE.f&#125; ]); this.sp.setMaterial(name, material); &#125; this.sp.activateMaterial(name); &#125;, update(dt) &#123; this._time += dt; this._sin = Math.sin(this._time); if(this._sin &gt; 0.99) &#123; this._sin = 0; this._time = 0; &#125; const material = this.sp.getCurrMaterial('Flash'); if(!material) &#123; return; &#125; material.setParamValue('run_time', this._sin); &#125;&#125;); è‡ªå®šä¹‰ ç€è‰²å™¨çš„ä»£ç Flash (æ‰«å…‰)12345678910111213141516// è¦åˆå§‹åŒ–çš„å˜é‡this._time = 0;this._sin = 0;// è¦ä¸åœæ›´æ–°çš„å˜é‡(å°±æ˜¯è¦æ”¾åœ¨updateå‡½æ•°é‡Œé¢çš„å˜é‡)this._time += dt;this._sin = Math.sin(this._time);if(this._sin &gt; 0.99) &#123; this._sin = 0; this._time = 0;&#125;const material = this.sp.getCurrMaterial('Flash');if(!material) &#123; return;&#125;material.setParamValue('run_time', this._sin); 12345678910111213141516171819202122232425262728293031323334353637383940var shader = &#123; name: \"Flash\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 v_uv0; void main() &#123; vec4 pos = viewProj * vec4(a_position, 1.); gl_Position = pos; v_uv0 = a_uv0; &#125; `, frag: `uniform sampler2D texture; /*uniform vec4 color;*/ uniform float run_time; varying vec2 v_uv0; void main() &#123; vec4 origin_color = texture2D(texture, v_uv0); float width = 0.05; float start = run_time * 1.2; float strength = 0.01; float offset = 0.2; vec4 out_color = origin_color; if(v_uv0.x &lt; (start - offset * v_uv0.y) &amp;&amp; v_uv0.x &gt; (start - offset * v_uv0.y - width)) &#123; vec3 blendColor = strength * vec3(255,255,255); out_color = vec4((blendColor * vec3(origin_color.rgb)),out_color.a); &#125; gl_FragColor = out_color; &#125; `&#125; Mosaic(æ–¹å½¢é©¬èµ›å…‹)1è¿™ä¸ªæ²¡æœ‰è¦å˜é‡çš„ å°±æ˜¯æ ¹æ® å‘¨å›´åƒç´ åŒºä¸­è¿›è¡Œæ¨¡ç³Š 12345678910111213141516171819202122232425262728293031var shader = &#123; name: \"Mosaic\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 uv0; void main () &#123; vec4 pos = viewProj * vec4(a_position, 1); gl_Position = pos; uv0 = a_uv0; &#125; `, frag: `uniform sampler2D texture; uniform vec3 imageSize; uniform float mosaicSize; varying vec2 uv0; void main(void) &#123; vec4 color; vec2 xy = vec2(uv0.x * imageSize.x, uv0.y * imageSize.y); vec2 xyMosaic = vec2(floor(xy.x / mosaicSize) * mosaicSize, floor(xy.y / mosaicSize) * mosaicSize); vec2 uvMosaic = vec2(xyMosaic.x / imageSize.x, xyMosaic.y / imageSize.y); color = texture2D( texture, uvMosaic); gl_FragColor = color; &#125;`,&#125; Move(UVåŠ¨ç”»)123456789101112// è¦åˆå§‹åŒ–çš„å˜é‡this._time = 0;// è¦æ›´æ–°çš„å˜é‡this._time += dt;this._moveTime = this._time;this._moveTime %= 3.35;const material = this.sp.getCurrMaterial('Move');if(!material) &#123; return;&#125;material.setParamValue('run_time', this._moveTime); 123456789101112131415161718192021222324252627var shader = &#123; name: \"Move\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 uv0; void main () &#123; vec4 pos = viewProj * vec4(a_position, 1); gl_Position = pos; uv0 = a_uv0; &#125; `, frag: `uniform sampler2D texture; uniform float run_time; varying vec2 uv0; void main() &#123; float x = uv0.x + run_time * 0.3; vec2 uv_o = vec2(x - floor(x),uv0.y); gl_FragColor = texture2D(texture, uv_o); &#125;`,&#125; Vortex(é£æš´)123456789101112131415161718192021// è¦åˆå§‹åŒ–çš„å˜é‡this._angle = 0;this._radius = 0.1;this._time = 0;// è¦ä¸åœæ›´æ–°çš„å˜é‡(å°±æ˜¯è¦æ”¾åœ¨updateå‡½æ•°é‡Œé¢çš„å˜é‡)this._time += dt;this._angle += 0.03;this._radius += 0.003;if(this._angle &gt;= 5) &#123; this._angle = 0; this._radius = 0.1; &#125;const material = this.sp.getCurrMaterial('Vortex');if(!material) &#123; return;&#125;material.setParamValue('_Radius',this._radius);material.setParamValue('_Angle',this._angle); 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455var shader = &#123; name: \"Vortex\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 uv0; void main () &#123; vec4 pos = viewProj * vec4(a_position, 1); gl_Position = pos; uv0 = a_uv0; &#125; `, frag: ` uniform sampler2D texture; uniform float _Radius; uniform float _Angle; varying vec2 uv0; vec2 swirl(vec2 uv) &#123; //å…ˆå‡å»è´´å›¾ä¸­å¿ƒç‚¹çš„çº¹ç†åæ ‡,è¿™æ ·æ˜¯æ–¹ä¾¿æ—‹è½¬è®¡ç®— uv -= vec2(0.5, 0.5); //è®¡ç®—å½“å‰åæ ‡ä¸ä¸­å¿ƒç‚¹çš„è·ç¦»ã€‚ float dist = length(uv); //è®¡ç®—å‡ºæ—‹è½¬çš„ç™¾åˆ†æ¯” float percent = (_Radius - dist) / _Radius; if (percent &lt; 1.0 &amp;&amp; percent &gt;= 0.0) &#123; //é€šè¿‡sin,cosæ¥è®¡ç®—å‡ºæ—‹è½¬åçš„ä½ç½®ã€‚ float theta = percent * percent * _Angle * 8.0; float s = sin(theta); float c = cos(theta); //uv = vec2(dot(uv, vec2(c, -s)), dot(uv, vec2(s, c))); uv = vec2(uv.x*c - uv.y*s, uv.x*s + uv.y*c); &#125; //å†åŠ ä¸Šè´´å›¾ä¸­å¿ƒç‚¹çš„çº¹ç†åæ ‡ï¼Œè¿™æ ·æ‰æ­£ç¡®ã€‚ uv += vec2(0.5, 0.5); return uv; &#125; void main() &#123; vec2 uv_new = swirl(uv0); gl_FragColor = texture2D(texture, uv_new); &#125; `,&#125; Water(æ°´)12345678910// è¦åˆå§‹åŒ–çš„å˜é‡this._time = 0;// è¦æ›´æ–°çš„å˜é‡this._time += dt;const material = this.sp.getCurrMaterial(&apos;Water&apos;);if(!material) &#123; return;&#125;material.setParamValue(&apos;run_time&apos;, this._time); 1234567891011121314151617181920212223242526272829303132333435363738394041var shader = &#123; name: \"Water\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 uv0; void main () &#123; vec4 pos = viewProj * vec4(a_position, 1); gl_Position = pos; uv0 = a_uv0; &#125; `, frag: `uniform sampler2D texture; uniform vec3 imageSize; uniform float run_time; varying vec2 uv0; #define F cos(x-y)*cos(y),sin(x+y)*sin(y) vec2 s(vec2 p) &#123; float d=run_time*0.2,x=8.*(p.x+d),y=8.*(p.y+d); return vec2(F); &#125; void mainImage( out vec4 fragColor, in vec2 fragCoord ) &#123; vec2 rs = imageSize.xy; vec2 uv = fragCoord; vec2 q = uv+2./imageSize.x*(s(uv)-s(uv+rs)); // q.y=1.-q.y; fragColor = texture2D(texture, q); &#125; void main() &#123; mainImage(gl_FragColor, uv0.xy); &#125;`,&#125; Wave(æ³¢æµª)12345678910// è¦åˆå§‹åŒ–çš„å˜é‡this._time = 0;// è¦æ›´æ–°çš„å˜é‡this._time += dt;const material = this.sp.getCurrMaterial('Wave');if(!material) &#123; return;&#125;material.setParamValue('run_time', this._time); 1234567891011121314151617181920212223242526272829303132333435363738var shader = &#123; name: \"Wave\", defines: [], vert: `uniform mat4 viewProj; attribute vec3 a_position; attribute vec2 a_uv0; varying vec2 v_uv0; void main() &#123; vec4 pos = viewProj * vec4(a_position, 1.); gl_Position = pos; v_uv0 = a_uv0; &#125; `, frag: `uniform sampler2D texture; /*uniform vec4 color;*/ uniform float run_time; uniform vec2 offsetXY; uniform float speed; varying vec2 v_uv0; void main() &#123; vec4 out_color; vec2 xy = v_uv0; xy.x += (sin(xy.x * 30. + run_time * speed) / 30. * offsetXY.x); xy.y += (sin(xy.y * 30. + run_time * speed) / 30. * offsetXY.y); gl_FragColor = texture2D(texture, xy); &#125; `&#125; è¿˜æœ‰ä¸€ä¸ªç®€å•çš„ç½®ç°æ•ˆæœæ²¡æœ‰å†™ï¼Œè¿™ä¸ªå› ä¸ºCreator Engine è‡ªå¸¦ï¼Œæ‰€ä»¥å°±æ²¡æœ‰å†™ã€‚å¯ä»¥çœ‹ä¸€ä¸‹Sprite è¿™ä¸ªç»„ä»¶çš„APIå®˜æ–¹åº”è¯¥ä»‹ç»çš„æœ‰ï¼Œ ç½®ç°å…¶å® rgbÃ—0.3 å°±å·®ä¸å¤šäº†ã€‚ å°†æ‰€æœ‰çš„ é€»è¾‘æ•´åˆåˆ°ä¸€ä¸ªè„šæœ¬é‡Œé¢ ShaderComponentShaderComponent.txt ç”±äºåç¼€åå­—ä¸º js ä¼šå¯¼è‡´åšå®¢æ¸²æŸ“å‡ºé”™, æ‰€ä»¥æ”¹ä¸º txt ä½ ä»¬è‡ªè¡Œæ”¹ä¹‹å°±è¡Œ.è¿™é‡Œé¢ä¼šå» require é‚£å‡ ä¸ªç€è‰²å™¨ ä½ ä»¬è‡ªå·±å°†ä¸Šé¢è‡ªå®šä¹‰çš„ç€è‰²å™¨ä»£ç  åˆ›å»ºå‡ºæ¥. è¿™ä¹ˆåšä¼šå¸¦æ¥çš„ä¸€äº›é—®é¢˜1.ç²¾çµè¿è¡Œæ¸å˜çš„Action å°±ä¼šæ²¡æœ‰æ•ˆæœ å› ä¸ºè¿™é‡Œåªæ˜¯é‡‡æ ·çº¹ç†çš„é¢œè‰²å¹¶åšå‡ºä¸€å®šçš„å˜æ¢å¹¶æ²¡æœ‰èåˆèŠ‚ç‚¹æœ¬èº«çš„é¢œè‰²å€¼ï¼Œå¦‚æœæƒ³åšé€æ˜å˜æ¢ï¼Œä½ å¯ä»¥ç»™ç€è‰²å™¨ä¼ é€’å€¼2.åœ¨æ‰‹æœºä¸Šå¯èƒ½ä¼šå› ä¸ºç²¾åº¦é—®é¢˜å¯¼è‡´ï¼Œæ¸²æŸ“æœ‰é—®é¢˜ï¼Œ ä½ å¯ä»¥é‡‡å–é«˜ç²¾åº¦çš„ç±»å‹ å¦‚ï¼š #ifdef GL_ES highp float xx; #enif è¿˜ ä¸­ç­‰ç²¾åº¦ mediump lowp å¦‚æœæœ‰å…¶ä»–é—®é¢˜æˆ–åˆ™æ˜¯æ„è§å¯ä»¥åŠ æˆ‘QQè®¨è®ºã€‚","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"ä¼˜åŒ–","slug":"ä¼˜åŒ–","permalink":"https://leng521.top/tags/ä¼˜åŒ–/"}]},{"title":"CocosCreatorä¸€äº›ç®€å•çš„ä¼˜åŒ–è®°å½•","date":"2019-02-19T12:23:34.000Z","path":"/posts/7f7eba5/","text":"cocos creator ä¸€äº›ç®€å•çš„ä¼˜åŒ–è®°å½•ç›®æ ‡: å¾®ä¿¡å°æ¸¸æˆå¼•æ“ç‰ˆæœ¬: 2.0.8è¯­è¨€: jsæ—¶é—´: 2019å¹´2æœˆ19æ—¥15:50:29 å¤§çº²: - ç¼©å°åŒ…ä½“ - ä¼˜åŒ– drawcall - å¢åŠ æ¸¸æˆç¼–è¯‘ååŒ…ä½“çš„å®‰å…¨æ€§(é˜²æ­¢åç¼–è¯‘) - ä¼˜åŒ–æ¸¸æˆçš„è®¡ç®—é‡ å¾®ä¿¡å°æ¸¸æˆå¯¹åŒ…ä½“çš„å¤§å°æ§åˆ¶çš„å¾ˆä¸¥æ ¼åªæœ‰4Måé¢åˆæå‡ºäº†åˆ†åŒ…åŠ è½½çš„æœºåˆ¶,ä½†æ˜¯èƒ½è‡ªå·±ä¼˜åŒ–ä¸€äº›è¿˜æ˜¯æ›´å¥½çš„ä¸€äº›åšæ³•. ç¼©å°åŒ…ä½“å‹ç¼©çº¹ç†è¿™é‡Œæä¾›çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯å‹ç¼©çº¹ç†,è¿™ä¸ªæ˜¯æ¯”è¾ƒçš„ç›´æ¥æœ‰æ•ˆæœ. 1.å‹ç¼©çº¹ç†ä½¿ç”¨ TinyPng, pngquant, ç­‰ç­‰å‹ç¼©çº¹ç†çš„å·¥å…·. è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨è„šæœ¬è¿›è¡Œå‹ç¼©çš„å·¥å…·,æœ€è¿‘åœ¨çœ‹äº†ä¸€ä¸‹ gulp,å‘ç°æœ‰ä¸ªpngå‹ç¼©çš„æ’ä»¶,äºæ˜¯å°±å†™äº†ä¸€ä¸ªæ‰¹é‡ç”¨è„šæœ¬å‹ç¼©çš„å·¥å…·å§,å¾ˆç®€é™‹ç”¨æ³•ä¹Ÿå¾ˆç®€å•.å¦‚æœä½ æƒ³çœ‹æ‡‚çš„å…·ä½“çš„ç»†èŠ‚çš„è¯,éœ€è¦å»é˜…è¯»ä»¥ä¸‹gulpçš„åŸºæœ¬çŸ¥è¯†ç‚¹å§. å…¶å® gulp è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒçš„ç®€å•æ˜“ç”¨çš„.è¿™äº›ä¾èµ–çš„åŒ…ä½ å°±è‡ªå·±å®‰è£…,å¦‚æœä¸ä¼šçš„è¯,ä½ å¯ä»¥å»é˜…è¯»nodejsçš„npm (å¯¹åŒ…ç®¡ç†çš„ä¸€ä¸ªå·¥å…·) ç›¸å…³çŸ¥è¯†ç‚¹å§. æ’ä»¶åœ°å€ 123456789101112// é…ç½®projectPath =&gt; &#123;ä½ çš„å·¥ç¨‹æ ¹è·¯å¾„/build&#125;var projectPath = \"\";var gulp = require('gulp');var tinypng_nokey = require('gulp-tinypng-nokey');gulp.task('default', function (cb) &#123; gulp.src([projectPath + \"/res/raw-assets/**/*.&#123;png,jpg,jpeg&#125;\"]) .pipe(tinypng_nokey()) .pipe(gulp.dest(projectPath + \"/res/dest/\")) .on(\"end\", cb);&#125;); æ³¨æ„ï¼š å¦‚æœæ‰§è¡Œgulpå‘½ä»¤æ—¶æç¤ºâ€ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶â€ï¼Œåˆ™éœ€è¦æ‰§è¡Œnpm i -g gulpå‘½ä»¤é‡æ–°å®‰è£…ï¼Œå®Œæˆåå†æ‰§è¡Œgulpå‘½ä»¤ã€‚ æˆåŠŸå®‰è£…è¿‡ä¸€æ¬¡ä¹‹åï¼Œä¸‹ä¸€ä¸ªé¡¹ç›®åœ¨æ“ä½œæ—¶ä¸ç”¨å†æ¬¡å®‰è£…ã€‚ è¿›å…¥å‘½ä»¤è¡Œ1gulp è¿™ä¸ªæ“ä½œæ‰§è¡Œå®Œä¼šåœ¨ {projectPath/res/dest} å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è¾“å‡ºåˆ°æœ¬ç›®å½•,å®ƒä¼šç›´æ¥è¿›è¡Œæ›¿æ¢çš„.(æˆ–è€…æ›´æ”¹æˆä½ æƒ³è¦çš„ç›®å½•)å¤§æ¦‚çº¹ç†ä¼šå‡å° 30% ~ 40%. 2.è¿™é‡Œä½ å¯ä»¥ä½¿ç”¨TexturePackerè¿™äº›ç¬¬ä¸‰æ–¹çš„è¾…åŠ©å·¥å…·è¿›è¡Œçº¹ç†å‹ç¼©,ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨CocosCreatorå†…ç½®çš„auto atlas(è‡ªåŠ¨å›¾é›†)çš„å·¥å…·è¿›è¡Œåˆå›¾. åšç¬¬äºŒæ­¥çš„ç›®çš„æ˜¯: å¯ä»¥å‡å°‘æ€»ä½“çš„é€æ˜åƒç´ ,ä¹Ÿä¼šæœ‰ä¸€å®šçš„ä½“ç§¯å‡å°‘ èƒ½å¤Ÿå’Œæ‰¹ä¼˜åŒ–æ¸¸æˆçš„æ€§èƒ½ 3.å¦‚æœåšåŸç”Ÿçš„æ¸¸æˆçš„è¯ä½ å¯ä»¥ä½¿ç”¨ *.webp è¿™ç§åç¼€çš„å›¾ç‰‡æ˜¯ png çš„ç‰©ç†ä½“ç§¯çš„ 1/10 å€. ä½ å¯ç›´æ¥åœ¨ç™¾åº¦æœç´¢ png è½¬ webp åº”è¯¥æœ‰ç›¸å…³çš„è„šæœ¬æ–‡ä»¶, ä¾èµ–ä¹‹é—´çš„å·¥ä½œç»éªŒçš„è¯, ä½ å¯ä»¥å†™ python å»åšè¿™ä»¶äº‹æƒ…, å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„è¯­è¨€. æ³¨æ„ è¿™ç§åšæ³•åªæ˜¯ç‰©ç†ä½“ç§¯çš„å‡å°,å¦‚æœæ˜¯ä½ åˆèµ„æºæ˜¯éœ€è¦åœ¨è¿œç«¯ä¸‹è½½çš„æœ¬åœ°çš„éœ€æ±‚é‚£è¿™å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©,ä½†æ˜¯ä»–å¹¶ä¸èƒ½ä¼˜åŒ–çš„è¿è¡Œæ—¶æ‰€å ç”¨çš„å†…å­˜.æ„æ€å°±æ˜¯è¯´ä½  png å ç”¨çš„å†…å­˜åœ¨ webp è¿™ç§æ ¼å¼ ä»–åŒæ ·å ç”¨è¿™ä¹ˆå¤š. ç”±äºå¾®ä¿¡ä¸å…è®¸è¿™ç§çº¹ç†åç¼€åå­—,æ‰€ä»¥è¿™ç§åšæ³•ä¸é€‚ç”¨äºå¾®ä¿¡å°æ¸¸æˆ. png å¦‚æœå‹ç¼©è¿‡å›¾ç‰‡æ˜¯ä¸èƒ½è¿›è¡Œ png åˆ° webp çš„è½¬æ¢çš„ ä¼šå‡ºé”™, è§£å†³æ–¹æ¡ˆæ˜¯è®©ä½ ä»¬çš„ç¾æœ¯äººå‘˜å°†è¿™å¼ å›¾ç‰‡å¯¼å…¥ ps ä»¥ä¸å‹ç¼©çš„æ–¹å¼ä»æ–°å¯¼å‡º. è¿™é‡Œé¢è´´å‡ºä»£ç , æ„Ÿå…´è¶£çš„ä½ ä¹Ÿå¯ä»¥è‡ªå·±å»å®ç°ä¸€ä¸‹. ç§»é™¤ä¸éœ€è¦çš„æ¨¡å—åœ¨æ‰“åŒ…å‰ï¼Œæ‰¾åˆ°é¡¹ç›®è®¾ç½®â€“&gt;æ¨¡å—è®¾ç½®ï¼Œå°†é¡¹ç›®ä¸­æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—ç§»é™¤ï¼ˆå–æ¶ˆå‹¾é€‰çŠ¶æ€ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ³¨æ„ è¿™ä¸ªä¹Ÿè®¸ä¸èƒ½ä¼˜åŒ–æ¸¸æˆçš„è¿è¡Œé€Ÿåº¦ä½†æ˜¯èƒ½æœ‰æ•ˆçš„å‡å°‘ä½ çš„åŒ…ä½“å¤§å°. å°¤å…¶æ˜¯ä½ æ¸¸æˆä¸­æœ‰å¥½å‹æ’è¡Œæ¦œ,è¿™ä¸ªä¼šå«æœ‰ä¸¤ä¸ª Creator çš„å¼•æ“åº“æ–‡ä»¶æ˜¯æå…¶å ç”¨åŒ…ä½“èµ„æºçš„. ä¼˜åŒ– drawcall æ¸¸æˆä¸­ drawcall æ˜¯æ¸¸æˆæ€§èƒ½æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡, drawcall è¶Šä½,è¯æ˜ cpu ç»™ gpu ä¼ é€’æ¬¡æ•°è¶Šå°‘, æ¯æ¬¡ cpu é€šçŸ¥ gpu æ˜¯éœ€è¦æ€§èƒ½å¼€é”€çš„å¦‚æœèƒ½ä¸€æ¬¡ä¼ é€’è¿‡å»,å°±èƒ½ä¼˜åŒ–æ¸¸æˆçš„è¿è¡Œæ•ˆç‡çš„. è‡ªåŠ¨åˆå›¾ å°½é‡è®©ä½ ç›¸åŒçš„ç²¾çµå¸§æ˜¯æŒ¨åœ¨ä¸€èµ·çš„. ç±»ä¼¼ä¸‹é¢è¿™æ ·:123456789101112131415161718A A A B è¿™æ ·å°±ä¼šåªæœ‰2ä¸ª`drawcall`A B A A è¿™æ ·çš„è®¾è®¡æ—¶å¾ˆç³Ÿç³•çš„. =&gt; 3 ä¸ª drawcall- Node - A- Node - A// è¿™ç§æ’åˆ—ä¸å½±å“ å’Œæ‰¹ 1 ä¸ª drawcall- Node - A - B- Node - A - B// è¿™ç§çš„æ’åˆ—å¸ƒå±€ ä¸èƒ½å’Œæ‰¹ 4 ä¸ª drawcallç›¸åŒçš„é¢„åˆ¶ä»¶ä¸èƒ½ å’Œæ‰¹ æ³¨æ„ è¿™ä¸ªåªé’ˆå¯¹äºcocos creator çš„æ¸²æŸ“æœºåˆ¶, ä¸åŒçš„å¼•æ“ä»–çš„å’Œæ‰¹ç­–ç•¥å¯èƒ½ä¸ç›¸åŒ. å°†ç¢å›¾è¿›è¡Œåˆå›¾è¿™é‡Œé¢æœ‰å°†å¤šä¸ªç¢å›¾åˆæˆä¸€ä¸ªå¤§å›¾, è¿™æ ·ä¹Ÿå¯ä»¥å®ç° å’Œæ‰¹ å¤„ç†, è¿™é‡Œæœ‰ä¸¤ç§å®ç°åˆå›¾: TexturePacker auto atlas è¿™ä¸ªæ˜¯Cocos Creatorå†…ç½®çš„åˆå›¾å·¥å…·. ä¸‹é¢è¯´ä¸€ä¸‹è¿™ä¸¤ç§å·¥å…·åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­çš„ä¼˜ç¼ºç‚¹. 1.TexturePacker çš„ drawcallçš„ä¼˜åŒ–åœ¨æµè§ˆå™¨ä¸­å¯ä»¥ç›´æ¥çœ‹åˆ°, åè€…éœ€è¦æ‰“åŒ…åæ‰èƒ½çœ‹åˆ°.2.åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¦‚æœçº¹ç†æ›´æ¢çš„é¢‘ç¹,å‰è€…éœ€è¦ä¸åœçš„æ‰“åŒ…,å¼€å‘æ•ˆç‡ä½ä¸‹,åè€…åˆ™ä¸ç”¨ç®¡(å› ä¸ºæ˜¯åœ¨æ‰“åŒ…åæ‰èƒ½çœ‹çš„è§åˆå›¾çš„å›¾é›†). fntçš„å›¾ç‰‡ å’Œ æ¸¸æˆèµ„æºè¿›è¡Œåˆå›¾å®˜æ–¹æè¿° å°†éœ€è¦è‡ªåŠ¨åˆå›¾çš„å›¾ç‰‡æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œå¹¶åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨å›¾é›†é…ç½®ï¼ˆAutoAtlasï¼‰ å¯ä»¥å‹¾é€‰ä¸åŒ…å«æœªå¼•ç”¨çš„èµ„æº è¦ç®¡ç†å¥½è‡ªå·±çš„èµ„æºç›®å½•é¿å…ä¸€äº›æ²¡ç”¨çš„èµ„æºä¹Ÿæ‰“åŒ…åˆ°ä¸€ä¸ªå›¾é›†é‡Œé¢. æ³¨æ„ ç³»ç»Ÿå­—ä½“ä¼šæ‰“æ–­å’Œæ‰¹ åšå€’è®¡æ—¶å°½é‡é¿å…ä½¿ç”¨ç³»ç»Ÿå­—ä½“,æ•ˆç‡æ²¡æœ‰ fnt çš„æç¬‘, å› ä¸ºä¸€ä¸ªç³»ç»Ÿå­—ä½“æ˜¯åŒ…å«ä¸­æ–‡å’Œè‹±æ–‡çš„, åœ¨æ²¡æœ‰å¿…è¦çš„æƒ…å†µä¸‹, å°½é‡å°±ä¸è¦ä½¿ç”¨. åšå’Œæ‰¹æµ‹è¯•çš„æ—¶å€™å°½é‡ä½¿ç”¨ Google Chrome æµè§ˆå™¨,å…¶ä»–æµè§ˆå™¨åœ¨å’Œæ‰¹æ•ˆæœä¸Šå¥½åƒæ²¡æœ‰æ•ˆæœ.ä½†æ˜¯å°æ¸¸æˆå…¶å®ç®—æ˜¯å±äºä¸€ä¸ªåŸç”Ÿçš„æ¸¸æˆ,æ‰€ä»¥è¿™äº›éƒ½ä¼šå¾®ä¿¡å°æ¸¸æˆè¿˜æ˜¯ç”Ÿæ•ˆçš„. åŠ¨æ€åˆå›¾å®˜æ–¹æè¿° è¿™ä¸ªç‰¹æ€§æ˜¯ Cocos Creator 2.x æ›´æ¢æ¸²æŸ“å±‚æä¾›çš„æœºåˆ¶.æ›´å¤§çš„æé«˜æ¸¸æˆæ€§èƒ½ä¸€ç§æœºåˆ¶. åŠ¨æ€åˆå›¾åŠŸèƒ½ä½¿ç”¨æ›´ç®€å•ï¼Œåªéœ€è¦åœ¨ä»£ç ä¸­å¼€å¯åŠ¨æ€åˆå›¾åŠŸèƒ½å³å¯ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹ç›¸å…³å±æ€§ã€‚1234cc.dynamicAtlasManager.enabled = true; // å¼€å¯åŠ¨æ€åˆå›¾//cc.dynamicAtlasManager.maxAtlasCount = 5; // æœ€å¤§åˆå›¾æ•°é‡//cc.dynamicAtlasManager.textureSize = 1024; // åˆ›å»ºçš„å›¾é›†çš„å®½é«˜//cc.dynamicAtlasManager.maxFrameSize = 512; // å¯ä»¥æ·»åŠ è¿›å›¾é›†çš„å›¾ç‰‡çš„æœ€å¤§å°ºå¯¸ æ³¨æ„ åŠ¨æ€åˆå›¾æ—¶ï¼Œç›®å‰å‘ç°é™¤äº†Chromeæµè§ˆå™¨ä¸ŠDrawCallæ¬¡æ•°æ­£å¸¸ä»¥å¤–ï¼Œå…¶ä»–æµè§ˆå™¨çš„DrawCallæ¬¡æ•°å¹¶éé¢„æœŸç»“æœã€‚ å¢åŠ æ¸¸æˆç¼–è¯‘ååŒ…ä½“çš„å®‰å…¨æ€§(é˜²æ­¢åç¼–è¯‘)ç”±äºjsåŠ¨æ€è¿è¡Œæ—¶è¯­è¨€,æ‰€ä»¥ä½ å¼€å‘çš„é¡¹ç›®å¯èƒ½å¾ˆå®¹æ˜“è¢«åˆ«äººç»™åç¼–è¯‘,çªƒå–äº†ä½ çš„åŠ³åŠ¨æˆæœ. è¿™é‡Œåªæ˜¯æœ‰æ•ˆçš„è®©ä»£ç è¿›è¡Œæ··åˆ,å¹¶ä¸èƒ½ä¿è¯ä¸€å®šä¸èƒ½è¢«åç¼–è¯‘. è¿™é‡Œè¿˜æ˜¯ç”¨ gulp æä¾›çš„æ’ä»¶ gulp-javascript-obfuscatoræ’ä»¶çš„ä»‹ç»åœ°å€æ’ä»¶githubåœ°å€ é‡Œé¢çš„option(è®¾ç½®)å¾ˆå¤š 1234567891011121314151617181920212223242526272829compact: true,controlFlowFlattening: false,controlFlowFlatteningThreshold: 0.75,deadCodeInjection: false,deadCodeInjectionThreshold: 0.4,debugProtection: false,debugProtectionInterval: false,disableConsoleOutput: false,domainLock: [],identifierNamesGenerator: &apos;hexadecimal&apos;,identifiersPrefix: &apos;&apos;,inputFileName: &apos;&apos;,log: false,renameGlobals: false,reservedNames: [],reservedStrings: [],rotateStringArray: true,seed: 0,selfDefending: false,sourceMap: false,sourceMapBaseUrl: &apos;&apos;,sourceMapFileName: &apos;&apos;,sourceMapMode: &apos;separate&apos;,stringArray: true,stringArrayEncoding: false,stringArrayThreshold: 0.75,target: &apos;browser&apos;,transformObjectKeys: false,unicodeEscapeSequence: false 123456789101112131415var projectPath = \"\";var javascriptObfuscator = require(\"gulp-javascript-obfuscator\")gulp.task(\"js\", function (cb) &#123; gulp.src([projectPath + \"/src/project.js\"]) .pipe(javascriptObfuscator(&#123; // compact: true, //ç±»å‹ï¼šbooleané»˜è®¤ï¼štrue mangle: true, //çŸ­æ ‡è¯†ç¬¦çš„åç§°ï¼Œå¦‚aï¼Œbï¼Œc stringArray: true, target: \"browser\", &#125;)) .pipe(gulp.dest(projectPath + \"/js-dst\") .on(\"end\", cb));&#125;); æ³¨æ„ å¯èƒ½ä¼šä½¿åŒ…ä½“å¢å¤§ä¸€ç‚¹ç‚¹,è¿™ä¸ªä½ å¯ä»¥åœ¨å‡ å»åšæƒè¡¡. ä¼˜åŒ–æ¸¸æˆçš„è®¡ç®—é‡ å‡å°‘å¯¹ç²’å­çš„ä½¿ç”¨,æˆ–è€…æ˜¯å‡å°‘æ€»å…±çš„ç²’å­æ•°. æ¸¸æˆçš„æ•°æ®é…ç½®,å°½é‡ä½¿ç”¨æ•°æ®ç®€æ´,ç´§å‡‘çš„æ•°æ®æ ¼å¼(json),è¯»å–é€Ÿåº¦å¿«. å°½é‡å‡å°‘æ··åˆ,æ··åˆæ˜¯é€åƒç´ è¿›è¡Œè®¡ç®—çš„,è®¡ç®—é‡è¾ƒå¤§. å‡å°‘ å¯Œæ–‡æœ¬ å’Œ mask å ç”¨ drawcall çš„æ•°é‡æ¯”è¾ƒå¤š. å°½é‡å°‘ä½¿ç”¨ ç³»ç»Ÿå­—ä½“(ttf) ä¸èƒ½å’Œæ‰¹, æ•ˆç‡æ²¡æœ‰ æ¸¸æˆé¡¹ç›®é‡Œé¢çš„ fnt æ•ˆç‡é«˜. å›¾ç‰‡ä¸ç¬¦åˆå°ºå¯¸å°½é‡ç„¶ç¾æœ¯è¿›è¡Œè°ƒæ•´,ä¸ç„¶è™½ç„¶æ•ˆæœä¸€è‡´çš„,ä½†æ˜¯è¿è¡Œæ—¶å ç”¨çš„å†…å­˜æ˜¯ä¸ä¸€æ ·çš„.æ¸¸æˆæ˜¯(ç‰©ç†ç¼©æ”¾), ps(æœ¬è´¨çš„ç¼©æ”¾).","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"ä¼˜åŒ–","slug":"ä¼˜åŒ–","permalink":"https://leng521.top/tags/ä¼˜åŒ–/"}]},{"title":"gitæ“ä½œå‘½ä»¤è®°å½•(äºŒ)","date":"2019-01-23T13:01:07.000Z","path":"/posts/b0c8e6a5/","text":"æ—¶é—´: 2019å¹´1æœˆ23æ—¥18:51:03 åé¢çš„æ ¼å¼æ˜¯,åœ¨æ¯ç¯‡æ–‡ç« å¼€å¤´éƒ½ä¼šåŠ ä¸Šæ—¶é—´,å¥½æ¯”è¾ƒä½ ç°åœ¨çš„æ—¶é—´å’Œè¿™ç¯‡åšå®¢ä¹¦å†™çš„æ—¶é—´,ä½ å¥½åˆ¤å®šä½ æ˜¯å€Ÿé‰´è¿˜æ˜¯å¯ä»¥ç›´æ¥ç”¨. ä»Šå¤©ä¸»è¦æ˜¯ä»‹ç» git çš„å…¶ä»–å‘½ä»¤. git ä»“åº“æ‰“æ ‡ç­¾(tag) git æ‰©å±•å·¥å…· lfs(large file system) git tagç»™åˆ†æ”¯æ‰“æ ‡ç­¾git tag &lt;tagName&gt; è¿™ä¸ªå‘½ä»¤æ˜¯ç»™æœ¬åœ°ä»“åº“æœ€è¿‘çš„ä¸€æ¬¡æäº¤æ‰“ä¸ªæ ‡ç­¾. ej:1git tag 1.0.0 è·å–æœ¬åœ°æ‰€æœ‰çš„æ ‡ç­¾git tag ej:12git tag&gt; 1.0.0 åˆ é™¤æœ¬åœ°æ ‡ç­¾git tag -d &lt;tagName&gt; ej:1git tag -d 1.0.0 ç»™æ ‡ç­¾æ·»åŠ æè¿°ä¿¡æ¯git tag -a &lt;tagName&gt; -m &quot;&lt;decription&gt;&quot; ej:1git tag -a 1.0.1 -m &quot;online version1.0.1&quot; ç»™æ ‡ç­¾æ·»åŠ æè¿°ä¿¡æ¯git tag -a &lt;tagName&gt; -m &quot;&lt;decription&gt;&quot; ej:1git tag -a 1.0.1 -m &quot;online version1.0.1&quot; ç»™æŒ‡å®šçš„æäº¤æ‰“ä¸Šæ ‡ç­¾git tag &lt;tagName&gt; &lt;commitId&gt; è¿™é‡ŒæŸ¥è¯¢ç›¸å…³çš„ æäº¤Id(commitId) å¯ä»¥ä½¿ç”¨ git log å»çœ‹, ä½†æ˜¯æ˜¾ç¤ºçš„ commitId å¤ªé•¿äº†ä¸å¤ªå¥½çœ‹å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ git log â€“abbrev-commit å…¶å®ç»™gitçš„ commitId ä¸ƒä½å°±å¯ä»¥é”å®šä¸€æ¬¡æäº¤è®°å½•. ej:1git tag 1.0.2 7b23fc5 æ˜¾ç¤ºæ ‡ç­¾çš„è¯¦ç»†æƒ…å†µgit show &lt;tagName&gt; ej:1git show 1.0.2 ä¸Šé¢è¿™äº›éƒ½æ˜¯æœ¬åœ°çš„æ“ä½œ,ä½ è‚¯å®šè¿˜éœ€è¦å°†ä½ è¿™äº›,tagæäº¤ä¸Šå». æ¨é€æŒ‡å®šæ ‡ç­¾åˆ°è¿œç«¯git push origin &lt;tagName&gt; ej:1git push origin 1.0.1 æ¨é€æœ¬åœ°æ‰€æœ‰çš„æ ‡ç­¾git push origin --tags ej:1git push origin --tags åˆ é™¤è¿œç«¯æ ‡ç­¾git push origin :refs/tags/&lt;tagName&gt; git push origin --delete tag &lt;tagName&gt; ej:12git push origin :refs/tags/1.0.1git push origin --delete tag 1.0.1 ä¹Ÿè®¸æœ‰äº›äººä¼šç–‘æƒ‘,æ€ä¹ˆå»æŸ¥çœ‹è¿œç¨‹çš„ tag,è¿™ä¸ªä½ å°±ä¸ç”¨çº ç»“äº†,å› ä¸ºæ¯æ¬¡git pullçš„æ—¶å€™,éƒ½ä¼šå°†åˆ«äººæ¨é€ä¸Šå»çš„ tag ç»™æ‹‰å–åˆ°æœ¬åœ°å†æ¬¡ä½¿ç”¨ git tag æŸ¥çœ‹å°±è¡Œäº†. åˆ é™¤è¿œç«¯ tag çš„å·¥ä½œæµ(workflow) å…ˆåˆ é™¤æœ¬åœ°çš„tag ç„¶ååœ¨åˆ é™¤è¿œç«¯çš„ tag. git lfsgit-lfså‚è€ƒåœ°å€ è¿™ä¸ªæ‰©å±•å·¥å…·æ˜¯è§£å†³ ä¸»ä»“åº“æ—¥æ¸åºå¤§çš„æ—¶å€™ æ‹‰å–ç¼“æ…¢çš„é—®é¢˜. æ¯æ¬¡æäº¤éƒ½ä¼šä½¿ä»“åº“çš„æ€»ä½“ç§¯å˜çš„åŸæ¥è¶Šå¤§.å°¤å…¶æ˜¯ä¸€äº›å¤§çš„é¡¹ç›®è¿™ä¸€ç‚¹ä¼šä½“ç°çš„è¶Šæ¥è¶Šæ˜æ˜¾,å¯¼è‡´åˆ«äººåœ¨æ‹‰å–çš„æ—¶å€™ä¼šå˜å¾—å¾ˆç¼“æ…¢. git lfs çš„è§£å†³æ–¹æ¡ˆæ˜¯ å°†ä¸€äº›å¤§çš„æ–‡ä»¶ å‚¨å­˜åœ¨å¦å¤–çš„ä»“åº“ä¸­,ä¿è¯ä½ çš„ä¸»ä»“åº“çš„ä½“ç§¯ä¸ä¼šå¾ˆå¤§.æ­£å¦‚,git-lfs ä¸­è¯´åˆ°çš„ æ›´å¿«çš„æ‹‰å–é€Ÿåº¦.ä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è§£å†³ä»“åº“ä½“ç§¯çš„é—®é¢˜. git-lfs çš„å·¥ä½œæµ(workflow)1.å…ˆå»å®‰è£… è¿™ä¸ªæ‰©å±•å·¥å…·.2.ç„¶ååœ¨ä½ çš„ä»“åº“ç›®å½•ä¸‹,æ‰“å¼€ git æ‰§è¡Œ git lfs install3.æ·»åŠ ä½ è¦è¿½è¸ªçš„å¤§å°ºå¯¸æ–‡ä»¶,å®ƒè¿™é‡Œæ”¯æŒæ¨¡ç³ŠåŒ¹é… git lfs track &quot;*.extName&quot;4.æ‰§è¡Œ git lfs installçš„æ—¶å€™ä¼šäº§ç”Ÿä¸€ä¸ª.gitattributesçš„æ–‡ä»¶ ç¡®ä¿ä»–è¢«æäº¤è¢«è¿½è¸ª git add .gitattributes ä½¿ç”¨ git lfs track æŸ¥çœ‹ç°æœ‰çš„æ–‡ä»¶è¿½è¸ªæ¨¡å¼ æäº¤åæ‰§è¡Œgit lfs ls-files å¯ä»¥æ˜¾ç¤ºå½“å‰è·Ÿè¸ªçš„æ–‡ä»¶åˆ—è¡¨ å…¶ä»–çš„æ–‡ä»¶æ·»åŠ è·Ÿæ­£å¸¸çš„git å·¥ä½œæµæ˜¯ä¿æŒä¸€è‡´. æ‹‰å–ä»£ç ç›´æ¥å°±æ˜¯ git pull , æ³¨æ„ä¸éœ€è¦ä½¿ç”¨ git lfs pulläº†.","tags":[{"name":"git","slug":"git","permalink":"https://leng521.top/tags/git/"},{"name":"git æ‰©å±•å·¥å…·","slug":"git-æ‰©å±•å·¥å…·","permalink":"https://leng521.top/tags/git-æ‰©å±•å·¥å…·/"}]},{"title":"sconsè‡ªåŠ¨æ„å»ºå·¥å…·(äºŒ)","date":"2018-12-25T14:01:58.000Z","path":"/posts/66615451/","text":"ä¸Šä¸€ç¯‡å¥½åƒå†™çš„æœ‰ç‚¹é•¿äº†,ä¸Šä¼ ä¸ä¸Šå»,æ‰€ä»¥åˆå†™äº†ç¬¬äºŒç¯‡ç»­å†™ç¬¬ä¸€ç¯‡. ç¯å¢ƒå˜é‡å½±å“ scons æ„å»ºit uses the dictionary stored in the $ENV construction variable as the external environment for executing commands.è§£é‡Š: å®ƒä½¿ç”¨æˆå­—å…¸çš„æ–¹å¼å­˜å‚¨åœ¨ ENV çš„æ„é€ å˜é‡ä¸­ ä½œä¸ºå¤–éƒ¨å¯æ‰§è¡Œå‘½ä»¤çš„ç¯å¢ƒ12345678910111213141516171819202122æ·»åŠ  Path ç¯å¢ƒå˜é‡åˆ° ENVä¸­æ‰§è¡Œpath = ['/usr/local/bin', '/bin', '/usr/bin']env = Environment(ENV = &#123;'PATH' : path&#125;)env['ENV']['PATH'] = ['/usr/local/bin', '/bin', '/usr/bin']env['ENV']['PATH'] = '/usr/local/bin:/bin:/usr/bin'å› ä¸ºæ˜¯ scons çš„é…ç½®æ–‡ä»¶æ˜¯ä»¥ python çš„ç¯å¢ƒæ‰§è¡Œçš„ æ‰€ä»¥ ä½ å¯ä»¥ä½¿ç”¨ os.environ['PATH'] è·å–ç¯å¢ƒå˜é‡, ä¾‹å­å¦‚ä¸‹:è¿™æ ·åš,å¯ä»¥è®©è‡ªå·±çš„ä»£ç å¯ç§»æ¤,è·¨å¹³å°import osenv = Environment(ENV = &#123;'PATH' : os.environ['PATH']&#125;)æˆ–è€…ä½ å¯ä»¥å°†æ•´ä¸ª ç¯å¢ƒå˜é‡ å…¨éƒ¨èµ‹å€¼ç»™ ENVimport osenv = Environment(ENV = os.environ)ä½ å¯ä»¥åœ¨å·²æœ‰çš„ç¯å¢ƒå˜é‡ä¸­ æ‹¼æ¥ scons æä¾›å¦‚ä¸‹çš„ æ–¹æ³•:PrependENVPath()AppendENVPath()env =ç¯å¢ƒ(ENV = os.environ)env.PrependENVPath('PATH'ï¼Œ'/ usr / local / bin')env.AppendENVPath('LIB'ï¼Œ'/ usr / local / lib') ä½¿ç”¨å¤–éƒ¨å·¥å…·ä½¿ç”¨å¤–éƒ¨å·¥å…·çš„æ—¶å€™ scons é»˜è®¤çš„æœç´¢è·¯å¾„:scons å†…ç½®å·¥å…·ç›®å½•Sconstruct åŒçº§ç›®å½•ä¸‹/site_scons/site_tools/ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# Builtin tool or tool located within site_toolsenv = Environment(tools = ['SomeTool'])env.SomeTool(targets, sources)# The search locations would include by defaultSCons/Tool/SomeTool.pySCons/Tool/SomeTool/__init__.py./site_scons/site_tools/SomeTool.py./site_scons/site_tools/SomeTool/__init__.pyä¹Ÿå¯ä»¥ç»™ æ·»åŠ  é™¤äº† scons é»˜è®¤æœç´¢è·¯å¾„# Tool located within the toolpath directory optionenv = Environment(tools = ['SomeTool'], toolpath = ['/opt/SomeToolPath', '/opt/SomeToolPath2'])env.SomeTool(targets, sources)# The search locations in this example would include:/opt/SomeToolPath/SomeTool.py/opt/SomeToolPath/SomeTool/__init__.py/opt/SomeToolPath2/SomeTool.py/opt/SomeToolPath2/SomeTool/__init__.pySCons/Tool/SomeTool.pySCons/Tool/SomeTool/__init__.py./site_scons/site_tools/SomeTool.py./site_scons/site_tools/SomeTool/__init__.pyåµŒå¥—å·¥å…·# namespaced targetenv = Environment(tools = ['SubDir1.SubDir2.SomeTool'], toolpath = ['/opt/SomeToolPath'])env.SomeTool(targets, sources)# With this example the search locations would include/opt/SomeToolPath/SubDir1/SubDir2/SomeTool.py/opt/SomeToolPath/SubDir1/SubDir2/SomeTool/__init__.pySCons/Tool/SubDir1/SubDir2/SomeTool.pySCons/Tool/SubDir1/SubDir2/SomeTool/__init__.py./site_scons/site_tools/SubDir1/SubDir2/SomeTool.py./site_scons/site_tools/SubDir1/SubDir2/SomeTool/__init__.pyä½¿ç”¨ sys.path ä½œä¸ºæ‰©å±•çš„å·¥å…·è·¯å¾„# namespaced target using sys.path within toolpathimport syssearchpaths = []for item in sys.path: if os.path.isdir(item): searchpaths.append(item)env = Environment(tools = ['someinstalledpackage.SomeTool'], toolpath = searchpaths)env.SomeTool(targets, sources)ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ… æ¥é¿å…ä½¿ç”¨ pip å®‰è£…åŒ… æ‹¼æ¥å‰é¢å¤æ‚çš„è·¯å¾„# namespaced target using sys.pathimport sysenv = Environment(tools = ['SomeTool'], toolpath = [PyPackageDir('tools_example.subdir1.subdir2')])env.SomeTool(targets, sources) è¿™æ¬¡ä½ äº†è§£ æ„é€ å˜é‡çš„è¿™å‡ ä¸ªæ–¹æ³•MergeFlags, ParseFlags, and ParseConfig methods of a construction environmentMergeFlags, ParseFlags ParseConfig ###123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172MergeFlagså°è¯•åˆå¹¶æŸä¸ªæ„é€ å˜é‡ ä¾‹å­å¦‚ä¸‹:env = Environment()env.Append(CCFLAGS = '-option -O3 -O1')flags = &#123; 'CCFLAGS' : '-whatever -O3' &#125;env.MergeFlags(flags)print env['CCFLAGS']&gt;&gt;&gt;&gt;scons -Q['-option', '-O1', '-whatever', '-O3']scons: '.' is up to date.env = Environment()env.Append(CPPPATH = ['/include', '/usr/local/include', '/usr/include'])flags = &#123; 'CPPPATH' : ['/usr/opt/include', '/usr/local/include'] &#125;env.MergeFlags(flags)print env['CPPPATH']&gt;&gt;&gt;&gt;scons -Q['/include', '/usr/local/include', '/usr/include', '/usr/opt/include']scons: '.' is up to date.å¦‚æœæˆ‘ä»¬è¿™ä¸ªæ–¹æ³•ä¼ é€’çš„ä¸æ˜¯åˆ—è¡¨ scons ä¼šè‡ªåŠ¨è°ƒç”¨ ParseFlags å°†å…¶è§£ææˆåˆ—è¡¨env = Environment()env.Append(CCFLAGS = '-option -O3 -O1')env.Append(CPPPATH = ['/include', '/usr/local/include', '/usr/include'])env.MergeFlags('-whatever -I/usr/opt/include -O3 -I/usr/local/include')print env['CCFLAGS']print env['CPPPATH']&gt;&gt;&gt;&gt;scons -Q['-option', '-O1', '-whatever', '-O3']['/include', '/usr/local/include', '/usr/include', '/usr/opt/include']scons: `.' is up to date.ParseFlags [ParseFlags](https://scons.org/doc/production/HTML/scons-user/ch08s02.html)è®²ä¸€ä¸ªæœ‰è§„å¾‹çš„å­—ç¬¦ä¸² è§£ææˆä¸€ä¸ªå­—å…¸åˆ—è¡¨-I æŒ‡è¦åŒ…å«çš„ æºç è·¯å¾„-L åº“æ–‡ä»¶çš„è·¯å¾„env = Environment()d = env.ParseFlags(\"-I/opt/include -L/opt/lib -lfoo\")for k,v in sorted(d.items()): if v: print k, venv.MergeFlags(d)env.Program('f1.c')æ”¯æŒé€’å½’è¾“å…¥ ä¸»è¦æ˜¯çœ‹ä¾‹å­ å’Œè¾“å‡ºç»“æœå»ç†è§£è¿™äº›ä¸œè¥¿, è¿™é‡Œå®˜æ–¹ä¹Ÿæ²¡æœ‰è§£é‡Šçš„å¤ªæ¸…æ¥š åé¢è¿˜å¾—å¤šå»å®è·µçš„çœŸçŸ¥env = Environment()d = env.ParseFlags([\"-I/opt/include\", [\"-L/opt/lib\", \"-lfoo\"]])for k,v in sorted(d.items()): if v: print k, venv.MergeFlags(d)env.Program('f1.c')&gt;&gt;&gt;&gt;% scons -QCPPPATH ['/opt/include']LIBPATH ['/opt/lib']LIBS ['foo']cc -o f1.o -c -I/opt/include f1.ccc -o f1 f1.o -L/opt/lib -lfooParseConfigè¿™ä¸ªä¸œè¥¿æ²¡æœ‰çœ‹æ˜ç™½ è¿™é‡Œå…ˆè®°å½•ä¸€ä¸‹é“¾æ¥Finding Installed Library Information: the ParseConfig Function[ParseConfig](https://scons.org/doc/production/HTML/scons-user/ch08s03.html) åœ¨æ„å»ºç¨‹åºçš„æ—¶å€™ å¸®åŠ©ä¿¡æ¯12345678910111213141516171819202122232425262728293031323334353637383940Help(\"\"\"Type: 'scons program' to build the production program, 'scons debug' to build the debug version.\"\"\", append=True)åŠ ä¸Š append = True åœ¨ä¸‹é¢å‡ºç° `Use scons -H for help about command-line options.` è¿™æ ·çš„å­—æ®µ&gt;&gt;&gt;&gt;scons -hscons: Reading SConscript files ...scons: done reading SConscript files.Type: 'scons program' to build the production program, 'scons debug' to build the debug version.Use scons -H for help about command-line options.ä½ å¯ä»¥ç¼©çŸ­çš„ å‘½ä»¤è¾“å‡º å¦‚ä¸‹è¿™ç§æ“ä½œenv = Environment(CCCOMSTR = \"Compiling $TARGET\", LINKCOMSTR = \"Linking $TARGET\")env.Program('foo.c')&gt;&gt;&gt;&gt;% scons -QCompiling foo.oLinking fooæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ å¦‚æœç”¨æˆ·è¾“å…¥çš„ è¯¦ç»†å­—æ®µä¸ä¸º True åˆ™è‡ªå®šä¹‰ ç¼–è¯‘å‘½ä»¤ å…¶å®æ˜¯ç®€çŸ­ç¼–è¯‘å‘½ä»¤env = Environment()if ARGUMENTS.get('VERBOSE') != \"1': env['CCCOMSTR'] = \"Compiling $TARGET\" env['LINKCOMSTR'] = \"Linking $TARGET\"env.Program('foo.c')Progress æ§åˆ¶æµç¨‹è¾“å‡º[Progress](https://scons.org/doc/production/HTML/scons-user/ch09s03.html)GetBuildFailures[æ‰“å°è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯](https://scons.org/doc/production/HTML/scons-user/ch09s04.html) ä»å‘½ä»¤è¡Œæ§åˆ¶æ„å»ºæµç¨‹ä¼ é€é—¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219&gt;&gt;&gt;&gt; å¦‚æœä½ æƒ³ä½¿ç”¨è€…è°ƒç”¨ä¸€äº›é™¤äº†sconsæä¾›çš„æŒ‡ä»¤,ä½ å¯ä»¥è¿™æ ·åšARGUMENTS è¿™ä¸ªä¸œè¥¿å°†ä¼šå¸®åˆ°ä½ .ä½†æ˜¯æœ‰ä¸ªç¼ºé™·æ˜¯ä¸èƒ½å­˜å‚¨ä¸¤ä¸ªå€¼,åªèƒ½ key-value çš„å½¢å¼.ARGUMENTS.get() è·å– debug è¿™ä¸ªæŒ‡ä»¤ æ²¡æœ‰ç”¨åé¢çš„é»˜è®¤å€¼env = Environment()debug = ARGUMENTS.get('debug', 0)if int(debug): env.Append(CCFLAGS = '-g')env.Program('prog.c')ej:scons -Q debug=0&gt;&gt;&gt;&gt; å¦‚æœä½ æƒ³ ä¸€å¯¹å¤š ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªä¸œè¥¿ARGLISTcppdefines = []for key, value in ARGLIST: if key == 'define': cppdefines.append(value)env = Environment(CPPDEFINES = cppdefines)env.Object('prog.c')ej: scons -Q define=FOO define=BAR&gt;&gt;&gt;&gt; ä»æ–‡ä»¶ä¸­è¯»å–ç”¨æˆ·æ„å»ºé…ç½®&gt;&gt;&gt;&gt; ä¼šè¯»å– custom.py æ–‡ä»¶çš„é…ç½®è¡¨vars = Variables('custom.py')vars.Add('RELEASE', 'Set to 1 to build for release', 0)env = Environment(variables = vars, CPPDEFINES=&#123;'RELEASE_BUILD' : '$&#123;RELEASE&#125;'&#125;)env.Program(['foo.c', 'bar.c'])Help(vars.GenerateHelpText(env))&gt;&gt;&gt;&gt; custom.py&gt;&gt;&gt;&gt; RELEASE=1&gt;&gt;&gt;&gt; å¯ä»¥ç»“åˆ ä¸¤ç§åšæ³• è¯»å–ç”¨æˆ· åœ¨å‘½ä»¤è¡Œè¾“å…¥æˆ–åˆ™æ˜¯é…ç½®æ–‡ä»¶&gt;&gt;&gt;&gt; å…¶ä¸­ æœ¬åœ°é…ç½®æ–‡ä»¶ä¼šé¦–å…ˆ è¦†ç›– å‘½ä»¤è¡Œ çš„ é…ç½®vars = Variables('custom.py',ARGUMENTS)&gt;&gt;&gt;&gt; å®šä¹‰æ„é€ å˜é‡çš„å‡½æ•°&gt;&gt;&gt;&gt; Bool å¯ä»¥æŒ‡å®šçš„å€¼æœ‰ true =&gt; t on all 1 true False =&gt; f 0 no falsevars = Variables('custom.py')vars.Add(BoolVariable('RELEASE', 'Set to build for release', 0))env = Environment(variables = vars, CPPDEFINES=&#123;'RELEASE_BUILD' : '$&#123;RELEASE&#125;'&#125;)env.Program('foo.c')ej:scons -Q RELEASE=yes foo.o&gt;&gt;&gt;&gt; Enum æœ‰ä¸ª allowed_values çš„å­—æ®µ å®šä¹‰æšä¸¾å˜é‡å€¼&gt;&gt;&gt;&gt; map å­—æ®µå¤‡ç”¨æ˜ å°„å map=&#123;'navy':'blue'&#125;,&gt;&gt;&gt;&gt; ignorecase=1 å¿½ç•¥ æŒ‡å®šæŒ‡ä»¤çš„å¤§å°å†™ å¦‚ COLOR=NaVyvars = Variables('custom.py')vars.Add(EnumVariable('COLOR', 'Set background color', 'red', allowed_values=('red', 'green', 'blue')))env = Environment(variables = vars, CPPDEFINES=&#123;'COLOR' : '\"$&#123;COLOR&#125;\"'&#125;)env.Program('foo.c')ej: scons -Q COLOR=red&gt;&gt;&gt;&gt; ListVariable å…è®¸ä¸€ä¸ªå­—æ®µæŒ‡å®šå¤šä¸ªå€¼&gt;&gt;&gt;&gt; å…è®¸ä½¿ç”¨ all æˆ–åˆ™æ˜¯ nonevars = Variables('custom.py')vars.Add(ListVariable('COLORS', 'List of colors', 0, ['red', 'green', 'blue']))env = Environment(variables = vars, CPPDEFINES=&#123;'COLORS' : '\"$&#123;COLORS&#125;\"'&#125;)env.Program('foo.c')ej: scons -Q COLORS=red,blue foo.o =&gt; cc -o foo.o -c -DCOLORS=\"red blue\" foo.cej: scons -Q COLORS=all foo.o =&gt; cc -o foo.o -c -DCOLORS=\"red green blue\" foo.cej: scons -Q COLORS=none foo.o =&gt; cc -o foo.o -c -DCOLORS=\"\" foo.c&gt;&gt;&gt;&gt; PathVariable è·¯å¾„å˜é‡&gt;&gt;&gt;&gt; æä¾›è¾“å…¥çš„è·¯å¾„æ˜¯æ–‡ä»¶ PathVariable.PathIsFile&gt;&gt;&gt;&gt; æ˜¯ç›®å½• PathVariable.PathIsDir&gt;&gt;&gt;&gt; ç›®å½•ä¸å­˜åœ¨,å¹¶åˆ›å»º PathVariable.PathIsDirCreate&gt;&gt;&gt;&gt; ä¸å…³å¿ƒä¸Šé¢çš„ä¸‰ç‚¹ PathVariable.PathAcceptej:vars = Variables('custom.py')vars.Add(PathVariable('CONFIG', 'Path to configuration file', '/etc/my_config', PathVariable.PathIsFile))env = Environment(variables = vars, CPPDEFINES=&#123;'CONFIG_FILE' : '\"$CONFIG\"'&#125;)env.Program('foo.c')&gt;&gt;&gt;&gt; PackageVariable&gt;&gt;&gt;&gt; å¯ç”¨æˆ–ç¦æ­¢ è·¯å¾„åå­— æ²¡æœ‰å¤ªæ‡‚vars = Variables('custom.py')vars.Add(PackageVariable('PACKAGE', 'Location package', '/opt/location'))env = Environment(variables = vars, CPPDEFINES=&#123;'PACKAGE' : '\"$PACKAGE\"'&#125;)env.Program('foo.c')ej:% scons -Q foo.occ -o foo.o -c -DPACKAGE=\"/opt/location\" foo.c% scons -Q PACKAGE=/usr/local/location foo.occ -o foo.o -c -DPACKAGE=\"/usr/local/location\" foo.c% scons -Q PACKAGE=yes foo.occ -o foo.o -c -DPACKAGE=\"True\" foo.c% scons -Q PACKAGE=no foo.occ -o foo.o -c -DPACKAGE=\"False\" foo.c&gt;&gt;&gt;&gt; AddVariables ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªå˜é‡åŠŸèƒ½vars = Variables()vars.AddVariables( ('RELEASE', 'Set to 1 to build for release', 0), ('CONFIG', 'Configuration file', '/etc/my_config'), BoolVariable('warnings', 'compilation with -Wall and similiar', 1), EnumVariable('debug', 'debug output and symbols', 'no', allowed_values=('yes', 'no', 'full'), map=&#123;&#125;, ignorecase=0), # case sensitive ListVariable('shared', 'libraries to build as shared libraries', 'all', names = list_of_libs), PackageVariable('x11', 'use X11 installed here (yes = search some places)', 'yes'), PathVariable('qtdir', 'where the root of Qt is installed', qtdir),)&gt;&gt;&gt;&gt; UnknownVariables åœ¨ç”¨æˆ·ä½¿ç”¨äº†æœªå®šä¹‰çš„ æŒ‡ä»¤æ—¶ ä½ å¯ä»¥è­¦å‘Šè°ƒç”¨è€… æ‹¼å†™é”™è¯¯ å¹¶é€€å‡ºç¨‹åºvars = Variables(None)vars.Add('RELEASE', 'Set to 1 to build for release', 0)env = Environment(variables = vars, CPPDEFINES=&#123;'RELEASE_BUILD' : '$&#123;RELEASE&#125;'&#125;)unknown = vars.UnknownVariables()if unknown: print(\"Unknown variables: %s\"%unknown.keys()) Exit(1)env.Program('foo.c')&gt;&gt;&gt;&gt; ä½ å¯ä»¥åœ¨ç”¨æˆ·ä½¿ç”¨æŸä¸ªå‘½ä»¤çš„æ—¶å€™ æé†’ç”¨æˆ·ä¸€äº›æ“ä½œif 'bar' in COMMAND_LINE_TARGETS: print(\"Don't forget to copy `bar' to the archive!\")Default(Program('foo.c'))Program('bar.c')ej:% scons -Q barDon't forget to copy `bar' to the archive!&gt;&gt;&gt;&gt; Default() ç”¨æˆ·æ²¡æœ‰æŒ‡å®šæ„å»ºæ˜¯ å¯ä»¥ä½¿ç”¨ è¿™ä¸ªå‡½æ•° é»˜è®¤ æ„å»ºä¸€ä¸ªç¨‹åºenv = Environment()hello = env.Program('hello.c')env.Program('goodbye.c')Default(hello)ej: % scons -Q cc -o hello.o -c hello.c cc -o hello hello.o % scons -Q scons: `hello' is up to date. % scons -Q goodbye cc -o goodbye.o -c goodbye.c cc -o goodbye goodbye.oDefault è·Ÿè¿‡ç”¨æ³• [ä¼ é€é—¨](https://scons.org/doc/production/HTML/scons-user/ch10s03.html)&gt;&gt;&gt;&gt; DEFAULT_TARGETS ä¸»è¦æ˜¯è¿åˆä¸Šé¢ Default å‡½æ•°, çœ‹ä¸€ä¸‹ä¾‹å­åº”è¯¥å¾ˆå®¹æ˜“ç†è§£prog1 = Program('prog1.c')Default(prog1)print(\"DEFAULT_TARGETS is %s\"%map(str, DEFAULT_TARGETS))ej:% sconsscons: Reading SConscript files ...DEFAULT_TARGETS is ['prog1']scons: done reading SConscript files.scons: Building targets ...cc -o prog1.o -c prog1.ccc -o prog1 prog1.oscons: done building targets.&gt;&gt;&gt;&gt; BUILD_TARGETSprog1 = Program('prog1.c')Program('prog2.c')Default(prog1)print (\"BUILD_TARGETS is %s\"%map(str, BUILD_TARGETS))ej:% scons -QBUILD_TARGETS is ['prog1']cc -o prog1.o -c prog1.ccc -o prog1 prog1.o% scons -Q prog2BUILD_TARGETS is ['prog2']cc -o prog2.o -c prog2.ccc -o prog2 prog2.o% scons -Q -c .BUILD_TARGETS is ['.']Removed prog1.oRemoved prog1Removed prog2.oRemoved prog2&gt;&gt;&gt;&gt; äº§ç”Ÿå¸®åŠ©æ–‡æ¡£(help)vars = Variables(None, ARGUMENTS)vars.Add('RELEASE', 'Set to 1 to build for release', 0)env = Environment(variables = vars)Help(vars.GenerateHelpText(env)) InstallBuilder å®‰è£…æ„å»ºçš„å¯æ‰§è¡Œç¨‹åºå®‰è£…æš‚æ—¶æ²¡æœ‰ æ˜¾ç¤ºåŠŸèƒ½ä¸Šéœ€æ±‚å°±ä¸åšè¯¦ç»†å™è¿°äº†ä¼ é€é—¨ ä¸å¹³å°æ— å…³çš„æ–‡ä»¶æ“ä½œscons å°è£…äº† ä¸å¹³å°æ— å…³çš„æ–‡ä»¶æ“ä½œå¦‚: æ‹·è´(copy),ç§»åŠ¨(move),ç§»é™¤(delete),åˆ›å»º(touch),åˆ›å»ºç›®å½•(mkdir),æ‰§è¡Œ(execute)ä¼ é€é—¨WWW æ§åˆ¶æ„å»ºç›®æ ‡çš„ç§»é™¤12345678910111213141516171819202122&gt;&gt;&gt;&gt; æœ‰çš„æ—¶å€™ä½ æƒ³è¦åœ¨æ¯æ¬¡æ„å»ºä¸€ä¸ªä¸œè¥¿çš„æ—¶å€™,ä¸æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ„å»º,è€Œæ˜¯ä»¥å¢é‡çš„æ–¹å¼æ„å»º&gt;&gt;&gt;&gt; Preciousenv = Environment(RANLIBCOM='')lib = env.Library('foo', ['f1.c', 'f2.c', 'f3.c'])env.Precious(lib)&gt;&gt;&gt;&gt; æœ‰çš„æ—¶å€™ä½ å¯èƒ½ä½¿ç”¨ scons -c ä½†æ˜¯è¿™ä¸ªå‘½ä»¤ä¼šå°†æ‰€æœ‰çš„æ„å»ºäº§ç‰©éƒ½ç§»é™¤æ‰,ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤,ä¿è¯æœ‰äº›ä¸œè¥¿ä¸è¢« -c æŒ‡ä»¤ ç»™ç§»é™¤æ‰&gt;&gt;&gt;&gt; NoCleanenv = Environment(RANLIBCOM='')lib = env.Library('foo', ['f1.c', 'f2.c', 'f3.c'])env.NoClean(lib)&gt;&gt;&gt;&gt; Clean æœ‰çš„æ—¶å€™ä½ å¯èƒ½ æ¸…æ¥šè‡ªå·±åœ¨äº§ç”Ÿè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ è‡ªå®šä¹‰æ–‡ä»¶ ä½ å¯ä»¥è¿™æ ·åšt = Command('foo.out', 'foo.in', 'build -o $TARGET $SOURCE')Clean(t, 'foo.log')ej:% scons -Qbuild -o foo.out foo.in% scons -Q -cRemoved foo.outRemoved foo.log åˆ†çº§æ„å»ºåˆ†çº§æ„å»º,å°±æ˜¯ä½ çš„æºæ–‡ä»¶å¯èƒ½ä¸æ˜¯ä¸€ä¸ªç›®å½•,éœ€è¦å¤šä¸€ä¸ªç›®å½•æ„å»º.ä¼ é€é—¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&gt;&gt;&gt;&gt; SConscript æ ¹ç›®å½•è°ƒç”¨æ¯ä¸ªå­ç›®å½•çš„ æ„å»ºè„šæœ¬, é€šå¸¸å­ç›®å½•çš„æ„å»ºè„šæœ¬å« SConscript è¿™æ˜¯å®˜æ–¹çš„è§£é‡ŠSConscript(['drivers/display/SConscript', 'drivers/mouse/SConscript', 'parser/SConscript', 'utilities/SConscript'])&gt;&gt;&gt;&gt; é€šå¸¸é‡Œé¢çš„è·¯å¾„éƒ½æ˜¯ç›¸å¯¹äºå½“å‰è¿™ä¸ªæ„å»ºè„šæœ¬ å¦‚æœä½ å…ˆè®©å­æ„å»ºè„šæœ¬ ä½¿ç”¨é¡¶çº§ç›®å½•ä½ å¯ä»¥è¿™æ ·åš åŠ ä¸Š '#' è¿™ä¸ªç¬¦å·env = Environment()env.Program('prog', ['main.c', '#lib/foo1.c', 'foo2.c'])&gt;&gt;&gt;&gt; å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç»å¯¹è·¯å¾„ ä¸éœ€è¦åŠ ä»»ä½•ç¬¦å·&gt;&gt;&gt;&gt; &gt;&gt;&gt;&gt; ä½ å¯ä»¥åœ¨å¤šä¸ªæ„å»ºè„šæœ¬å…±äº«å˜é‡ ä½ å¯ä»¥ä½¿ç”¨ Export Import è¿™ä¸¤ä¸ªæ–¹æ³•ej:env = Environment()Export(env)or:env = Environment()debug = 10Export(env, debug)or:Export('env debug')or:SConscript('src/SConscript', 'env')or:SConscript('src/SConscript', exports='env')ej:Import(env)Import(env, debug)Import('env debug')Import('*')&gt;&gt;&gt;&gt; æœ‰äº‹ä½ éœ€è¦ ä»ä¸¤ä¸ªæ­¤ç›®å½•è¿”å›ç»“æœ æ„å»ºå‡ºä¸€ä¸ªå¯¹è±¡env = Environment()Export('env')objs = []for subdir in ['foo', 'bar']: o = SConscript('%s/SConscript' % subdir) objs.append(o)env.Library('prog', objs)other Sconstruct(å…¶ä»–æ„å»ºè„šæœ¬): Import('env') obj = env.Object('foo.c') Return('obj')&gt;&gt;&gt;&gt; åˆ†ç¦»æ„å»º ç›®æ ‡ å’Œ æºæ–‡ä»¶åˆ†ç¦»æ„å»ºç»“æœä¼ é€é—¨1234567891011121314æ–¹å¼1:ä¸»è¦æ˜¯åˆ©ç”¨è¿™ä¸ªå­—æ®µ variant_dirSConscript('src/SConscript', variant_dir='build')ç¦æ‰åœ¨è¾“å‡ºç›®å½•æ‹·è´æºæ–‡ä»¶SConscriptï¼ˆ'src / SConscript'ï¼Œvariant_dir ='build'ï¼Œduplicate = 0ï¼‰æ–¹å¼2:VariantDir('build', 'src', duplicate=0)env = Environment()env.Program('build/hello.c')å­è„šæœ¬VariantDir('build', 'src')SConscript('build/SConscript') å˜ä½“æ„å»ºä¼ é€é—¨åŒä¸€ä¸ªç›®å½•æ„å»ºä¸åŒçš„ç›®æ ‡äº§ç‰©(å¯æ‰§è¡Œç¨‹åº)1234567891011121314151617platform = ARGUMENTS.get('OS', Platform())include = \"#export/$PLATFORM/include\"lib = \"#export/$PLATFORM/lib\"bin = \"#export/$PLATFORM/bin\"env = Environment(PLATFORM = platform, BINDIR = bin, INCDIR = include, LIBDIR = lib, CPPPATH = [include], LIBPATH = [lib], LIBS = 'world')Export('env')env.SConscript('src/SConscript', variant_dir='build/$PLATFORM') å›½é™…åŒ–ä¼ é€é—¨ ç¼–å†™è‡ªå·±çš„ builder(æ„é€ å™¨)ä¼ é€é—¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101&gt;&gt;&gt;&gt; åˆ›å»ºæ„é€ å™¨env = Environment()bld = Builder(action = 'foobuild &lt; $SOURCE &gt; $TARGET')env.Append(BUILDERS = &#123;'Foo' : bld&#125;)env.Foo('file.foo', 'file.input')env.Program('hello.c')or:env = Environment()bld = Builder(action = 'foobuild &lt; $SOURCE &gt; $TARGET')env['BUILDERS']['Foo'] = bldenv.Foo('file.foo', 'file.input')env.Program('hello.c')&gt;&gt;&gt;&gt; æŒ‡å®šæ„å»ºçš„æ–‡ä»¶åç¼€ å’Œ è¾“å‡ºæ–‡ä»¶çš„åç¼€bld = Builder(action = 'foobuild &lt; $SOURCE &gt; $TARGET', suffix = '.foo', src_suffix = '.input')env = Environment(BUILDERS = &#123;'Foo' : bld&#125;)env.Foo('file1')env.Foo('file2')&gt;&gt;&gt;&gt; æ„å»ºæ˜¯è°ƒç”¨ python å‘½ä»¤ target:A list of Node objects representing the target or targets to be built by this builder function. The file names of these target(s) may be extracted using the Python str function.(æ˜¯ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨,å¯é€šè¿‡ str çš„æ–¹æ³• è§£æé‡Œé¢çš„å†…å®¹)source:A list of Node objects representing the sources to be used by this builder function to build the targets. The file names of these source(s) may be extracted using the Python str function.(æ˜¯ä¸€ä¸ªæºèŠ‚ç‚¹åˆ—è¡¨,å¯é€šè¿‡ str çš„æ–¹æ³• è§£æé‡Œé¢çš„å†…å®¹)env:The construction environment used for building the target(s). The builder function may use any of the environment's construction variables in any way to affect how it builds the targets.(è¿™ä¸ªæ„é€ å˜é‡è¢«ç”¨åœ¨ ç›®æ ‡èŠ‚ç‚¹ä¸Š, è¿™ä¸ªæ„é€ å™¨å¯èƒ½ä½¿ç”¨ä»»æ„çš„æ„é€ ç¯å¢ƒä¸­çš„æ„é€ å˜é‡ä»¥ä»»æ„çš„æ–¹å¼å»å½±å“å¦‚ä½•æ„å»ºç›®æ ‡èŠ‚ç‚¹)(è¿™ä¸ªè§£é‡Šå¯èƒ½æœ‰ç‚¹ç»•,å…¶å®è¿˜æ˜¯æŒºå®¹æ˜“æ‡‚å¾—,ä¸æ˜¯å—?)&gt;&gt;&gt;&gt; è‡ªå®šä¹‰æ„å»ºå‡½æ•° ä¸Šé¢æ˜¯ä¸‰ä¸ªå‚æ•°çš„è§£é‡Š, å¾ˆè¯¦ç»†.def build_function(target, source, env): # Code to build \"target\" from \"source\" return Nonebld = Builder(action = build_function, suffix = '.foo', src_suffix = '.input')env = Environment(BUILDERS = &#123;'Foo' : bld&#125;)env.Foo('file')&gt;&gt;&gt;&gt; Generator äº§ç”Ÿä¸€æ¡è®°å½•ä¿¡æ¯def generate_actions(source, target, env, for_signature): return 'foobuild &lt; %s &gt; %s' % (source[0], target[0])bld = Builder(generator = generate_actions, suffix = '.foo', src_suffix = '.input')env = Environment(BUILDERS = &#123;'Foo' : bld&#125;)env.Foo('file')&gt;&gt;&gt;&gt; Builders That Modify the Target or Source Lists Using an Emitter(ä¿®æ”¹ç›®æ ‡èŠ‚ç‚¹æˆ–è€…æ˜¯ æºèŠ‚ç‚¹ é€šè¿‡å‘å°„å™¨)bld = Builder(action = 'my_command $SOURCES &gt; $TARGET', suffix = '.foo', src_suffix = '.input', emitter = '$MY_EMITTER')def modify1(target, source, env): return target, source + ['modify1.in']def modify2(target, source, env): return target, source + ['modify2.in']env1 = Environment(BUILDERS = &#123;'Foo' : bld&#125;, MY_EMITTER = modify1)env2 = Environment(BUILDERS = &#123;'Foo' : bld&#125;, MY_EMITTER = modify2)env1.Foo('file1')env2.Foo('file2')&gt;&gt;&gt;&gt; æ”¾ç½®è‡ªå®šä¹‰å·¥å…·æˆ–è€…æ˜¯ æ„é€ å™¨&gt;&gt;&gt;&gt; scons ä¼šè‡ªåŠ¨åŠ è½½ site_scons/site_init.py æ¯”ä»»æ„ä¸€ä¸ª æ„å»ºè„šæœ¬éƒ½æ—©&gt;&gt;&gt;&gt; site_scons/site_tools åœ¨é¡¶çº§çš„æ„å»ºè„šæœ¬æ˜¯æœ€åæ‰§è¡Œçš„ å®ƒè¦†ç›–å…¶ä»–çš„æ„å»ºè„šæœ¬å®šä¹‰&gt;&gt;&gt;&gt; site_scons/site_init.pydef TOOL_ADD_HEADER(env): \"\"\"A Tool to add a header from $HEADER to the source file\"\"\" add_header = Builder(action=['echo \"$HEADER\" &gt; $TARGET', 'cat $SOURCE &gt;&gt; $TARGET']) env.Append(BUILDERS = &#123;'AddHeader' : add_header&#125;) env['HEADER'] = '' # set default valueSConstruct# Use TOOL_ADD_HEADER from site_scons/site_init.pyenv=Environment(tools=['default', TOOL_ADD_HEADER], HEADER=\"=====\")env.AddHeader('tgt', 'src')site_scons/my_utils.pyfrom SCons.Script import * # for Execute and Mkdirdef build_id(): \"\"\"Return a build ID (stub version)\"\"\" return \"100\"def MakeWorkDir(workdir): \"\"\"Create the specified dir immediately\"\"\" Execute(Mkdir(workdir))import my_utilsprint(\"build_id=\" + my_utils.build_id())my_utils.MakeWorkDir('/tmp/work') ç¼“å­˜æ„å»ºçš„æ–‡ä»¶ç¼“å­˜æ„å»ºæ–‡ä»¶å…¶å®å°±æ˜¯å°†æ„å»ºå‡ºæ¥çš„ä¸­é—´äº§ç‰©ç»™æ”¾åˆ°ä¸€ä¸ªç¼“å­˜ç›®å½•é‡Œé¢,å¦‚æœç›®å½•æ–‡ä»¶ä¸å­˜,å°±ç›´æ¥æ„å»ºä¸­é—´äº§ç‰©,åœ¨å…¶ä¸‹æ¬¡æ„å»ºæ˜¯,å°±ä¸å¿…å†æ¬¡æ„å»ºå®ƒ,æé«˜æ„å»ºæ•ˆç‡.ä¼ é€é—¨ 12345678910111213141516171819202122232425&gt;&gt;&gt;&gt; ä¸»è¦ä½¿ç”¨ CacheDir('./cache')&gt;&gt;&gt;&gt; scons -Q --cache-show ä¿æŒæ¯æ¬¡æ„å»ºçš„æ˜¾ç¤ºå‘½ä»¤éƒ½æ˜¯ä¸€æ ·, ä¸ä½¿ç”¨è¿™ä¸ªå­—æ®µä¼šå‡ºç°å¦‚æœåœ¨åœ¨ç¼“å­˜é‡Œé¢å­˜åœ¨,å°±å’Œæ²¡æœ‰æ—¶çš„è¾“å‡ºä¸ä¸€æ ·,é—®é¢˜.ej: % scons -Q cc -o hello.o -c hello.c cc -o hello hello.o % scons -Q -c Removed hello.o Removed hello % scons -Q --cache-show cc -o hello.o -c hello.c cc -o hello hello.o&gt;&gt;&gt;&gt; NoCache() æŒ‡å®šæŸäº›ä¸­é—´äº§ç‰©,ä¸æ”¾å…¥ç¼“å­˜ej: env = Environment() obj = env.Object('hello.c') env.Program('hello.c') CacheDir('cache') NoCache('hello.o')&gt;&gt;&gt;&gt; scons -Q --cache-disable é€šè¿‡å‘½ä»¤è¡Œç¦æ‰ ç¼“å­˜&gt;&gt;&gt;&gt; scons -Q --cache-force å¼ºåˆ¶æ›´æ–°ç¼“å­˜&gt;&gt;&gt;&gt; scons -Q --random éšæœºç¼“å­˜ æˆ–è€…æ˜¯ä½¿ç”¨æ„å»ºè„šæœ¬è®¾ç½® SetOption('random', 1)-- random ä¸»è¦æ˜¯é¢å¯¹å¤šä¸ªç¨‹åºé€šåŒæ—¶æ„å»ºçš„æƒ…å†µ. è®©ä»–çš„æ„å»ºåº“çš„é¡ºåºå°½é‡ä¸ä¸€è‡´,æœ€å°åŒ–å‡å°‘ç¼“å­˜. éªŒè¯ python scons ç‰ˆæœ¬EnsurePythonVersion(2, 5) éªŒè¯ python ç‰ˆæœ¬ å¦‚æœä½äºæ„å»ºç»“æŸEnsureSConsVersion(1, 0) éªŒè¯ scons ç‰ˆæœ¬ åˆ«åç›®æ ‡åˆ«åä¹Ÿæ²¡å•¥è¯´çš„ä¼ é€é—¨1234env = Environment()hello = env.Program('hello.c')env.Install('/usr/bin', hello)env.Alias('install', '/usr/bin') å¤šå¹³å°é…ç½®ï¼ˆAutoconfåŠŸèƒ½ä¸»è¦æ˜¯æ£€æŸ¥æŸäº›ä¾èµ–çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ç­‰ç­‰.ä¼ é€é—¨ ä»ä»£ç å­˜å‚¨åº“æ„å»ºä¼ é€é—¨ ç¼–å†™æ‰«æä»ªä¼ é€é—¨ Not Writing a Builder: the Command Builderä¸»è¦æ˜¯è‡ªå®šä¹‰å†™æ„é€ å™¨çš„ç®€åŒ–ç‰ˆæœ¬ä¼ é€é—¨ Pseudo-Builders: the AddMethod function(ä¼ªé€ æ„å»ºèµ·, æ·»åŠ æ–¹æ³•)è¿™ä¸ªä¸œè¥¿ä¸ªè‡ªå®šä¹‰å·¥å…·å·®ä¸å¤šä¼ é€é—¨","tags":[{"name":"python","slug":"python","permalink":"https://leng521.top/tags/python/"},{"name":"c++","slug":"c","permalink":"https://leng521.top/tags/c/"},{"name":"scons","slug":"scons","permalink":"https://leng521.top/tags/scons/"}]},{"title":"sconsè‡ªåŠ¨æ„å»ºå·¥å…·","date":"2018-12-23T15:00:52.000Z","path":"/posts/79065537/","text":"è¿™ç¯‡æ–‡ç« å¯èƒ½æœ‰ç‚¹é•¿,å¦‚æœä½ æƒ³è¦å­¦åˆ°ä¸€äº›çŸ¥è¯†,è€Œä¸æ˜¯ç®€å•å…¥é—¨,ä½ è¦æœ‰è€å¿ƒçš„çœ‹ä¸‹å»,å½“ç„¶åœ¨çœ‹çš„æ—¶å€™,ä¹Ÿè¦è‡ªå·±æ€è€ƒ,ä¹Ÿè®¸æˆ‘å†™çš„æœ‰é—®é¢˜,è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥å†å»çœ‹çœ‹,å®˜æ–¹æ–‡æ¡£.è¿™ä¸ªæ•™ç¨‹ç”±äºå†…å®¹å¤ªå¤š,æœ‰äº›è¿˜æ²¡æ¥å¾—åŠå†™.ä¸€èˆ¬æˆ‘è¿™é‡Œä¸ä¼šå¤ªå¤šçš„å»,ä»‹ç»å®ƒçš„å†å²,å’Œå®ƒæ˜¯å¹²å•¥çš„,ä½ å¯ä»¥è‡ªå·±å»æ‰¾åº¦å¨˜å»äº†è§£.æˆ‘è¿™é‡Œåªæœ‰é€»è¾‘å’Œäº‹ä¾‹ä»£ç . å·¥å…·ç‰ˆæœ¬: 3.0.1scons user guide scons user guide scons æ™®é€šç®€å•çš„æ„å»º123456789// file name main.cpp#include &lt;iostream&gt;int main(int argc, char const *argv[])&#123; using namespace std; cout&lt;&lt; \"helloworld\" &lt;&lt; endl; return 0;&#125; 12#!/usr/bin/env pythonProgram('main.cpp') å¤šä¸ªæ–‡ä»¶æ„å»º12345678910111213141516171819202122232425262728293031#!/usr/bin/env python# æ„å»ºå¤šä¸ªæ–‡ä»¶Program(['main.cpp','other.cpp'])# ä½¿ç”¨ åŒ¹é… çš„æ–¹å¼é€‰æ‹©æ„å»ºçš„çš„æ–‡ä»¶# å¯ä»¥ä½¿ç”¨ Glob()Program(Glob('*.cpp'))Glob() =&gt; åŒ¹é…çš„æ–¹å¼æœ‰ä¸ª- * é€šé…ç¬¦- ? åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦- [abc] åŒ¹é…ä»»æ„ä¸€ä¸ªç¬¦- [!abc] è¾“äº†abc ä¹‹å¤–çš„å­—ç¬¦Splitå‡½æ•° sconsä¸ºäº†æ–¹ä¾¿å¯ä»¥ä½¿ç”¨ åˆ†å‰²å‡½æ•°ä¸€ç©ºæ ¼åˆ†å‰²åŒæ ·åšåˆ° å¤šæ–‡ä»¶ç¼–è¯‘Program(\"HelloWorld\",Split(\"main.c other.c\"))Program(\"HelloWorld\",Split(\"\"\" main.c other.c\"\"\"))å…è®¸ä½¿ç”¨ å¤šè¡Œå­—ç¬¦ä¸²scons ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡å®šå‚æ•°çš„å½¢å¼è°ƒç”¨src_files = Split('main.c file1.c file2.c')Program(target = 'program', source = src_files)å½“ç„¶ä¹Ÿå¯ä»¥åè½¬å‚æ•°src_files = Split('main.c file1.c file2.c')Program(source = src_files, target = 'program') Object æ„å»ºæ–¹æ³•1234Object('main.c')åœ¨ POSIX ç³»ç»Ÿä¸Šäº§ç”Ÿ *.o æ–‡ä»¶åœ¨ windows ç³»ç»Ÿä¸Šäº§ç”Ÿ *.obj æ–‡ä»¶ æ¸…æ¥šæ„å»ºå¯¹ä¸­äº§ç”Ÿçš„å¯¹è±¡1scons -c è®©scons ç®€ä»‹è¾“å‡º1scons -Q è®¾ç½®å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—12345Program(\"HelloWorld\",\"main.cpp\")åœ¨æ„å»ºç›®å½•ä¸‹äº§ç”Ÿ åå­—å« HelloWorld.exe çš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨ POSIX ç³»ç»Ÿä¸Šäº§ç”Ÿ HelloWorld çš„å¯æ‰§è¡Œæ–‡ä»¶å¦‚æœä¸åœ¨ ç¬¬ä¸€ä¸ªå‚æ•° æŒ‡å®š å¯æ‰§è¡Œæ–‡ä»¶çš„åå­— é‚£ä¹ˆå°†ä¼šä½¿ç”¨ ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„åå­— ä¸ºå¯æ‰§è¡Œç¨‹åºçš„åå­— æ„å»ºå¤šä¸ªå¯æ‰§è¡Œç¨‹åº1234Program('H1',['main.c'])Program('H2',['main1.c'])åªéœ€è¦è°ƒç”¨å¤šé Program è¿™ä¸ªæ„é€ å™¨å°±è¡Œäº† å¤šä¸ªå¯æ‰§è¡Œç¨‹åº ä½¿ç”¨å…±åŒçš„æºæ–‡ä»¶123456common = [\"common1.c\", \"common2.c\"]program1 = [\"pro1.c\"] + commonprogram2 = [\"pro2.c\"] + commonProgram(\"pro1\",program1)Program(\"pro2\",program2)) æ„å»º Library(åº“)ä»æºæ–‡ä»¶ä¸­12345678910Library('haha',['main.c'])ä½ å¯ä»¥æ··åˆæ„å»ºæœ€ç»ˆçš„åº“ scons å¯ä»¥è¯†åˆ«å‡ºæ¥é‚£äº›éœ€è¦ç¼–è¯‘ è¿™ä¸ªåªä¼šç¼–è¯‘ main.cLibrary('haha',['main.c','common.o'])æ„å»ºé™æ€åº“StaticLibrary()æ„å»ºåŠ¨æ€åº“SharedLibrary() é“¾æ¥åº“1234567891011121314LIBS =&gt; æŒ‡å®šè¦é“¾æ¥çš„åº“çš„åå­—LIBPATH =&gt; è¦è¿æ¥åº“åå­—çš„è·¯å¾„Library('foo', ['f1.c', 'f2.c', 'f3.c'])Program('prog.c', LIBS=['foo', 'bar'], LIBPATH='.')è¿™é‡Œå¯ä»¥ç®€å†™ å¦‚æœæ˜¯ä¸€ä¸ª ç›´æ¥å†™åº“åå­— ä¸éœ€è¦å†™æˆä½¿ç”¨ åˆ—è¡¨ åŒ…ä¸€å±‚Library('foo', ['f1.c', 'f2.c', 'f3.c'])Program('prog.c', LIBS='foo', LIBPATH='.')å¤šä¸ªåº“è·¯å¾„å¯ä»¥ä½¿ç”¨ å¦‚ä¸‹æ ¼å¼['/home/libs','/home/gg/libs']'/home/libs:/home/gg/libs'(POSIXç³»ç»Ÿä¸Šçš„å†’å·ï¼š)'C:\\\\libs;C:\\\\gg\\\\libs'(Windowsç³»ç»Ÿä¸Šçš„åˆ†å·;) æ„é€ å…¶æ–¹æ³•è¿”å›èŠ‚ç‚¹åˆ—è¡¨1234567891011121314è¿™ä¹ˆåšçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬å†™çš„ æ„å»ºæ–‡ä»¶æ˜¯å¹³å°çš„ä¸åŒå¹³å° ç¼–è¯‘åçš„æ–‡ä»¶åç¼€ä¸ä¸€æ ·(a.obj(Windows), a.o(Lunix)) æ‰€ä»¥ scons å¸®æˆ‘ä»¬å¤„ç†äº†è¿”å›èŠ‚ç‚¹åˆ—è¡¨ soncs å»å¤„ç†è¿™äº›å·®å¼‚hello_list = Object('hello.c', CCFLAGS='-DHELLO')goodbye_list = Object('goodbye.c', CCFLAGS='-DGOODBYE')Program(hello_list + goodbye_list)æ‰“å°èŠ‚ç‚¹åˆ—è¡¨print(hello_list[0]) // hello.obj(Windows)åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨if not os.path.exists(program_name): print('ä¸å­˜åœ¨') æ¸…æ™°åŒºåˆ† ç›®å½•èŠ‚ç‚¹ å’Œ æ–‡ä»¶èŠ‚ç‚¹12345678hello_c = File('hello.c')Program(hello_c)ç›®å½•èŠ‚ç‚¹Dir()ä¸çŸ¥é“æ˜¯ ç›®å½•è¿˜æ˜¯æ–‡ä»¶Entry() ä»ä¸€ä¸ªèŠ‚ç‚¹æˆ–å­—ç¬¦ä¸²è·å–è·¯å¾„123env=Environment(VAR=\"value\")n=File(\"foo.c\")print(env.GetBuildPath([n, \"sub/dir/$VAR\"])) é‡å¤æ„å»º scons å¯ä»¥è¯†åˆ«å‡ºæ¥ ä¼šå‡ºç° scons: `.â€™ is up to date. æŒ‡å‡ºå·²ç»æ˜¯æœ€æ–°çš„äº† è‡ªå®šä¹‰ Decider(â€˜MD5â€™) è‡ªå®šä¹‰ é‡æ„è§„åˆ™ Decider(â€˜MD5â€™) é»˜è®¤æ˜¯ä½¿ç”¨ md5 è®°å½•ä¸€ä¸ªæ–‡ä»¶æ˜¯å¤Ÿéœ€è¦ä»æ–°æ„å»ºç”šè‡³ å¯ä»¥ä½¿ç”¨ â€˜contentâ€™ ä»£è¡¨åŒåè¯ md5 çš„ç¼ºé™·æ˜¯ å¦‚æœä¿®æ”¹äº†æ³¨é‡Š scons ä¹Ÿè®¤ä¸º æ²¡æœ‰ä¿®æ”¹Decider(â€˜makeâ€™) åªè¦æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ”¹å˜å°±ä»æ–°æ„å»º åŒä¹‰è¯ â€˜timestamp-newerâ€™(åˆ¤å®šè§„åˆ™æ˜¯ æ¯”ä¸Šæ¬¡æ„å»ºçš„æ—¶é—´æˆ³æ–° å°±ä»æ–°æ„å»º ä½†æ˜¯æœ‰çš„ä½¿ç”¨ä¼šç¢°åˆ° æ–‡ä»¶è¿˜åŸ è¿™æ ·å°±ä¼šå‡ºç° ä¹‹å‰æ„å»ºçš„æ—¶å€™ æ¯” ç°åœ¨çš„ æ–° ä¸‹é¢çš„ è®°å½•è§„åˆ™ å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜)â€˜timestamp-matchâ€™ åŒ¹é…æ—¶é—´æˆ³æ˜¯å¦ä¸æ„å»ºçš„æ—¶å€™ä¸€æ ·,â€˜MD5-timestampâ€™ åˆ¤å®šè§„åˆ™æ˜¯ MD5 å’Œ æ—¶é—´é”™éƒ½æ”¹å˜çš„æ—¶å€™ åœ¨é‡æ–°æ„å»º (å¦‚æœåœ¨SConsæ„å»ºæ–‡ä»¶çš„æœ€åä¸€ç§’å†…ä¿®æ”¹äº†æºæ–‡ä»¶ è¿™ç§æƒ…å†µå¯èƒ½ä¸åˆé€‚, ä½†æ˜¯åŸºæœ¬å¯èƒ½ä¸å­˜åœ¨) ç¼–å†™è‡ªå®šä¹‰Deciderå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960Program('hello.c')def decide_if_changed(dependency, target, prev_ni): if self.get_timestamp() != prev_ni.timestamp: dep = str(dependency) tgt = str(target) if specific_part_of_file_has_changed(dep, tgt): return True return FalseDecider(decide_if_changed)å±•å¼€ç¬¬ä¸‰ä¸ªå‚æ•°params : prev_ni : .csig The content signature, or MD5 checksum, of the contents of the dependency file the list time the target was built. .size The size in bytes of the dependency file the list time the target was built. .timestamp The modification time of the dependency file the list time the target was built.å½“ç¬¬ä¸€æ¬¡æ„å»ºçš„æ—¶å€™ è¿™ä¸ªå‚æ•° prev_ni ä¸å­˜åœ¨è¯»è¿™äº›ä¸œè¥¿çš„æ—¶å€™éœ€è¦é™å¿ƒè§‚çœ‹ ä¸ç„¶å°±å¯èƒ½çœ‹ä¸æ‡‚å‘¦env = Environment()def config_file_decider(dependency, target, prev_ni): import os.path # We always have to init the .csig value... # è·å–ä¾èµ–æ–‡ä»¶çš„ç­¾åä¿¡æ¯ dep_csig = dependency.get_csig() # .csig may not exist, because no target was built yet... if 'csig' not in dir(prev_ni): return True # Target file may not exist yet if not os.path.exists(str(target.abspath)): return True if dep_csig != prev_ni.csig: # Some change on source file =&gt; update installed one return True return Falsedef update_file(): f = open(\"test.txt\",\"a\") f.write(\"some line\\n\") f.close()update_file()# Activate our own decider functionenv.Decider(config_file_decider)env.Install(\"install\",\"test.txt\")ä¸åŒçš„ç¯å¢ƒä½¿ç”¨ä¸åŒ åˆ¤å®šè§„åˆ™env1 = Environment(CPPPATH = ['.'])env2 = env1.Clone()env2.Decider('timestamp-match')env1.Program('prog-MD5', 'program1.c')env2.Program('prog-timestamp', 'program2.c') éšå¼æ„é€ å˜é‡123456789/* main.c */#include &lt;hello.h&gt;int main()&#123; printf(\"Hello, %s!\\n\", string);&#125;/* hello.h */#define string \"world\" 123456# SconsturctProgram('hello.c', CPPPATH = '.')ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª è·¯å¾„ ä¹Ÿå¯ä»¥åƒ LIBPATH é‚£æ ·Program('hello.c', CPPPATH = ['include', '/home/project/inc'])Window åˆ†å‰²ç¬¦æ˜¯ åˆ†å· (;) Linux åˆ†éš”ç¬¦æ˜¯ å†’å·(:)Program('hello.c', CPPPATH = 'include:/home/project/inc') ç¼“å­˜éšå¼ä¾èµ–å…³ç³»1SetOptionï¼ˆ'implicit_cache'ï¼Œ1ï¼‰ æˆ–åˆ™æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œ scons -Q â€“implicit-cache scons -Q â€“implicit-deps-changed é€šçŸ¥ scons è·Ÿæ–°éšå¼ç¼“å­˜ ä¾èµ–çš„æ–‡ä»¶æ”¹å˜æ—¶ scons -Q â€“implicit-deps-unchanged å¼ºåˆ¶åŠæ—¶ä¾èµ–çš„æ–‡ä»¶æ”¹å˜æ—¶ ä»ç„¶ä½¿ç”¨ ç¼“å­˜ä¾èµ– æ˜¾ç¤ºä¾èµ–å…³ç³»æœ‰çš„æ—¶å€™ scons æ²¡æœ‰æ‰«æ(detected)åˆ°ä¾èµ–å…³ç³»çš„æ—¶å€™ scons å…è®¸ä½  æ˜¾ç¤ºæŒ‡å®š ä¾èµ–å…³ç³» 12345678hello = Program('hello.c')Depends(hello, 'other_file')Depends çš„ç¬¬äºŒä¸ªå‚æ•° ä¹Ÿå¯ä»¥æ˜¯èŠ‚ç‚¹ åˆ—è¡¨hello = Program('hello.c')goodbye = Program('goodbye.c')Depends(hello, goodbye) å¤–éƒ¨æ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼šParseDepends åŠŸèƒ½123456#define FOO_HEADER &lt;foo.h&gt;#include FOO_HEADERint main() &#123; return FOO;&#125; ä¸Šé¢è¿™ç§æƒ…å†µ scons å¯èƒ½æ— æ³• çŸ¥é“ä¾èµ–å…³ç³» 1234obj = Object('hello.c', CCFLAGS='-MD -MF hello.d', CPPPATH='.')SideEffect('hello.d', obj)ParseDepends('hello.d') Program('hello', obj) å€ŸåŠ©ç¼–è¯‘å™¨ å¯¹å®çš„å±•å¼€ å¹¶ç”Ÿæˆä¸€ä¸ª .d çš„æ–‡ä»¶ ç¬¬ä¸€æ¬¡ scons æ— æ³•æ£€æµ‹ä¾èµ– ç¬¬äºŒæ¬¡ scons å¯ä»¥æ ¹æ®ç”Ÿæˆçš„ .dçš„æ–‡ä»¶ç¡®å®šä¾èµ–å…³ç³» å¿½ç•¥ä¾èµ–é¡¹12345678910111213hello_obj=Object('hello.c')hello = Program(hello_obj)Ignore(hello_obj, 'hello.h')ä¸Šé¢çš„ä¾‹å­å¯èƒ½å¾ˆéš¾æƒ³è±¡ å®ƒä¾èµ–çš„å¤´æ–‡ä»¶ æ”¹å˜äº† ä¸ä»æ–°ç¼–è¯‘æœ‰ä¸€ç§æƒ…å†µ æ¯”å¦‚å¤šä¸ªç³»ç»Ÿ ä½¿ç”¨åŒä¸€ä¸ª å¤´æ–‡ä»¶ æ¯ä¸ªç³»ç»Ÿçš„å¤´æ–‡ä»¶ ä¼šæœ‰ç•¥å¾®çš„å·®å¼‚æ­¤æ—¶ä¾èµ–çš„å¤´æ–‡ä»¶æ”¹å˜äº† ä½†æ˜¯ä¸éœ€è¦é‡æ–°ç¼–è¯‘hello = Program('hello.c', CPPPATH=['/usr/include'])Ignore(hello, '/usr/include/stdio.h')hello_obj=Object('hello.c')hello = Program(hello_obj)Ignore('.',[hello,hello_obj]) AlwaysBuild12hello = Program('hello.c')AlwaysBuild(hello) æ„é€ ç¯å¢ƒfeatureçš„ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107åˆ›å»ºæ–°çš„ æ„é€ ç¯å¢ƒenv = Environment()ä¸€ä¸ªç®€å•çš„ä¾‹å­ è®¾ç½® cç¼–è¯‘å™¨ env = Environment(CC = 'gcc', CCFLAGS = '-O2') env.Program('foo.c')è®¿é—®æ„é€ ç¯å¢ƒçš„å„ä¸ªå˜é‡ (å®ƒæ˜¯ä¸ªå…·æœ‰å…³è”æ–¹æ³•çš„å¯¹è±¡)env = Environment()print(\"CC is: %s\"%env['CC'])å¦‚æœä½ ä»…ä»…æ˜¯è®¿é—®ä»–çš„æ„é€ å˜é‡,ä½ å¯ä»¥è¿™æ ·åš è°ƒç”¨æ„é€ ç¯å¢ƒçš„ Dictionary æ–¹æ³•env = Environment(FOO = 'foo', BAR = 'bar')dict = env.Dictionary()for key in ['OBJSUFFIX', 'LIBSUFFIX', 'PROGSUFFIX']: print(\"key = %s, value = %s\" % (key, dict[key]))on Windows &gt; OBJSUFFIX =&gt; .obj LIBSUFFIX =&gt; .lib PROGSUFFIX =&gt; .exeon Linux &gt; OBJSUFFIX =&gt; .o LIBSUFFIX =&gt; .a PROGSUFFIX =&gt; è·å–æ„é€ ç¯å¢ƒä¸­çš„å˜é‡ æ–¹æ³•2ä½¿ç”¨ subst() æ–¹æ³• ä½¿ç”¨ $ + å˜é‡å­—æ®µ çš„æ–¹å¼è®¿é—®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯ å®ƒå¯ä»¥å°†æ„é€ å˜é‡å±•å¼€env = Environment()print(\"CC is: %s\"%env.subst('$CC'))# $CCCOMå¤„ç† å˜é‡ å±•å¼€å¸¦æ¥çš„é—®é¢˜å¦‚æœè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡æ˜¯ scons å¹¶ä¸ä¼šæŠ¥é”™ å¦‚æœæƒ³è¦æŠ¥é”™ä½ å¯ä»¥è¿™æ ·åšAllowSubstExceptions() å¼€å§‹ ä½¿ç”¨ subst å‡½æ•°å¼‚å¸¸çš„åŠŸèƒ½ è¿™æ˜¯ä¸ªå…¨å±€å˜é‡é™¤äº†å®šä¹‰é»˜è®¤çš„å¼‚å¸¸å¤– è¿˜å¯ä»¥å®šä¹‰ å…¶ä»–å¼‚å¸¸å¦‚ é›¶é™¤å¼‚å¸¸AllowSubstExceptions(IndexError, NameError, ZeroDivisionError)env = Environment()print(\"value is: %s\"%env.subst( '-&gt;$&#123;1 / 0&#125;&lt;-' ))åˆ›å»ºé»˜è®¤çš„ æ„é€ ç¯å¢ƒ å¯ä»¥è®¾ç½® ç›®æ ‡ç¼–è¯‘å™¨DefaultEnvironment(CC = '/usr/local/bin/gcc')å½“ç„¶ä¹Ÿå¯ä»¥è¿™æ ·åšenv = DefaultEnvironment()env['CC'] = '/usr/local/bin/gcc'ä½¿ç”¨ DefaultEnvironment() å¯ä»¥åŠ å¿«ä½ åˆå§‹åŒ–æ„é€ å˜é‡åœ¨åˆå§‹åŒ–æ—¶ scons ä¼šåœ¨ ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­æœç´¢ å¯ç”¨çš„ ç¼–è¯‘å™¨ è¿æ¥å™¨ç­‰ ä½ å¯ä»¥æŒ‡å®š æœç´¢çš„ å·¥å…· åŠ å¿«sconsçš„åˆå§‹åŒ–é€Ÿåº¦ ä½ å¯ä»¥è¿™æ ·åšç›´æ¥æŒ‡å®š ç¼–è¯‘å·¥å…· é“¾æ¥å·¥å…· æŒ‡å®š cç¼–è¯‘å™¨ ä¸ºgccenv = DefaultEnvironment(tools = ['gcc', 'gnulink'], CC = '/usr/local/bin/gcc')å¤šæ„é€ ç¯å¢ƒ ä½ å¯ä»¥è¿™æ ·åš ä¸åŒçš„æ„é€ ç¯å¢ƒ ä½¿ç”¨ä¸åŒçš„é…ç½®opt = Environment(CCFLAGS = '-O2')dbg = Environment(CCFLAGS = '-g')opt.Program('foo', 'foo.c')dbg.Program('foo', 'foo.c')--------------------------------------äº§ç”Ÿç¼–è¯‘äº§ç‰© *.obj(on Windows)opt = Environment(CCFLAGS = '-O2')dbg = Environment(CCFLAGS = '-g')o = opt.Object('foo-opt', 'foo.c')opt.Program(o)d = dbg.Object('foo-dbg', 'foo.c')dbg.Program(d)å…‹éš†å½“å‰çš„ç¯å¢ƒå˜é‡å…‹éš†ä¸€ä»½ä¸€æ¨¡ä¸€æ ·çš„æ„é€ ç¯å¢ƒenv = Environment(CC = 'gcc')opt = env.Clone(CCFLAGS = '-O2')dbg = env.Clone(CCFLAGS = '-g')env.Program('foo', 'foo.c')o = opt.Object('foo-opt', 'foo.c')opt.Program(o)d = dbg.Object('foo-dbg', 'foo.c')dbg.Program(d)æ›¿æ¢æ„é€ ç¯å¢ƒenv = Environment(CCFLAGS = '-DDEFINE1')env.Replace(CCFLAGS = '-DDEFINE2')env.Program('foo.c')ä»…åœ¨å°šæœªå®šä¹‰çš„æƒ…å†µä¸‹è®¾ç½®å€¼env.SetDefault(SPECIAL_FLAG = '-extra-option')é™„åŠ åˆ°æ„é€ å˜é‡æœ«å°¾env = Environment(CCFLAGS = ['-DMY_VALUE'])env.Append(CCFLAGS = ['-DLAST'])env.Program('foo.c')é™„åŠ å”¯ä¸€å€¼Some times it's useful to add a new value only if the existing construction variable doesn't already contain the value. This can be done using the AppendUnique method:å®˜æ–¹è§£é‡Š: æœ‰æ—¶ å®ƒæ˜¯æœ‰ç”¨çš„ åœ¨è¿™ä¸ªæ„é€ å˜é‡æ²¡æœ‰åŒ…å«è¿™ä¸ªå˜é‡çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªæ–°å€¼ , è¿™æ ·å¯ä»¥ä½¿ä½¿ç”¨è¿™ä¸ª æ–¹æ³•åšenv.AppendUnique(CCFLAGS=['-g'])In the above example, the -g would be added only if the $CCFLAGS variable does not already contain a -g value.è§£é‡Š: åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­, -g æ ‡è¯†å°†è¢«æ·»åŠ  ä»…ä»…è¿™ä¸ª $CCFLAGS å˜é‡æ›¾æ²¡æœ‰åŒ…å«è¿™ä¸ª -g çš„æ ‡è¯†é™„åŠ åˆ°å€¼çš„å¼€å¤´env = Environment(CCFLAGS = ['-DMY_VALUE'])env.Prepend(CCFLAGS = ['-DFIRST'])env.Program('foo.c')é™„åŠ å”¯ä¸€å€¼åˆ°å¼€å¤´ å’Œä¸Šé¢åœ¨ç»“å°¾é™„åŠ å€¼ çš„ é€»è¾‘æ˜¯ä¸€æ ·çš„env.PrependUniqueï¼ˆCCFLAGS = [ ' - G']ï¼‰","tags":[{"name":"python","slug":"python","permalink":"https://leng521.top/tags/python/"},{"name":"c++","slug":"c","permalink":"https://leng521.top/tags/c/"},{"name":"scons","slug":"scons","permalink":"https://leng521.top/tags/scons/"}]},{"title":"cocos2dx-JS-OC-Javaäº’ç›¸è°ƒç”¨","date":"2018-12-15T02:21:49.000Z","path":"/posts/41d43874/","text":"cocos2dx js java oc å’Œ js çš„ç›¸äº’è°ƒç”¨å¼•æ“ç‰ˆæœ¬: 3.17è¯­è¨€: jsXcode: 10.1AndroidStudio: 3.2.1æ—¶é—´: 2018å¹´12æœˆ14æ—¥16:23:47 çœ‹è¿™ç¯‡æ–‡ç« éœ€è¦ ä¼šä¸€äº› android java oc ios çš„ä¸€äº›çŸ¥è¯†çš„åŸºç¡€ ä¸ç„¶çœ‹ç€å¯èƒ½æœ‰ç‚¹è´¹åŠ². jsè°ƒç”¨javajs è°ƒç”¨ java javaä¸­å£°åçš„æ–¹æ³•éœ€è¦æ˜¯é™æ€æ–¹æ³•(static method) Android å¹³å°ä¸‹123456if(cc.sys.os == cc.sys.OS_ANDROID)&#123; jsb.reflection.callStaticMethod('ç±»ååŠ å…¨è·¯å¾„','æ–¹æ³•åå­—','æ–¹æ³•çš„ç­¾å','ä¼ é€’å‚æ•°');&#125;ej: js jsb.reflection.callStaticMethod('org/cocos2dx/javascript/AppActivity','getStrVdong','(Ljava/lang/String;)V','haha'); 1234567891011121314ej: javapublic static void getStrVdong(String str) &#123; log.i('cocso2dx-js js call java', str);&#125; å…¶ä»–æ–¹æ³•ç­¾åçš„å†™æ³•ej: (Ljava/lang/String;)V //å‚æ•°æ˜¯å­—ç¬¦ä¸² æ²¡æœ‰è¿”å›å€¼ (I)V // void(int); ()V // void(); (IZ)V // void(int,boolean); (IZ)Z // boolean(int,boolean); ()Ljava/lang/String; //String(); æ”¯æŒä¼ é€’çš„æ•°æ®ç±»å‹ Z å¸ƒå°” I int F float å­—ç¬¦ä¸² Ljava/lang/String; æ³¨æ„è¿™é‡Œæœ‰ä¸ªå­—ç¬¦ä¸²æ˜¯æœ‰ä¸ªåˆ†å·çš„ javaè°ƒç”¨jsjavaè°ƒç”¨js å®é™…æ˜¯ å°†å­—ç¬¦ä¸²è½¬æˆ function ç„¶åè°ƒç”¨ 12345678910111213141516/* å¯¼å…¥éœ€è¦çš„åŒ… */import org.cocos2dx.lib.Cocos2dxJavascriptJavaBridge;import org.cocos2dx.lib.Cocos2dxHelper;/*è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è°ƒç”¨ js ä»£ç éœ€è¦è¿è¡Œåœ¨ GL çº¿ç¨‹ä¸­è¿™é‡Œå®ç°çš„é€»è¾‘æ˜¯ å°†å›è°ƒçš„é€»è¾‘ç§»äº¤åˆ° js ä»£ç å±‚ä¸­, è¿™æ ·å°±å¯ä»¥åœ¨ js ä¸­ å†™é€»è¾‘ java åœ¨åˆé€‚çš„æ—¶æœºå»æ‰§è¡Œè¿™ä¸ªè°ƒç”¨ æ¯”å¦‚åœ¨åšæ”¯ä»˜çš„æ—¶å€™ éœ€è¦åœ¨ä¹‹åå“åº”ååœ¨ åšæ¸¸æˆé€»è¾‘çš„å¤„ç†.*/public static void callFuncVdong(final String code) &#123; Cocos2dxHelper.runOnGLThread(new Runnable()&#123; @Override public void run() &#123; Cocos2dxJavascriptJavaBridge.evalString(code); &#125; &#125;);&#125; 123456789/*å†™ä¸€ä¸‹ js è°ƒç”¨çš„ä¾‹å­*/ej: jsb.reflection.callStaticMethod( \"org/cocos2dx/javascript/AppActivity\", \"callFuncVdong\", \"(Ljava/lang/String;)V\", \"g_funcList.callFunc()\"); /*å‘¼å«ä¸€ä¸ªå…¨å±€å‡½æ•°*/ é—®é¢˜è®°å½•jsè°ƒç”¨ java æ²¡ååº” æœ‰å¾ˆå¤§çš„å‡ ç‡æ˜¯ jsè°ƒç”¨ä¸­ æ–¹æ³•ç­¾åæ²¡æœ‰å†™æ­£ç¡® ä½ éœ€è¦æ£€æŸ¥ä½ çš„å†™æ³• å…·ä½“çš„å†™æ³•ä¸Šé¢æœ‰å†™çš„. js è°ƒç”¨ ocjs è°ƒç”¨ oc å…¶å®å’Œ Javaçš„å†™æ³•æ˜¯å¤§åŒå°å¼‚çš„ åœ¨ ios/AppController.h ä¸­å£°å é™æ€å‡½æ•° 1+(NSString *) showVdong:(NSString *)str title:(NSString *)tit; åœ¨ ios/AppController.mm æ–‡ä»¶ä¸­å®ç° 123456789@implementation// åœ¨è¿™ä¸ªä¹‹é—´å®ç°å‡½æ•°+(NSString *) showVdong:(NSString *)str title:(NSString *)tit &#123; return @\"haha\";&#125;@end js è°ƒç”¨ç”¨ä¾‹ 1234if(cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX) &#123; var ret = jsb.reflection.callStaticMethod(\"AppController\",\"showVdong:title\",\"ä½ æ˜¯è°???\",\"å¤©å‘¢\"); cc.log('****************',ret);&#125; oc è°ƒç”¨ js åœ¨ ios/AppController.mm æ–‡ä»¶ä¸­å®ç° 12345678#include \"cocos/scripting/js-bindings/manual/ScriptingCore.h\"+(NSString *) showVdong:(NSString *)str title:(NSString *)tit &#123; ScriptingCore::getInstance()-&gt;evalString(\"test\"); return @\"haha\";&#125; js ä¸­çš„æµ‹è¯•ç”¨ä¾‹ 123var test = function() &#123; cc.log(\"OC call JS success !!!\");&#125; å‚è€ƒåœ°å€(è¿™ä¸ªæ˜¯CocosCreatoråŸç”Ÿæ¸¸æˆè°ƒç”¨) &gt; https://www.cnblogs.com/billyrun/articles/8529503.html","tags":[{"name":"cocos2d-x","slug":"cocos2d-x","permalink":"https://leng521.top/tags/cocos2d-x/"}]},{"title":"AndroidStudioæ‰“åŒ…Cocos2dx","date":"2018-12-08T03:05:57.000Z","path":"/posts/a2412c06/","text":"å‰å‡ å¤©é—²ç€æ²¡äº‹,å»å¼„äº†ä¸€ä¸‹AndroidStudioæ‰“åŒ…æœ€æ–°ç‰ˆ cocos2dx ç³»åˆ—åŸç”Ÿå¹³å°çš„å®‰è£…åŒ…. å¼•æ“ç‰ˆæœ¬: 3.17AndroidStudioç‰ˆæœ¬: 3.2.1SDK: 27NDK: android-ndk-r16bgradle: 4.1 é¦–å…ˆæä¾›è¿™å‡ ä¸ªä¸‹è½½åœ°å€,æœ‰çš„å¯èƒ½éœ€è¦ç¿»å¢™,è¿™ä¸ªä½ ä»¬è‡ªå·±è§£å†³. gradleandroid sdk android studio è‡ªå¸¦æœ‰ä¸‹è½½çš„ç®¡ç†å™¨anroid ndkandroid studiococos2dx-ç³»åˆ— æŠ¥é”™è®°å½•Gradle sync failed: SSL peer shut down incorrectly æŸ¥è¿™ä¸ªè·¯å¾„ä¸‹ gradleâ€“&gt;wrapperâ€“&gt;gradle-wrapper.properties è¦ä¸‹è½½ gradle ç‰ˆæœ¬ ej:distributionUrl=https\\://services.gradle.org/distributions/gradle-4.1-all.zip gradleä¸‹è½½åœ°å€ åˆ é™¤åŸå…ˆçš„èµ„æº å­˜æ”¾åˆ°ä¸‹é¢è·¯å¾„ä¸‹ C:\\Users\\Administrator.gradle\\wrapper\\dists\\gradle-4.1-all\\bzyivzo6n839fup2jbap0tjew è®°ä½ä¸€å®šè¦æ”¾åˆ°è¿™ä¸ªä¹±ç çš„æ–‡ä»¶å¤¹ä¸­ å¦‚æœä¸Šé¢çš„æ­¥éª¤ä½ ä½ æŠŠandroidéšæœºç”Ÿæˆçš„æ–‡ä»¶å¤¹(bzyivzo6n839fup2jbap0tjew) åˆ äº† ä½ å¯ä»¥æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ D:\\pro\\cocos_pro\\testCocosJs\\frameworks\\runtime-src\\proj.android\\gradlew.bat æ‰§è¡Œè¿™ä¸ªè„šæœ¬ä¹Ÿå¯ä»¥. æ‰§è¡Œä½ è¿™é‡Œé¢çš„è¿™ä¸ªé¢„å¤„ç†è„šæœ¬,å®ƒä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªç±»ä¼¼äºä¸Šé¢ä¸ªæ–‡ä»¶å¤¹,ä¸è¦å¸Œæœ›è¿™ä¸ªè„šæœ¬èƒ½å¤Ÿä¸‹è½½å¥½ä½ æƒ³è¦çš„ gradle ç‰ˆæœ¬.è¿™ä¼šå¾ˆæ…¢,å¯ä»¥ç›´æ¥åœæ‰è¿™ä¸ªæ‰¹å¤„ç†.æ‰§è¡Œè¿™ä¸€æ­¥çš„ç›®çš„æ˜¯ä¸ºäº†ç”Ÿæˆ ä¸Šé¢ç±»ä¼¼çš„æ–‡ä»¶å¤¹(bzyivzo6n839fup2jbap0tjew). å½“ç„¶å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ¡ˆä¹Ÿå¯ä»¥. No cached version of com.android.tools.build:gradle:3.0.0 available for offline mode. File/setting/buildâ€¦/gradle/Offline work ç¦æ‰ å¦‚æœ gradle åŒæ­¥çš„å¾ˆæ…¢å¯ä»¥ä½¿ç”¨ é•œåƒå·¥ç¨‹ æ›¿æ¢proj.adnroid/build.gradle ä¸­çš„åœ°å€æ›¿æ¢ä¸ºé•œåƒåº“ maven { url â€˜https://maven.aliyun.com/repository/google&#39; } maven { url â€˜https://maven.aliyun.com/repository/jcenter&#39; } maven { url â€˜http://maven.aliyun.com/nexus/content/groups/public&#39; } æˆ‘è¿™ä¸ªä¸‹é¢æœ‰æˆªå›¾ å®˜æ–¹æä¾›çš„æ‰“åŒ…é…ç½® åœ°å€ å®˜æ–¹æ‰“åŒ…é…ç½® No toolchains found in the NDK toolchains folder for ABI with prefix: mips64el-linux-android åœ¨ ndk çš„æ ¹ç›®å½•é‡Œé¢æœ‰ä¸ª toolchains çš„æ–‡ä»¶å¤¹ é‡Œé¢æ²¡æœ‰ è¿™ä¸ªæ–‡ä»¶ mips64el-linux-android åŸå› æ˜¯æˆ‘ç”¨çš„æ˜¯ r18 çš„ ä½†æ˜¯é‚£é‡Œé¢æ²¡æœ‰è¿™ä¸ªä¸œè¥¿,æˆ‘å»ä½¿ç”¨r16 é‡Œé¢å°±æœ‰è¿™ä¸ªä¸œè¥¿. ndk r9 ä¸‹è½½è·¯å¾„ æä¾›ä¸€ä¸‹r9çš„ä¸‹è½½è·¯å¾„ å› ä¸ºä¹‹å‰æ‰“åŒ… 3.15 æ˜¯ç”¨çš„æ˜¯ r9 æ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹åœ°å€ é˜²æ­¢åé¢æ‰¾ä¸åˆ°äº†, ä¸Šé¢ndk å½’æ¡£ åªæ˜¯åˆ°äº† r10. NDK r9dï¼š r9-x86-windowr9-x86_64-window[r9-x86-mac]http://dl.google.com/android/ndk/android-ndk-r9d-darwin-x86.tar.bz2ï¼ˆMacç¯å¢ƒï¼‰r9-x86-linuxr9-x86_64-linuxr9d-cxx-stl-libs-with-debug-info é…ç½®NDK ç¯å¢ƒå˜é‡ ANDROID_NDK_ROOT ç¼–è¯‘externalNativeBuildDebugå‡ºé”™ å¯èƒ½å‡ºç°è·¯å¾„å¤ªé•¿å¯¼è‡´ æ–‡ä»¶ æŸ¥æ‰¾å¤±è´¥(win10)ä¸‹é¢è·¯å¾„æœ‰ä¸ªå¤§ç¥å†™äº†ä¸ªè¡¥ä¸. [ä¿®å¤ndkæ‰“åŒ…é•¿è·¯å¾„æŸ¥æ‰¾å¤±è´¥]https://discuss.cocos2d-x.org/t/the-solution-of-ndk-compile-system-longpaths-issue-on-windows-platform/42705 è¿™ä¸ªæ‰“åŒ…è®°å½•æ˜¯çº¯å‡€çš„æ‰“åŒ…æ²¡æœ‰ä»‹å…¥ä»»ä½• sdk(å¦‚,å¾®ä¿¡çš„sdk facebook ç¬¬ä¸‰æ–¹å¹¿å‘Šå¹³å°(admob) ç­‰); æˆ‘çš„æ¯ç¯‡æ–‡ç« éƒ½ä¸å¸Œæœ›å†™çš„å¤ªé•¿,ä¸ç„¶çœ‹ç€éƒ½çƒ¦äºº. è¿™é‡Œä¹‹æ‰€ä»¥è®°å½•æ—¶é—´æ˜¯ä¸ºäº† æé†’ä¸€ä¸‹ é˜…è¯»è€…è¿™é‡Œä¹Ÿè®¸ä¸æ˜¯æœ€æ–°çš„,å¦‚æœå·²è¿‡å¾ˆé•¿æ—¶é—´,é‚£å°±ç»™ä½ æä¾›,ç»éªŒçš„å€Ÿé‰´å§. æ—¶é—´: 2018å¹´12æœˆ7æ—¥22:28:49","tags":[{"name":"cocos2d-x","slug":"cocos2d-x","permalink":"https://leng521.top/tags/cocos2d-x/"},{"name":"android studio","slug":"android-studio","permalink":"https://leng521.top/tags/android-studio/"}]},{"title":"è®°å½•TweenLiteåº“","date":"2018-11-21T13:45:42.000Z","path":"/posts/90e70f70/","text":"ä»Šå¤©ä¸»è¦è®°å½•ä¸€ä¸‹ TweenLite è¿™ä¸ªè¡¥é—´åŠ¨ç”»åº“,ä»–ä»¬çš„å®˜æ–¹åœ°å€TweenLiteå®˜æ–¹ç½‘å€ åº“ç‰ˆæœ¬æ˜¯:2.0.2 è¿™é‡Œé¢æœ‰å‡ ä¸ªæ–‡ä»¶å¯ä»¥ä½¿ç”¨ TweenLite TimelineLite TweenlineMax TweenMax æˆ‘è¿™é‡Œå°±ç®€å•è¯´ä¸€ä¸‹è¿™å‡ ä¸ªæ–‡ä»¶éƒ½åšäº†ä»€ä¹ˆäº‹æƒ…,è¯´å…ˆè¯´æ˜ä¸€ä¸‹æˆ‘è¿™é‡Œä¸»è¦ç ”ç©¶è·Ÿ CocosCreator ç›¸å…³çš„åŠŸèƒ½,å®ƒé‡Œé¢è¿˜æœ‰ä¸€äº›å…³äºh5çš„ä¸œè¥¿,æ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹. è®²è§£æ¯ä¸ªæ–‡ä»¶çš„åŠŸèƒ½TweenLiteè¿™ä¸ªæ˜¯ Tween åŠ¨ç”»çš„åŸºç¡€åº“, æ‰€æœ‰çš„å…¶ä»–æ›´ä¸°å¯Œçš„åŠŸèƒ½éƒ½æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå°è£…çš„. é‡Œé¢ä¸»è¦ä½¿ç”¨1TweenLite.to(target:Object, duration:Number, vars:Object) ç¬¬ä¸€ä¸ªæ˜¯æ“ä½œçš„å¯¹è±¡,ç¬¬äºŒä¸ªæ˜¯æ‰§è¡Œçš„æ—¶é—´,ç¬¬ä¸‰ä¸ªæ˜¯è¦è¿›è¡Œè¡¥é—´çš„å±æ€§. é¦–å…ˆä½ ä»¬è¦å¯¼å…¥è¿™ä¸ªæ–‡ä»¶(TweenLite.js)ä½ ä¸‹è½½çš„æ–‡ä»¶é‡Œé¢åº”è¯¥æ˜¯æœ‰ä¸ªå‹ç¼©åçš„æ–‡ä»¶ (TweenLite.min.js) è¿™ä¸ªæ›´çœç©ºé—´ ä¾‹å¦‚å¦‚ä¸‹çš„ä¾‹å­123456789import TweenLite from \"TweenLite.min\"function main() &#123; TweenLite.to(this.node,2,&#123;x:100,y:\"+=100\",rotation:45,opacity:\"+=255\",onComplete:()=&gt;&#123; console.log('æ‰§è¡Œç»“æŸ'); &#125;&#125;);&#125;main(); ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¯ è®©ä¸€ä¸ªnode åŒæ—¶æ‰§è¡Œ ä½ç½®, æ—‹è½¬ å’Œé€æ˜åº¦çš„ å˜æ¢,è¿™ç§å†™æ³•è¦æ¯” CocosCreator çš„é‚£å¥— Action è¦ç®€æ´ å…¶ä»–çš„ API æˆ‘å°±æ¡ç€å‡ ä¸ªé‡è¦çš„è¯´ä¸€ä¸‹å§,å…¶ä»–çš„ä½ ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ä»–ä»¬çš„å®˜æ–‡æ–‡æ¡£è®²è§£çš„å¾ˆæ¸…æ¥š ä¸»è¦è¯´ç¬¬ä¸‰ä¸ªå‚æ•°12345678910111213&#123; x:100,// è·‘åˆ°å½“å‰åæ ‡ç³»ä¸‹ x=100 çš„ä½ç½® y:\"+=100\", // è‡ªèº«å€¼ å¢åŠ 100 ..., onStartParams:['123'], onStart:(p1)=&gt;&#123;console.log(p1)&#125;,// è¾“å‡º 123 åœ¨è¿™ä¸ªåŠ¨ç”»å¼€å§‹æ‰§è¡Œçš„æ—¶å€™è°ƒç”¨ onCompleteParams:['123'], onComplete:(p1)=&gt;&#123;console.log(p1)&#125;,// è¾“å‡ºå…¥123 åœ¨è¿™ä¸ªåŠ¨ç”»ç»“æŸçš„æ—¶å€™è°ƒç”¨ onReverseComplete:()=&gt;&#123;&#125;, // è°ƒç”¨ç¿»è½¬å‡½æ•°çš„è¯´ è¿™ä¸ªåŠ¨ç”»ç»“æŸå ä¼šè°ƒç”¨ delay:2,// å¼€å§‹å»¶æ—¶ ease: Elastic.easeOut, // è¦ä½¿ç”¨è¿™ä¸œè¥¿è¦å¯¼å…¥ easeing æ–‡ä»¶ä¸‹çš„é‚£ä¸ª easePack.js æ–‡ä»¶&#125; è°ƒç”¨TweenLite.to å‡½æ•°çš„æ—¶å€™æ˜¯ä¼šå»è¿”å›ä¸€ä¸ªå¯¹è±¡çš„, åœ¨è¿™ä¸ªè¡¥é—´åŠ¨ç”»åº“ä¸­ ä½¿ç”¨çš„æ˜¯é“¾å¼(chain)è°ƒç”¨, è¿™ä¸ªå¯¹è±¡ä½¿ç”¨å‡ ä¸ª api çš„ pause æš‚åœå½“å‰çš„åŠ¨ç”»play æ’­æ”¾å½“å‰åŠ¨ç”»resume æ¢å¤å½“å‰åŠ¨ç”»reverse åœ¨ä»»æ„æ—¶é—´éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ª ç¿»è½¬å‡½æ•° ç¿»è½¬å½“å‰åŠ¨ç”»restart ä»æ–°å¼€å§‹progress å®ƒçš„å–å€¼åŒºé—´æ˜¯[0,1] æŒ‡å®šå½“å‰åŠ¨ç”»å¤„å¼€å§‹æ’­æ”¾seek è·³è½¬åˆ°æŒ‡å®šä½ç½® å’Œ progress å‡½æ•°æœ‰ç‚¹ç›¸ä¼¼ è¿™ä¸ªæŒ‡çš„æ˜¯æ—¶é—´çš„ä½ç½®ç‚¹ ä¾‹å­å¦‚ä¸‹1234567891011121314import Ease from \"EasePack.min\";import TweenLite from \"TweenLite.min\"let tl = TweenLite.to(this.node,2,&#123; x:100, ease: Elastic.easeOut&#125;);tl.play();tl.pause();tl.resume();tl.restart();tl.progress(0.5);tl.seek(0.5);tl.progress(0.5).pause(); å› ä¸ºä»–æ˜¯é“¾å¼è°ƒç”¨æ‰€ä»¥ æœ€åä¸€ä¸ªçš„å†™æ³•æ˜¯ä¸ä¼šæŠ¥é”™çš„.ä½ ä»¬è¦æ˜¯æƒ³è¦ä½¿ç”¨ ease è¿™ä¸ªå±æ€§çš„è¯ æ˜¯éœ€è¦å°† EasePack.min.js å¯¼å…¥åˆ°å·¥ç¨‹ä¸­ ä¸éœ€è¦åœ¨ä»£ç ä¸­å¯¼å…¥, è‡³äºä¸ºä»€ä¹ˆå¯ä»¥è‡ªå·±å»çœ‹ä»–ä»¬ uncompressed æ–‡ä»¶ä¸‹å¯¹åº”çš„ä»£ç æ–‡ä»¶. åé¢é‚£ä¸‰ä¸ªæ–‡ä»¶éƒ½æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ‰©å±•çš„æ‰€ä»¥éœ€è¦ç†è§£è¿™ä¸ªæ–‡ä»¶çš„ç”¨æ³•. TweenLite è¿˜æœ‰å…¶ä»–çš„å‡ ä¸ªé™æ€å‡½æ•° TweenLite.to TweenLite.from TweenLite.fromTo ç”¨æ³•æ¯”è¾ƒçš„ç®€å•çœ‹æ–‡æ¡£ä¹Ÿå°±å¯çŸ¥é“äº†. TimelineLiteçœ‹è¿™ä¸ªåå­—å‡­å­—é¢ä¸Šçš„æ„æ€æ˜¯ æ—¶é—´çº¿ ä¹Ÿå¯ä»¥ç†è§£æˆ æ—¶é—´è½´,çœ‹å®˜æ–¹æ–‡æ¡£è§£é‡Šæ˜¯ä»–å¯ä»¥å½¢æˆä¸€ä¸ªé˜Ÿåˆ—,å°±æ˜¯è¯´ä½ å¯ä»¥ç»„æˆä¸€ä¸ªåŠ¨ç”»åˆ—è¡¨ä¸€æ¬¡æ’­æ”¾. ä¾‹å­å¦‚ä¸‹123456import TimelineLite from \"TimelineLite.min\"let tl = new TimelineLite();// åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹å¯¹è±¡tl.to(this.node,2,&#123;x:\"+=100\"&#125;).to(this.node,2,&#123;y:\"+=100\"&#125;); è¿™ä¸ªå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªåŠ¨ç”»é˜Ÿåˆ—,è®©ä¸€ä¸ªç‰©ä½“å‘xè½´æ­£æ–¹å‘ç§»åŠ¨100åƒç´ , ç„¶ååœ¨å‘yè½´æ­£æ–¹å‘ç§»åŠ¨100åƒç´ . é‡Œé¢çš„å‚æ•°é…ç½®å’Œ TweenLite é‡Œé¢çš„é…ç½®æ˜¯ä¸€æ ·çš„. ä»–æä¾›äº† TweenLiteå¯¹è±¡çš„åµŒå¥— åŒæ—¶ä¹Ÿæ”¯æŒ Timeline çš„åµŒå¥— ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´çœ‹ä¸‹é¢çš„ä¾‹å­ 12345678910111213141516import TimelineLite from \"TimelineLite.min\";import TweenLite from \"TweenLite.min\";let tl = new TimelineLite();// åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹å¯¹è±¡tl.to(this.node,2,&#123;x:\"+=100\"&#125;).to(this.node,2,&#123;y:\"+=100\"&#125;);let tl1 = new TimelineLite();tl1.add(TweenLite.to(this.node,2,&#123;x:\"+=100\"&#125;));tl1.add(TweenLite.to(this.node,2,&#123;y:\"+=100\"&#125;));let tl2 = new TimelineLite();tl2.to(this.node,2,&#123;x:\"+=100\"&#125;);tl1.append(tl2); è¿™é‡Œé¢ to å’Œ add çš„åŠŸèƒ½æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ å¯ä»¥çœ‹åˆ° add é‡Œé¢æ˜¯ä¸ª TweenLite å¯¹è±¡ æ‰€ä»¥ TimelineLiteæ˜¯ç»´æŠ¤ TweenLiteæ¯ä¸ªå¯¹è±¡è¿›è€Œå½¢æˆ ä¸€ä¸ªé˜Ÿåˆ— TimelineLite è¿˜æœ‰å…¶ä»–çš„ç”¨ å…¥ addLabel ç­‰å‡½æ•°,çœ‹ä»–ä»¬è§£é‡Šå’Œä»£ç ä¾‹å­å¾ˆå®¹æ˜“æ‡‚ TimelineMaxæ˜¯å¯¹ TimelineLite è¿›è¡Œçš„æ‰©å±• ä¸»è¦æ‰©å±• ä½¿ç”¨ åŠ å…¥ repeat repeatDelay yoyo currentLabel(), addCallback(), removeCallback(), tweenTo(), tweenFromTo(), getLabelAfter(), getLabelBefore(), getActive(). å¦‚æœä¸Šé¢é¢åŠŸèƒ½ä¸èƒ½æ»¡è¶³ä½ ä»¬é¡¹ç›®çš„éœ€æ±‚å¯ä»¥å†å»ç”¨ TimelineMax è¿™ä¸ªæ›´å¼ºå¤§é¢ æ‰©å±•åŒ…. TweenMaxTweenMax æ˜¯å¯¹ TweenLite çš„æ‰©å±•, ä¹ŸåŠ å…¥ repeat(), repeatDelay(), yoyo() ç­‰ç­‰, è€Œä¸”çœ‹ä»–ä»¬æœªå‹ç¼©çš„ ä»£ç  å¥½åƒè¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥ä¸è¦ä¾èµ– å…¶ä»–ä¸‰çš„,å› ä¸ºä»–æŠŠå…¶ä»–ä¸‰ä¸ªéƒ½å‹ç¼©åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œé¢äº†,ä½†æ˜¯ç›¸åº”çš„æ–‡ä»¶çš„å¤§å°ä¹Ÿå¢åŠ äº†,åŒæ—¶ä¹Ÿé›†æˆäº†ä¸€äº›æ‰©å±•æ’ä»¶. ä½ ä»¬çš„é¡¹ç›®å¦‚æœå¯¹ ä»£ç çš„å¤§å°æ²¡æœ‰å¤ªé«˜çš„è¦æ±‚çš„è¯,ä½ ä»¬å¯ä»¥å»ç›´æ¥å¯¼å…¥è¿™ä¸ªTweenMax.min.js è¿™ä¸ªæ–‡ä»¶. ä¸Šé¢è®²äº†è¿™ä¹ˆå¤šä¹Ÿåªæ˜¯ä¸ªå…¥ä»¬å§,è¿™ä¸ªåº“é‡Œé¢è¿˜å°è£…äº†ä¸€äº›å¾ˆå¤šæœ‰è¶£çš„ä¸œè¥¿,ä½ ä»¬å¯ä»¥å»å¤šäº†è§£äº†è§£. è¿™é‡Œä½¿ç”¨è¿™ä¸ªåº“å»æ›¿ä»£ CocosCreator çš„ Action ä¸»è¦æ˜¯ api ä½¿ç”¨çµæ´», å†™æ³•ç®€å•,è¿è¡Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«. ä¹Ÿæœ‰ä¸€äº› Action æ‰€ä¸å…·æœ‰çš„åŠ¨èƒ½ å…¥éšæ—¶ç¿»è½¬,æ§åˆ¶åŠ¨ç”»æµç¨‹,æš‚åœåŠ¨ç”»ç­‰ç­‰,éšæœºç‚¹å¼€å§‹æ’­æ”¾åŠ¨ç”»,æ—¶é—´è½´äº¤å‰ç­‰. å¥½äº†,ä»Šå¤©å°±å…ˆåˆ°è¿™é‡Œ.å†™ä½œä¸æ˜“,ä¸”è¡Œä¸”çæƒœ. æˆ‘æ˜¯å°é­. æ—¶é—´:2018å¹´11æœˆ21æ—¥17:16:36.","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"TweenLite","slug":"TweenLite","permalink":"https://leng521.top/tags/TweenLite/"}]},{"title":"QQç©ä¸€ç©æ‰“åŒ…","date":"2018-10-30T14:45:53.000Z","path":"/posts/dd666e1a/","text":"ä»Šå¤©ä¸»è¦çºªå½•æœ€è¿‘å¯¹ QQPlay(ç©ä¸€ç©)æ‰“åŒ…çš„çºªå½•. ç„¶åè¿™é‡Œåªæ˜¯çºªå½•æˆ‘ç›®å‰ä½¿ç”¨çš„å¼•æ“(Cocos Creator version 2.x.x),ç²¾åŠ›æœ‰é™. QQPlayå®˜æ–¹æ–‡æ¡£ å¤§çº²1. ç©ä¸€ç©åŒ…ä½“ä¸­ç¼ºå°‘`Utils`æ–‡ä»¶ 2. æ€ä¹ˆè¯»å–æœ€æ–°çš„ bricks å¼•æ“ 3. è§£å†³ xcode æ‰“åŒ…åˆ°æ‰‹æœºè¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ 4. ç©ºæ³›è®²è§£æ•´ä¸ªç©ä¸€ç©ä¸Šä¼ æµç¨‹ 5. é¿å…ä¸Šä¼ åå°è€Œå®æ—¶è·Ÿæ–° android æœºé‡Œé¢çš„é€»è¾‘ä¸ºæœ€æ–° 6. å®ç°å˜ç±³ç§€å¤§éƒ¨åˆ†åŠŸèƒ½ 7. å…³äºè·å–æ¯ä¸ªæ¸¸æˆç”¨æˆ·çš„ openkey çš„è·å–é—®é¢˜ æœªå®Œå¾…ç»­å˜ç±³ç§€æ¸¸æˆæ€§èƒ½å®¡æ ¸æ ‡å‡†è‡ªå»ºåå° å‰åç«¯éœ€è¦æ³¨æ„ä»€ä¹ˆå®¡æ ¸å‰æ¸¸æˆåº”è¯¥å‡†å¤‡äº›ä»€ä¹ˆç©ä¸€ç©åå°éœ€è¦çš„ä¸€äº›é…ç½® ç©ä¸€ç©åŒ…ä½“ä¸­ç¼ºå°‘Utilsæ–‡ä»¶åœ¨ä½ ä¸Šä¼ å˜ç±³ç§€åå°çš„æ—¶å€™å¦‚æœåªæ˜¯å•çº¯ä½¿ç”¨Cocos Creator å‘å¸ƒQQPlay å¹³å°çš„æ—¶å€™,åœ¨ ~/build/qqplay/libs/element/ è¿™ä¸ªè·¯å¾„ä¸‹ç¼ºå°‘ä¸€ä¸ª Utils.js çš„è„šæœ¬æ–‡ä»¶ ä½†æ˜¯å¼•æ“å›¢é˜Ÿåœ¨2.x.x ç‰ˆæœ¬ä¸­ è¿˜ä¸€ç›´æ²¡æœ‰ä¿®å¤è¿™ä¸ªé—®é¢˜,åŸå› åœ¨ ~/build/qqplay/libs/qqplay-adapter.js ä¸­åˆå¼•å…¥è¿‡è¿™ä¸ªæ–‡ä»¶.åœ¨è®ºå›ä¸­æœåˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ å°† qqplay-adapter.js è„šæœ¬ä¸­çš„è¿™ä¸€è¡Œä»£ç æ³¨é‡Šæ‰,è¿™ä¸ªåœ¨å‰æœŸæ²¡ç”¨åˆ°å¯¹åº”åŠŸèƒ½çš„æ—¶å€™ä¸ä¼šæŠ¥é”™,ä½†æ˜¯ç­‰ç”¨åˆ°Utils.js é‡Œé¢çš„åŠŸèƒ½æ˜¯å°±ä¼šå‘ç°ä¼šå†æ¬¡æŠ¥é”™. æŠ¥é”™çš„åŸå› :åŠ è½½è¿œç¨‹å›¾ç‰‡ä¼šä½¿ç”¨ libs/element/HTMLImageElement.js è„šæœ¬ è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨CocosCreator(1.x.x) ç‰ˆæœ¬éšä¾¿æ‰“åŒ…ä¸ª QQPlay å¹³å°,å°†å…¶ä¸­çš„Utils.jsç²˜åˆ°å½“å‰å·¥ç¨‹ä¸­ çš„ ~/build/qqplay/libs/element/ ç›®å½•ä¸­ ä¿®æ”¹Utils.jsä¸­å¯¹å…¶ä»–åº“çš„å¼•ç”¨è·¯å¾„(CocosCreator(2.x.x)ä¸­å°†ç¬¬ä¸‰æ–¹å¼•æ¥çš„è„šæœ¬å½’ç±»åˆ°~build/qqplay/libs/other/è¿™ä¸ªç›®å½•ä¸‹äº†), ä¿®æ”¹çš„ç‚¹å¦‚ä¸‹: å»ºç«‹ä¸€ä¸ªå’Œ ~/build åŒçº§çš„ç›®å½•(build-templates) å°†ä¸Šä¸€æ­¥çš„ Utils.jsæ–‡ä»¶ä¹Ÿå¤åˆ¶ä¸€ä»½åˆ° ~/build-templates/qqplay/libs/element/ ä¸­, ç±»ä¼¼äºä¸‹é¢çš„è¿™æ · (è¿™æ ·åšçš„ç›®çš„æ˜¯å¯ä»¥æ¯æ¬¡æ„å»ºçš„æ—¶å€™,æ‰“çš„ç©ä¸€ç©çš„åŒ…éƒ½å«æœ‰ Utils.js è„šæœ¬); Utils.js.txt 1.9.3 æ‰“åŒ…çš„ Utils.js è„šæœ¬ å¯ä»¥å‚è€ƒ è¿™é‡Œé¢æˆ‘å·²ç»ä¿®æ”¹è¿‡äº†,å¯ä»¥ç›´æ¥ä½¿ç”¨. æ€ä¹ˆè¯»å–æœ€æ–°çš„ bricks å¼•æ“ä¸‹é¢è¿™æ˜¯å¼•æ“å›¢é˜Ÿçš„è¯´æ³• å’Œ ç©ä¸€ç©å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ç©ä¸€ç© å®˜æ–¹è¯´æ³• éœ€è¦ç§‘å­¦ä¸Šç½‘bitbucketå®˜ç½‘è§£å†³æ–¹æ¡ˆ: ç™»å½•å®˜ç½‘æ³¨å†Œè´¦å· å°†è‡ªå·±çš„è´¦å·å‘ç»™ `hudong@tencent.comé‚®ä»¶çš„ä¸»é¢˜å†™å¼•æ“ç”³è¯·æƒé™`ç­‰å¾…å¤§æ¦‚ 4 å¤©å·¦å³ è…¾è®¯çš„ç›¸å…³å·¥ä½œäººå‘˜ä¼šç»™ä½ è¿™ä¸ªè´¦å·æ·»åŠ æƒé™,ä½ å°±å¯ä»¥è¯•è¯•è·å–æœ€æ–°çš„xcodeå·¥ç¨‹ 10.25 ç©ä¸€ç©å®˜ç½‘ ç»™å‡ºäº† bricks å¼•æ“çš„ä¸‹è½½åœ°å€,ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä¸ç”¨ç”³è¯·äº†bricks XCode å·¥ç¨‹bricks ä¸‹è½½é¡µé¢ è§£å†³ xcode æ‰“åŒ…åˆ°æ‰‹æœºè¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯è¿™é‡Œä¸»è¦æ˜¯ è‹¹æœç­¾å å‡ºçš„é”™è¯¯è¿™é‡Œé¢ ä¼šæœ‰ è¯¦ç»†çš„ è§£å†³æ–¹æ¡ˆ(æˆ‘ä¸æƒ³é‡å¤é€ è½®å­)è§£å†³æ‰“åŒ…ç­¾åæŠ¥é”™é—®é¢˜ä»–è¿™é‡Œé¢ç”¨çš„æ˜¯ å°† com.tencent.PublicBrickEngineGame ä¿®æ”¹ä¸º com.test.PublicBrickEngineGame ä½ ä¼šå‘ç°è¿˜æ˜¯æŠ¥é”™ ,,, é‚£å°±å°† test ä¿®æ”¹ä¸ºè¢«äººå¾ˆéš¾æƒ³åˆ°çš„åå­—å°±è¡Œäº† ,,, ç„¶å try again ç©ºæ³›è®²è§£æ•´ä¸ªç©ä¸€ç©ä¸Šä¼ æµç¨‹ å¼•æ“æ‰“åŒ… QQPlay å¹³å°çš„åŒ… ä¿®å¤å¼•æ“åŒ…å†…ç¼ºå°‘çš„æ–‡ä»¶ gameConfig.json é‡Œé¢éœ€è¦çš„å¡«å……çš„å†…å®¹å¦‚ä¸‹ gameConfig.json|å®˜æ–¹è§£é‡Šåœ°å€ åœ¨ä½ è°ƒè¯•æœŸé—´å¯ä»¥å…ˆ ä¸æŠŠ æ„å»ºé¢æ¿çš„ MD5 å¼€å§‹ , è¿™æ ·ä½ å¯ä»¥,å…ˆå°† gameConfig.json æ”¾å…¥åˆ° ~/build-templates/qqplay/ ä¸­ ,,, æµ‹è¯•å®Œæ¯•åå°† MD5 å¼€å¯, ç„¶åæ‰“æ­£å¼åŒ…çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨å¡«å…… gameConfig.json æ–‡ä»¶.gameConfig.json å†…å®¹å¦‚ä¸‹: åœ¨åå°åˆ›å»ºæµ‹è¯•ç‰ˆ é¿å…ä¸Šä¼ åå°è€Œå®æ—¶è·Ÿæ–° android æœºé‡Œé¢çš„é€»è¾‘ä¸ºæœ€æ–°å‚è€ƒæ–‡æ¡£è¿™ä¸ªè®²è§£çš„ä¹Ÿå¾ˆè¯¦ç»† ,,, æˆ‘å°±ä¸é‡å¤é€ è½®å­äº†. æˆ‘åˆ°ç°åœ¨éƒ½è¿˜ä¸çŸ¥é“æ€ä¹ˆçœ‹ log å“ªä½å¤§ç¥çŸ¥é“ å¯ä»¥åœ¨ä¸‹é¢è¯„è®º æˆ‘åŠ  QQ ,, è¯·æ•™è¯·æ•™. å®ç°å˜ç±³ç§€å¤§éƒ¨åˆ†åŠŸèƒ½å‚è€ƒæ–‡ç« å®˜æ–¹æ–‡æ¡£ç¨‹åºå‘˜ä¸»è¦æ˜¯ä¸€äº›ç»†èŠ‚,,,å¯èƒ½ä¼šå›°æ‰°ä½ ,è¿™é‡Œæˆ‘å°±ä¸è¯´å•¥äº†,,,å®˜æ–¹ä¹Ÿæä¾›çš„æŒºè¯¦ç»†çš„,,,ä½ ä¹Ÿå¯ä»¥å€Ÿé‰´.QQPlay.js.txtæˆ‘è¿™é‡Œåœ¨æä¾›ä¸€ä»½æˆ‘å°è£…å¥½çš„ é‡Œé¢(è·å– openId, è·å–QQåå­—, è·å–QQå¤´åƒåœ°å€, åˆ†æ•°ä¸Šä¼ , è·å–å¥½å‹åˆ†æ•°æ’è¡Œæ¦œ, å„ä¸ªæ—¶é—´ç‚¹çš„ç»‘å®š, å…¬ä¼—å·è·³è½¬, åˆ†äº«, åˆ†äº«é“¾æ¥, ç”Ÿæˆå¿«æ·æ–¹å¼ä¼ å‚, å‚¨å­˜/è¯»å–ä¸ªäººäº‘ç«¯æ•°æ®,å­˜å‚¨æ¸¸æˆæ•°æ®åˆ°æœ¬åœ°,è·å–openkey,åˆ›å»º bannerå¹¿å‘Š, åˆ›å»ºæ¿€åŠ±è§†é¢‘å¹¿å‘Š, Post è¯·æ±‚)è¿˜æœ‰ä¸€äº›åŠŸèƒ½ æœªå®Œæˆ(æš‚æ—¶é¡¹ç›®æ²¡æœ‰éœ€æ±‚å°±å†™, åé¢ä¼šæŒç»­æ›´æ–°); å…³äºè·å–æ¯ä¸ªæ¸¸æˆç”¨æˆ·çš„ openkey çš„è·å–é—®é¢˜è·å– openkey æ˜¯éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯æ‰‹Qç¯å¢ƒ,,,é¿å…æœ‰äº›æ¨¡æ‹Ÿè¯·æ±‚,,,ä½¿å…¶æ›´å®‰å…¨. è¿™ä¸ª openkey æ¯”è¾ƒçš„å‘,,, è¿™æ˜¯å®˜æ–¹æ–‡æ¡£ä½ ä¼šå‘ç° è¿™é‡Œé¢ æ²¡å•¥ è¿™ä¸ª game.json æ˜¯ä¸ªå•¥ä¸œè¥¿,,, needOpenkey åˆæ˜¯ä¸ªå•¥ ,,, ç„¶åç‚¹å‡»æ¸¸æˆä¸Šæ¶ç« èŠ‚ å—¯å“¼ Not Found ,,, äºæ˜¯ åˆå»æ‰¾äº†æ‰¾,ä½ ä¼šå‘ç°è¿™é‡Œè¿˜æœ‰ç‚¹æç¤ºä¿¡æ¯ åˆ°æœ€åä¹Ÿæ²¡è¯´ åˆ°åº•è¦æ”¾åœ¨å“ªé‡Œ? è§£å†³æ–¹æ¡ˆ:åœ¨å’ŒgameConfig.json åŒç›®å½•é‡Œé¢ åˆ›å»ºä¸€ä¸ª game.json æ–‡ä»¶ é‡Œé¢å†…å®¹ä¸º123&#123; \"needOpenkey\": 1&#125; ç„¶åéšåŒåˆ°åŒ…å†…. ç„¶åå°±æ˜¯è°ƒç”¨12345BK.QQ.fetchOpenKey(function (errCode, cmd, data) &#123; if (errCode == 0) &#123; var openKey = data.openKey; &#125;&#125;); è¿™ä¸ªå€Ÿå£å»è·å–ç”¨æˆ·çš„ openkey","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"QQç©ä¸€ç©","slug":"QQç©ä¸€ç©","permalink":"https://leng521.top/tags/QQç©ä¸€ç©/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆè®°å½•é•¿è¿æ¥(websocket)","date":"2018-09-15T02:55:43.000Z","path":"/posts/ba881459/","text":"å“,è·ç¦»ä¸Šæ¬¡å†™åšå®¢ç«Ÿç„¶ä¸€ä¸ªæœˆäº†,çœŸæ˜¯æ—¶é—´ä¸ç­‰äººå‘€,å¥½äº†åºŸè¯ä¸å¤šè¯´,ç›´æ¥è¿›å…¥æ­£é¢˜.ä»Šå¤©ä¸»è¦è®°å½•è¿™å‡ ä¸ªé—®é¢˜: websocket ç«¯å£é—®é¢˜, http(çŸ­è¿æ¥) ç«¯å£é—®é¢˜, ç”±äºå…¬å¸çš„äº‘æœåŠ¡å™¨éƒ½æ˜¯ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘,ä½†æ˜¯å°æ¸¸æˆæ˜¯è…¾è®¯çš„,è…¾è®¯äº‘åˆæ¨å‡ºäº†ä¸€å †æœ‰åˆ©äºå°æ¸¸æˆçš„æœåŠ¡,ä½†æ˜¯æˆ‘ä»¬ç”¨ä¸æ¥äº†,é‚£å°±è‡ªå·±å»è§£å†³é‡Œé¢ä¼šé‡åˆ°çš„é—®é¢˜, websocket ç«¯å£é—®é¢˜åœ¨å¾®ä¿¡å°æ¸¸æˆé‡Œé¢æ‰€æœ‰ç”¨æˆ·çš„é€»è¾‘æœåŠ¡å™¨æˆ–è€…æ˜¯èµ„æºæœåŠ¡å™¨ éƒ½æ˜¯éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨ä¿¡æ¯,ä½†æ˜¯å¾®ä¿¡æ˜¯åªè¦æ±‚ä½¿ç”¨ wss åè®® è€Œä¸”è¿˜å¿…é¡»æ˜¯443ç«¯å£,è¿™å°±ä¼šæš´éœ²å‡ºä¸€ä¸ªé—®é¢˜,å› ä¸º https å†™åè®®ä¹Ÿæ˜¯ 443 ç«¯å£,, è¿™å°±ä¼šå‡ºç°ç«¯å£å ç”¨é—®é¢˜? è§£å†³çš„æ–¹æ¡ˆ ä½¿ç”¨ nginx åå‘ä»£ç†åŠŸèƒ½, ä¸»è¦çš„æ€è·¯å°±æ˜¯ è®© nginx å ç”¨443 ç«¯å£,ç„¶ååœ¨ç”± nginx å»åˆ†å‘ä¸åŒçš„è¯·æ±‚. è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½è®²çš„å§ ,, ä¸»è¦æ˜¯ nginx çš„é…ç½®è¡¨éœ€è¦é…ç½®æ­£ç¡®, å°±å¯ä»¥å®ç°ä¸Šè¿°çš„åŠŸèƒ½,è¿™é‡Œå°±å»è®²è§£ä¸€ä¸‹é‚£ä¸ªé…ç½®è¡¨è¦é…ç½®çš„ä¸œè¥¿, 12345678910111213141516171819202122232425262728293031323334# å°† http è¿æ¥å‡çº§map $http_upgrade $connection_upgrade &#123; default upgrade; &apos;&apos; close;&#125;# è¿™ä¸ª é…ç½®åå‘ä»£ç†çš„åœ°å€upstream websocket &#123; server 127.0.0.1:3000;&#125;server &#123; # å¼€å¯ 443 ç«¯å£ç›‘å¬ listen 443 ssl; ... # é…ç½®è¯ä¹¦ è¿™ä¸ªæ˜¯éœ€è¦ä½ è‡ªå·±çš„sslè¯ä¹¦ ssl_certificate *.crt ssl_certificate_key *.key # è¿™å‡ ä¸ª ä¹Ÿéœ€è¦é…ç½® , è¿™ä¸ªæˆ‘ è¿˜æ²¡æœ‰ ç‰¹å¤‡çš„æ¸…æ¥šå…·ä½“çš„ä½œç”¨, æš‚æ—¶å°±å…ˆä¸è§£é‡Šäº† ssl_session_timeout 5m; ssl_session_cache shared:SSL:50m; ssl_protocols TLSV1.1 TLSV1.2 SSLv2 SSLv3; ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP; ssl_prefer_server_ciphers on; location /wss&#123; proxy_pass https://websocket/; # ä»£ç†åˆ°ä¸Šé¢çš„åœ°å€å» proxy_http_version 1.1; # åè®®å‡çº§ proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &quot;Upgrade&quot;; &#125;&#125; ç„¶å è¿è¡Œ nginx -t å»æ£€æŸ¥è¯­æ³•æ˜¯å¦æœ‰è¯¯ å¦‚æœæ²¡æœ‰å‡ºç°é”™è¯¯ ,,, å°± nginx -s reload // é‡å¯ ç„¶åä½ å°±å¯ä»¥ ä½¿ç”¨ http https wss åè®®äº†wss://localhost/wsshttps://localhost/http://localhost/ http çŸ­è¿æ¥ç«¯å£é—®é¢˜å¾®ä¿¡å°æ¸¸æˆçŸ­è¿æ¥æ˜¯ä½¿ç”¨çš„æ˜¯ https åè®® ä¸€èˆ¬ https çš„é»˜è®¤ç«¯å£æ˜¯ 443 , ä¸€èˆ¬ä½ åœ¨æµè§ˆå™¨æ²¡æœ‰åŠ ç«¯å£,é‚£æ˜¯æµè§ˆå™¨é»˜è®¤ä¸º443 ,,, ä½†æ˜¯å‰é¢è¯´äº†å¯ä»¥ä½¿ç”¨ nginx æ¥å®ç°åå‘ä»£ç†çš„é—®é¢˜, å¦‚æœæ˜¯çŸ­è¿æ¥çš„è¯ æœ‰ä¸ªç®€å•çš„ æ–¹æ³• ,, ç»è¿‡æˆ‘æµ‹è¯•, åœ¨å¾®ä¿¡åå°é…ç½®å…¶ä»–ç«¯å£åœ¨æ‰‹æœºä¸Šæ˜¯å¯ä»¥è®¿é—®,æ‰€ä»¥ å¦‚æœé¡¹ç›®åªæ˜¯ çŸ­è¿æ¥è¯·æ±‚çš„è¯å¯ä»¥ç›´æ¥åœ¨åå°é…ç½®ä½ æœåŠ¡å™¨å¼€å¯çš„ç«¯å£,è¿™ç§æ–¹æ³•åªé€‚ç”¨äº çŸ­è¿æ¥,,, é•¿è¿æ¥æ˜¯ä¸è¡Œ, é•¿è¿æ¥åœ¨ åå°é…ç½® ä¼šå‡ºç° åœ¨ å¾®ä¿¡å¼€å‘å·¥å…·ä¸Šæµ‹è¯•æ­£å¸¸,åˆ°æ‰‹æœºä¸Šæµ‹è¯•ä¼šå‡ºç°æ“ä½œå¤±è´¥çš„é”™è¯¯,,,è€Œä¸”ä¹Ÿè¿æ¥ä¸ä¸Š. å¥½äº†,è¿™ç¯‡æ–‡ç« å°±å…ˆè¿™æ ·. æˆ‘ä¹Ÿä¸æƒ³ è®©æ–‡ç« çš„ç¯‡å¹…è¿‡é•¿.","tags":[{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"},{"name":"websocket","slug":"websocket","permalink":"https://leng521.top/tags/websocket/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆæ¥å…¥å¹¿å‘Š","date":"2018-08-18T14:34:25.000Z","path":"/posts/967bbd27/","text":"ä»Šå¤©ä¸»è¦æ›´æ–°å¾®ä¿¡å°æ¸¸æˆå¹¿å‘Šæ¥å…¥é—®é¢˜â€¦ å¾®ä¿¡å°æ¸¸æˆç°åœ¨å·²ç»å¼€å§‹å¯¹å¤–æµ‹è¯•äº†,åªè¦ä½ çš„ UV(ç´¯è®¡ç”¨æˆ·è¶…è¿‡1000) ä¸”æ²¡æœ‰è¿è§„è¡Œä¸º,å°±å¯ä»¥å¡«å†™ä¸ªäººä¿¡æ¯,å¦‚,ä¸ªäººé“¶è¡Œå¡ç›¸å…³ä¿¡æ¯ç­‰,ç„¶åæäº¤å®¡æ ¸.å¦‚æœæ¥è¿‡å¹¿å‘Šçš„ç¨‹åºå‘˜,åº”è¯¥éƒ½çŸ¥é“åœ¨æ¥å…¥å¹¿å‘Šçš„æ—¶å€™éœ€è¦å…ˆåˆ›å»ºå¹¿å‘Šä½,äº§ç”Ÿç›¸å…³id.å¤§è‡´æµç¨‹ æ»¡è¶³æ¡ä»¶ â€“&gt; å¡«å†™ä¸ªäººä¿¡æ¯ â€“&gt; æäº¤ç”³è¯· â€“&gt; åœ¨å¾®ä¿¡åå°åˆ›å»ºå¹¿å‘Šä½ â€“&gt; æ¸¸æˆå‰ç«¯æ·»åŠ ç›¸åº”çš„ä»£ç é€»è¾‘ å¡«å†™ä¸ªäººä¿¡æ¯ä¸»è¦éœ€è¦å¡«å†™é“¶è¡Œç›¸å…³ä¿¡æ¯,è´¦å•æµæ°´é‚®ä»¶æ¥æ”¶äººçš„ç›¸å…³ä¿¡æ¯,,,è¿™é‡Œæˆ‘æˆªå›¾äº†,æ”¾åœ¨å…¬å¸äº†,åé¢è¡¥ä¸Š. åˆ›å»ºçˆ±ä½ å¹¿å‘Šä½ è¿™é‡Œä¸»è¦æ˜¯å¹¿å‘Šçš„ç±»å‹,,,ç›®å‰ä¸‹æ¸¸æˆæä¾›çš„å¹¿å‘Šç±»å‹,,,åªæœ‰æ¨ªå¹…å¹¿å‘Š å’Œ æ¿€åŠ±å¹¿å‘Š æ¨ªå¹…å¹¿å‘Š: 1.ä¸€èˆ¬æ”¾åœ¨æ¸¸æˆçš„ä¸‹æ–¹å’Œæ¸¸æˆå¼¹çª—è§¦å‘çš„æƒ…å¢ƒä¸‹ 2.æ¨ªå¹…å¹¿å‘Šç»„ä»¶ä¸€æ—¦è¢«åˆ›å»ºé‡Œé¢çš„å¹¿å‘Šå†…å®¹ä¸ä¼šè¢«æ›´æ–°,å¦‚æœéœ€è¦æ›´æ–°å†…å®¹éœ€è¦,éœ€è¦å°†å½“å‰ç»„ä»¶é”€æ¯,é‡æ–°åˆ›å»ºæ–°çš„ç»„ä»¶ 3.éœ€è¦è‡ªå·±å»æ”¾ç½®ä½ç½®,è¿™é‡Œéœ€è¦è‡ªå·±å»è®¡ç®—ä½ç½®å’Œç¼©æ”¾å’Œé€‚é…,è®¡ç®—ä¸å¥½ä¼šé®æŒ¡æŒ‰é’®,è¿™ä¸ªä¼šè¿åå¾®ä¿¡å°æ¸¸æˆå¹¿å‘Šè§„èŒƒ,è¿™æ ·ä¼šæœ‰å°å·,æˆ–è€…æ˜¯è´¦å·è¢«å†»ç»“çš„é—®é¢˜. æ¿€åŠ±å¹¿å‘Š: 1.è¿™ä¸ªä¸€èˆ¬æ˜¯å…¨å±,ä¸éœ€è¦è‡ªå·±å»è€ƒè™‘ç»„ä»¶çš„ä½ç½®ç­‰ç­‰ 2.ä¸»è¦è¿ç”¨çš„åœºæ™¯æ˜¯æ¸¸æˆå¤æ´»,è·å–ç§¯åˆ†,è·å–é“å…·,è·å–æ–°å…³å¡æœºä¼šç­‰ç­‰ 3.ä¸»è¦è´Ÿè´£è§†é¢‘æ˜¯å¦æ’­æ”¾å®Œæ¯• å®¢æˆ·ç«¯é€»è¾‘å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071// å±•ç¤ºæ¨ªå¹…å¹¿å‘ŠshowAD() &#123; if(CC_WECHATGAME &amp;&amp; wx &amp;&amp; typeof(wx.createBannerAd) != undefined) &#123; this.destroyAd() // æ¨ªå¹…å¹¿å‘Šæ¥å…¥ let bannerAd = wx.createBannerAd(&#123; adUnitId: 'adunit-68c37174ce72ce6b', style: &#123; left: 0, top: 0, width: 350 &#125; &#125;) // ä¸€èˆ¬æ”¾ç½®å±å¹•çš„ä¸­ä¸‹æ–¹ bannerAd.onResize(function()&#123; bannerAd.style.left = screenWidth / 2 - bannerAd.style.realWidth / 2 + 0.1; bannerAd.style.top = screenHeight - bannerAd.style.realHeight + 0.1; &#125;) // é»˜è®¤å¹¿å‘Šç»„ä»¶æ˜¯å…³é—­çš„ bannerAd.show() this._lastBannerAd = bannerAd &#125; &#125;, // é”€æ¯æ¨ªå¹…å¹¿å‘Š destroyAd() &#123; if(this._lastBannerAd) &#123; this._lastBannerAd.destroy() this._lastBannerAd = null &#125; &#125;, // å±•ç¤º æ¿€åŠ±å¹¿å‘Š // obj.success å¹¿å‘Šå±•ç¤ºå®Œæ¯•å›è°ƒ // obj.fail å¹¿å‘Šå±•ç¤ºä¸­é€”è¢«ç©å®¶ç»™å…³é—­ä¼šå›è°ƒ showViewAd(obj)&#123; if(CC_WECHATGAME &amp;&amp; wx &amp;&amp; typeof(wx.createRewardedVideoAd) != undefined) &#123; let videoAd = wx.createRewardedVideoAd(&#123; adUnitId: 'adunit-4db163908fba72f2' &#125;) videoAd.load() .then(() =&gt; videoAd.show()) .catch(err =&gt; &#123; // console.log(err.errMsg) videoAd.load.then(() =&gt; videoAd.show()) &#125;) videoAd.onClose(res =&gt; &#123; if (res &amp;&amp; res.isEnded || res === undefined) &#123; // æ­£å¸¸æ’­æ”¾ç»“æŸï¼Œå¯ä»¥ä¸‹å‘æ¸¸æˆå¥–åŠ± if(obj.success) &#123; obj.success(res) &#125; &#125; else &#123; // æ’­æ”¾ä¸­é€”é€€å‡ºï¼Œä¸ä¸‹å‘æ¸¸æˆå¥–åŠ± if(obj.fail) &#123; obj.fail() &#125; &#125; &#125;) videoAd.onError(res =&gt;&#123; console.log('é”™è¯¯',res) &#125;) &#125; else &#123; T.showTips('å¾®ä¿¡ç‰ˆæœ¬è¿‡ä½,è¯·å‡çº§ä½¿ç”¨') &#125; &#125;, å®¢æˆ·ç«¯çš„ä»£ç æ¯”è¾ƒçš„ç®€å•,ä»£ç é‡Œéƒ½æœ‰æ³¨é‡Š,è¿™é‡Œå°±ä¸åšè¿‡å¤šçš„è§£é‡Šäº†.","tags":[{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"},{"name":"å¹¿å‘Š","slug":"å¹¿å‘Š","permalink":"https://leng521.top/tags/å¹¿å‘Š/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆå¼€å‘é—®é¢˜æ€»ç»“","date":"2018-08-11T15:43:19.000Z","path":"/posts/4ec7de9/","text":"æœ€è¿‘ä¸€ä¸ªæœˆæœ‰ç‚¹å¿™å‘µ,éƒ½æ²¡æœ‰æ—¶é—´å†™åšå®¢,ä»Šå¤©å°±æŠ½å‡ºä¸€ç‚¹æ—¶é—´è®°å½•ä¸€ä¸‹è¿™ä¸€ä¸ªæœˆä¸­æˆ‘å¼€å‘è¿‡ç¨‹é‡åˆ°çš„é—®é¢˜,é¡ºä¾¿è®°å½•ä¸€ä¸‹å¾®ä¿¡å°æ¸¸æˆå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜. ä»Šå¤©å°±æ¥ç€,ä¸Šé¢å†™çš„å‘å¸ƒæµç¨‹,æ¥ç€å†™ä¼šé¢ä¸´çš„é—®é¢˜å§. æ›´æ–°æ–°ç‰ˆæœ¬é—®é¢˜ä½ çš„æ¸¸æˆä¸Šçº¿å,é¦–å…ˆé¢ä¸´çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯,æ¸¸æˆæ›´æ–°é€»è¾‘é—®é¢˜,æ¯”å¦‚æç¤ºç©å®¶æ›´æ–°æ¸¸æˆåˆ°æœ€æ–°çš„æ¸¸æˆç‰ˆæœ¬.è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨å°æ¸¸æˆæä¾›çš„API. æˆ‘è¿™é‡ŒåºŸè¯ä¸å¤šè¯´ç›´æ¥ç»™ä½ ä»¬å‚è€ƒä»£ç . 123456789101112131415161718192021checkNewVersion() &#123; if (CC_WECHATGAME &amp;&amp; typeof wx.getUpdateManager === 'function') &#123; const updateManager = wx.getUpdateManager() updateManager.onCheckForUpdate(function (res) &#123;&#125;) updateManager.onUpdateReady(function ( res ) &#123; wx.showModal(&#123; title: 'æ›´æ–°æç¤º', content: 'æ–°ç‰ˆæœ¬æ¥è¢­ï¼Œæ˜¯å¦é‡å¯åº”ç”¨ï¼Ÿ', success: function (res) &#123; if (res.confirm) &#123; updateManager.applyUpdate() &#125; &#125; &#125;) &#125;) updateManager.onUpdateFailed(function () &#123;&#125;) &#125; &#125; è¿™é‡Œä¸»è¦æ˜¯ç”¨åˆ°äº†å¾®ä¿¡äº¤äº’æ§ä»¶ä¸­çš„ showModal . è¿™ä¸ªå‡½æ•° ç›´æ¥å°±æ˜¯åœ¨å¯åŠ¨åº”ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨.æ£€æµ‹æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬. å¾®ä¿¡ç”¨æˆ·æ‹’ç»æˆæƒé—®é¢˜è¿˜æ˜¯ç›´æ¥ä¸Šä»£ç ,è¯´çš„å¤š,ä¸å¦‚è‡ªå·±çœ‹æ˜ç™½æ˜¯æ€ä¹ˆå›äº‹.12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667getUserInfo(func_) &#123; if(!this.checkIsWeChat()) &#123;return;&#125; wx.getUserInfo(&#123; withCredentials : false, success: (res) =&gt; &#123; let userInfo = res.userInfo // æˆæƒæˆåŠŸ // avatarUrl // nickName // gender //æ€§åˆ« 0ï¼šæœªçŸ¥ã€1ï¼šç”·ã€2ï¼šå¥³ // province çœ // city // country &#125;, fail: (res)=&gt;&#123; // æœªæˆæƒ å¤„ç† wx.showModal(&#123; title: 'æ¸©é¦¨æç¤º', content: 'ä¸ºäº†è‰¯å¥½çš„ä½“éªŒ,è¯·å¼€å¯ç”¨æˆ·ä¿¡æ¯æˆæƒ', success: res =&gt;&#123; if(res.confirm || res.cancel) &#123; let button = wx.createOpenSettingButton(&#123; type: 'text', text: 'æ‰“å¼€è®¾ç½®é¡µé¢', style: &#123; left: 10, top: 76, width: 170, height: 40, lineHeight: 40, backgroundColor: '#4b6881', color: '#ffffff', textAlign: 'center', fontSize: 16, borderRadius: 4 &#125; &#125;) button.show() button.onTap(() =&gt; &#123; wx.getSetting(&#123; success: res =&gt; &#123; button.destroy() if(res.authSetting['scope.userInfo']) &#123; wx.getUserInfo(&#123; withCredentials : false, success: res =&gt; &#123; let info = res.userInfo KUN.Server.uploadUserData(JSON.stringify(info),res=&gt;&#123; if(res == '1') &#123; func_() &#125; else &#123; // æš‚æ—¶ä¸åšå¤„ç† &#125; &#125;) &#125; &#125;) &#125; &#125; &#125;) &#125;) &#125; &#125; &#125;) &#125; &#125;); &#125;, è¿™é‡Œé¢å°±éšä¾¿è®²è§£ä¸€ä¸‹,ä¸»è¦æ˜¯ç”¨åˆ°äº†è¿™ä¸ªapiwx.createOpenSettingButton,åœ¨ç°åœ¨çš„å¾®ä¿¡å°æ¸¸æˆçš„æ–‡æ¡£é‡Œé¢æ²¡æœ‰ æŒ‰é’®äº‹ä»¶å“åº”çš„æ–¹æ³•å,æˆ‘è¿™é‡Œå¤„ç†çš„æ–¹æ³•æ˜¯åœ¨æ¨¡æ‹Ÿå™¨ä¸­æŠŠbuttonæ‰“å°å‡ºæ¥ç„¶åçœ‹é‡Œé¢çš„è¯¦ç»†å±æ€§å’Œæ–¹æ³•,æˆ‘è¿™é‡Œå‘ç°äº†ä¸€ä¸ªå« onTap. ä¸»è¦çš„æ€è·¯æ˜¯ é¦–æ¬¡è¿›å…¥æ¸¸æˆ -&gt; ç”¨æˆ·æ‹’ç»æˆæƒ -&gt; è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ -&gt; åˆ›å»ºæ‰“å¼€æ—¶è®¾ç½®çš„æŒ‰é’® -&gt; ç»‘å®šç›‘å¬äº‹ä»¶(onTap) -&gt; å†æ¬¡å¤„ç†è·å–ç”¨æˆ·ä¿¡æ¯çš„é€»è¾‘. å°æ¸¸æˆè·³è½¬åŠŸèƒ½æœ€è¿‘å°æ¸¸æˆåˆæ›´æ–°äº†ä¸€ä¸‹,å‡ºç°äº†ä¸€ä¸ªå°ç¨‹åºè·³è½¬åŠŸèƒ½,ä¸»è¦çš„API æ˜¯wx.navigateToMiniProgram è¿™é‡Œé¢ä½ ä¸»è¦å»å¡«å†™ appid å’Œè¦è·³è½¬çš„å‘è¡Œç‰ˆæœ¬ ,,, å…¶ä»–çš„ä½ å¯ä»¥å»é€‰æ‹©ä¹Ÿå¯ä»¥ä¸ç”¨é€‰æ‹©. è¿˜æ˜¯è€æ ·å­ç›´æ¥ä¸Šä»£ç 12345678910111213141516171819if (typeof(wx.navigateToMiniProgram) != 'undefined') &#123; wx.navigateToMiniProgram(&#123; appId: 'xxxx', path: '', // è¿™ä¸ªå¯ä»¥å¡«å†™ä¸ªç©º. // extarData: &#123; // open: '' // &#125;, envVersion: 'release', success(res) &#123; // æ‰“å¼€æˆåŠŸ &#125;, fail(res) &#123; // æ‰“å¼€å¤±è´¥ &#125; &#125;)&#125;else&#123; // æç¤ºç”¨æˆ·å¾®ä¿¡ç‰ˆæœ¬è¿‡ä½&#125; å°æ¸¸æˆæ¨å¹¿ä¸­é‡åˆ°çš„é”™è¯¯åœ¨æˆ‘è¿™ç¯‡åšå®¢æ²¡æœ‰å†™å®Œä¹‹å‰å°±æ”¶åˆ°äº† boss çš„å¾®ä¿¡æ¶ˆæ¯,è¯´ç”¨æˆ·è¿›ä¸å»äº†,é»‘å±äº†,æˆ‘æ˜¯ä¸€è„¸è’™è”½,æµ‹è¯•å®Œå…¨æ²¡æœ‰é—®é¢˜,å»æ¨å¹¿çš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†, ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªé—®é¢˜(æˆ‘åªæ˜¯è®°å½•æˆ‘é‡åˆ°é—®é¢˜,å¸Œæœ›èƒ½å¤Ÿå¯¹ä½ æœ‰å¸®åŠ©,åªæ˜¯è¯´ä½œå‚è€ƒå§,æˆ‘ä¹Ÿæ˜¯ä¸€ç‚¹ç‚¹å»é‡‡å‘,ä¸€ç‚¹ç‚¹å»è®°å½•.o(ï¿£ï¸¶ï¿£)o(æŒç»­æ›´æ–°ä¸­)) 1.ç”¨æˆ·çš„å¾®ä¿¡å°æ¸¸æˆç‰ˆæœ¬å¤ªä½,å¯¼è‡´ä½ ä½¿ç”¨å¾®ä¿¡æœ€æ–°apiæ—¶å€™æŠ¥é”™. åªè¦åœ¨è°ƒç”¨è¯¥APIçš„æ—¶å€™ åŠ ä¸€ä¸ªåˆ¤æ–­ typeof(ä½ è¦è°ƒç”¨çš„å°æ¸¸æˆçš„å‡½æ•°) != undefined,å³å¯ 2.æœåŠ¡å™¨åœ°å€é…ç½® httpsåè®®åªèƒ½æ˜¯ 443 å—? ç»è¿‡æˆ‘æµ‹è¯•,ä¸æ˜¯çš„åªè¦ä½ åœ¨å°ç¨‹åºåå°é…ç½® ç±»ä¼¼è¿™æ ·çš„æ ¼å¼å…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„ è¿™æ ·å°±å¯ä»¥å»è®¿é—® æœåŠ¡å™¨å…¶ä»–çš„ç«¯å£äº† https://xxx.com:8080 æˆ‘è¿™é‡Œè¯´æ˜ä¸€ä¸‹,æˆ‘æ²¡æœ‰å»æµ‹è¯• websocket å› ä¸ºç°åœ¨ä¸šåŠ¡è¿˜æ²¡æœ‰è¿™æ–¹é¢çš„ä¸šåŠ¡.æœ‰çš„å°ä¼™ä¼´å¯å»æµ‹è¯•ä¸€ä¸‹,å¯ä»¥å‘Šè¯‰æˆ‘ä¸€å£°.è°¢è°¢. æš‚æ—¶å…ˆå†™åˆ°è¿™é‡Œ,åé¢è¿™ä¸ªæˆ‘ä¼šæŒç»­æ›´æ–°çš„,å¦‚æœ‰ä¸å¯¹æ¬¢è¿æŒ‡æ­£.","tags":[{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆå‘å¸ƒæµç¨‹","date":"2018-07-09T15:02:35.000Z","path":"/posts/da41a120/","text":"ä»Šå¤©ä¸»è¦è¯´ä¸€ä¸‹å¾®ä¿¡å°æ¸¸æˆå‘å¸ƒæµç¨‹å§,è¿™ç¯‡æ–‡ç« ä¸ä¼šå†™çš„å¤ªé•¿,æ¶‰åŠçš„ä¸œè¥¿ä¸å¤š. ä¸ªäººå‘å¸ƒ å’Œ ä¼ä¸šå‘å¸ƒçš„æµç¨‹ ä»£ç ä¸Šä¼ çš„æ³¨æ„çš„é—®é¢˜ ä»£ç å®¡æ ¸ä¼šå‡ºç°çš„é—®é¢˜ #ä¸ªäººå‘å¸ƒå’Œä¼ä¸šå‘å¸ƒ è¿™é‡Œçš„ä¸ªäººå‘å¸ƒå’Œä¼ä¸šå‘å¸ƒæ˜¯ å–å†³äº ä½ æ³¨å†Œè¿™ä¸ªå…¬ä¼—å·æ—¶ ç»‘å®šçš„ä¸»ä½“ä¿¡æ¯æ˜¯ ä¸ªäººè¿˜æ˜¯ä¼ä¸š ä¸ªäººå‘å¸ƒä¸ªäººå‘å¸ƒæ—¶éœ€è¦ ä¸¤ä»½ææ–™ å’Œä¸€ä¸ª è‹¹æœçš„å¼€å‘è€…è´¦å· ä¸ªäººå‡†å¤‡: - æ¸¸æˆè‡ªå®¡æŸ¥æŠ¥å‘Š - è®¡ç®—æœºè½¯ä»¶è‘—ä½œæƒç™»è®°ä¹¦(ç®€ç§° è½¯è‘—) - Apple ID (è‹¹æœå¼€å‘è€…è´¦å·) 1.æœ€ä¸Šé¢å°±æ˜¯ä½ æœ€åŸºç¡€çš„é…ç½®ä¿¡æ¯,ä½ çš„æ¸¸æˆç±»å‹,ä½ ä½¿ç”¨çš„æ¸¸æˆå¼•æ“,2.ç„¶åå°±æ˜¯ä¸Šä¼  åˆšæ‰æåˆ°çš„é‚£ä¸¤ä»½ææ–™.3.å¡«å†™ä½ æœ¬æ¬¡è·Ÿæ–°çš„å†…å®¹.4.å¦‚æœä½ çš„æ¸¸æˆè‡ªå·±è´¦å·ç³»ç»Ÿ,éœ€è¦æä¾›ä¸€ä»½ç»™å¾®ä¿¡å›¢é˜Ÿåšæµ‹è¯•çš„è´¦å·,å¯†ç ,æ²¡æœ‰å¯ä»¥ä¸å¡«å†™.5.æœ€åä¸€é¡¹ Apple ID(å¿…é¡»æ˜¯å¼€å‘è€…è´¦å·). è‡³äºæ€ä¹ˆç”³è¯· æˆä¸º è‹¹æœçš„å¼€å‘è€… ä¸Šç™¾åº¦è‡ªå·±æŸ¥ ä¼ä¸šå‘å¸ƒæ•´ä½“æµç¨‹åŒä¸Šä½†æ˜¯æ¯”ä¸Šé¢å¤šè¦ä¸¤ä»½ææ–™ ä¼ä¸šéœ€è¦: - æ¸¸æˆè‡ªå®¡æŸ¥æŠ¥å‘Š - è®¡ç®—æœºè½¯ä»¶è‘—ä½œæƒç™»è®°ä¹¦(ç®€ç§° è½¯è‘—) - å¹¿ç”µæ€»å±€ç‰ˆå·æ‰¹æ–‡(ç®€ç§°ç‰ˆå·) - æ–‡åŒ–éƒ¨å¤‡æ¡ˆä¿¡æ¯ - Apple ID (è‹¹æœå¼€å‘è€…è´¦å·) å·®å¼‚å¦‚æœæ˜¯ä»¥ä¸ªäººå‘å¸ƒçš„è¯ ä½ çš„æƒé™ä¼šå—åˆ°å½±å“,ä¸ªäººä¸æ”¯æŒå†…ç½®æ”¯ä»˜,å”¯ä¸€ç›ˆåˆ©çš„é€”å¾„å°±æ˜¯æ¥å…¥å¹¿å‘Š, ä»¥ä¼ä¸šå‘å¸ƒ å¯ä»¥æ¥å…¥æ”¯ä»˜ , ä½†æ˜¯ éœ€è¦ç‰ˆå·(ç”³è¯·æ—¶é—´å‘¨æœŸé•¿) , æ¯”è¾ƒçš„éº»çƒ¦ ä¸Šé¢çš„ä¿¡æ¯ å¡«å†™å®Œæ¯•å å¯ä»¥ç›´æ¥æäº¤å‘å¸ƒ. ä»£ç ä¸Šä¼ çš„æ³¨æ„çš„é—®é¢˜ä½ åªæœ‰æäº¤ä»£ç åæ‰å¯ä»¥å‘å¾®ä¿¡æäº¤å®¡æ ¸, ä¸Šä¼ ä»£ç çš„æ­¥éª¤å¾ˆç®€å•, æ‰“å¼€ä½ çš„å¾®ä¿¡å¼€å‘è€…å·¥å…· ç‚¹å‡»ä¸Šä¼  ç„¶åä¼šå¼¹å‡ºå¦‚ä¸‹çš„å¼¹çª— å¡«å†™ä½ çš„è¿™æ¬¡çš„ç‰ˆæœ¬ä¿¡æ¯ å’Œ è¿™æ¬¡æ¸¸æˆæ›´æ–°çš„å†…å®¹æˆ–åˆ™æ˜¯ä¿®å¤çš„bug è¿™é‡Œå¦‚æœæ˜¯ä½¿ç”¨ cocos creator çš„è¯ ,,ç”±äºcreatorçš„jsæ–‡ä»¶è¿‡å¤§ å¯¼è‡´ ES6 è½¬æ¢æˆ ES5 å¤±è´¥ ,ä½ å¯ä»¥è‡ªå·±åœ¨ç½‘ä¸Šæ‰¾ è½¯ä»¶å»è§£å†³è¿™ä¸ªé—®é¢˜ ,, å½“ç„¶ä¹Ÿå¯ä»¥å…ˆç›´æ¥æäº¤. ,, è¿™ä¸ªé—®é¢˜ä¸å¤§,, ç„¶ååœ¨å¾®ä¿¡åå° çš„ å¼€å‘ç®¡ç†é‡Œé¢ ä¼šæœ‰ä½ æäº¤çš„å°æ¸¸æˆç‰ˆæœ¬ä¿¡æ¯ , è¿™é‡Œä½ å¯ä»¥æŠŠä½ åˆšæ‰æäº¤çš„å°æ¸¸æˆè®¾ç½®ä¸ºä½“éªŒç‰ˆæœ¬,è¿™æ ·åšçš„å¥½å¤„æ˜¯,äº§ç”Ÿçš„äºŒç»´ç ä¸ä¼šè¿‡æœŸ. è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,ä½ æ¯æ¬¡ä¸Šä¼ ä»£ç éƒ½ä¼šè¦†ç›–æ‰åå°ä¸Šå·²ç»å­˜åœ¨çš„ç‰ˆæœ¬,ä¹Ÿå°±æ˜¯è¯´ä½ çš„åå°,åªèƒ½å­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬.ä¸ä¼šåŒæ—¶å‡ºç°å¤šä¸ªä¸åŒçš„ç‰ˆæœ¬. ä»£ç å®¡æ ¸ä¼šå‡ºç°çš„é—®é¢˜ ä»£ç å®¡æ ¸ä¸é€šè¿‡ åŸå› å‡ºç° å¯èƒ½æ˜¯å‡ºç°è¯±å¯¼åˆ†äº«,å¦‚æœæ˜¯è¿™ç§åŸå› ,ä¸å¯æ€•, å…·ä½“çš„åšæ³•å°±æ˜¯ ,å°†å¾®ä¿¡å›¢é˜Ÿåé¦ˆå‡ºæ¥æˆªå›¾ä¸­æ¶‰åŠåˆ°è¯±å¯¼åˆ°åˆ†äº«çš„åŠŸèƒ½ çš„æ§åˆ¶æƒå…¨éƒ¨ç§»äº¤åˆ°åç«¯, å°±æ˜¯æ¯æ¬¡æ¸¸æˆå¯åŠ¨çš„æ—¶å€™éƒ½ä¼šæƒ³åç«¯ è¯·æ±‚ä¸€æ¬¡æ•°æ® ,, è®¿é—®æ˜¯å¦å¼€å¯æŸä¸ªæ¨¡å—,åœ¨å®¡æ ¸çš„æ—¶å€™å°†è¿™äº›æ¨¡å—åœ¨åå°å…³æ‰,å®¡æ ¸é€šè¿‡åå†åœ¨åå°æ‰“å¼€,å°±è¡Œäº†.","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"}]},{"title":"å¾®ä¿¡å°æ¸¸æˆå¼€å‘è®°å½•","date":"2018-06-30T14:28:48.000Z","path":"/posts/777fe656/","text":"åˆšæ¢ä¸ªæ–°å·¥ä½œ,æ˜¯åšå¾®ä¿¡å°æ¸¸æˆçš„.å·²ç»å¥½é•¿æ—¶é—´æ²¡æœ‰å†™ä¸€äº›ä¸œè¥¿äº†,ä»Šå¤©å°±åœ¨è¿™æ€»ç»“ä¸€ä¸‹æˆ‘è¿™ä¸ªæœˆçš„åšçš„äº‹å§,æˆ‘ä¹Ÿæ˜¯åˆšä½¿ç”¨ cocos creator æ—¶é—´ä¸é•¿,ä»¥å‰ä¸€ç›´ç”¨çš„æ˜¯ cocos2dx-lua ,å†™çš„ä¸å¥½è¯·å¤šå¤šæŒ‡æ•™,å¥½äº†åºŸè¯ä¸å¤šè¯´. æœ¬ç‰‡æ–‡ç« ä¸»è¦æ˜¯å¯¹å¾®ä¿¡å°æ¸¸æˆå¼€å‘å’Œæ€»ç»“.å¼•æ“: cocos creatorå‘å¸ƒå¹³å°: å¾®ä¿¡å°æ¸¸æˆ(å¾®ä¿¡sdk ver:2.1.1) æœ¬æ–‡å¤§çº² ä½¿ç”¨ cocos creator å¼•æ“å‘å¸ƒåˆ°å¾®ä¿¡ä¸Š è®°å½•è°ƒç”¨å¾®ä¿¡ API çš„è®°å½• å¾®ä¿¡æ’è¡Œæ¦œå®ç°(å¼€æ”¾æ•°æ®åŸŸçš„ä½¿ç”¨) åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ å‘å¸ƒè¿™é‡Œé¦–å…ˆè¦å‡†å¤‡çš„ä¸œè¥¿æ˜¯: appid ä½ çš„æ¸¸æˆå·¥ç¨‹ å¾®ä¿¡å¼€å‘å·¥å…· appid:æ˜¯ä½ æ³¨å†Œå¾®ä¿¡å°ç¨‹åºå…¬ä¼—å·æ—¶å€™èƒ½å¤Ÿå¾—åˆ°çš„,è¿™ä¸ªæ˜¯ä½ å‘å¸ƒçš„æ—¶å€™è¦ç”¨çš„ä¸œè¥¿,å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ cocos creator æä¾›çš„é»˜è®¤çš„è´¦å·,(ä½¿ç”¨è¿™ä¸ªè´¦å·çš„å¼Šç«¯æ˜¯ä½ é¡¹ç›®ç›¸å…³äººå‘˜æ²¡åŠæ³•æµ‹è¯•,åªæœ‰ä½ çš„å¾®ä¿¡è´¦å·å¯ä»¥åšæµ‹è¯•)å¾®ä¿¡å›¢é˜Ÿæ³¨å†Œå’Œæ¥å…¥å¾®ä¿¡å°æ¸¸æˆçš„æ•™ç¨‹åœ¨è¿™é‡Œæ³¨å†Œä½ çš„å¾®ä¿¡å…¬ä¼—å·è´¦å· å¾®ä¿¡å…¬ä¼—å¹³å°åœ¨è¿™é‡Œé€‰æ‹©å°ç¨‹åºè¿›è¡Œæ³¨å†Œ,ç„¶åæŒ‰ç…§æµç¨‹è¿›è¡Œæ³¨å†Œ,ä½ å¯ä»¥æ˜¯ä¸ªä½“,ä¹Ÿå¯ä»¥æ˜¯ä»¥ä¼ä¸šèº«ä»½è¿›è¡Œæ³¨å†Œ,(ä¸ªäººæ³¨å†Œåœ¨åæœŸå‘å¸ƒä¸Šçº¿çš„æ—¶å€™è¦åšçš„äº‹æƒ…æ¯”è¾ƒå°‘,ä¼ä¸šæ³¨å†Œå°±éœ€è¦ä¸œè¥¿æ¯”ä¸ªäººå¤šä¸¤æ ·,åé¢è¯¦ç»†ä»‹ç».) ä¸€èˆ¬è¿™äº›ä¸œè¥¿æ³¨å†Œæ¯”è¾ƒç®€å•,è¿™é‡Œå°±ä»”ç»†å™è¿°äº†,å¦‚æœä½ æ˜¯ç®¡ç†å‘˜çš„è¯,ä½ å¯å¾®ä¿¡æ‰«ç ç›´æ¥ç™»å½•,å¦‚æœä¸æ˜¯å¯ä»¥è®©ç®¡ç†å‘˜ç»™ä½ ç›´æ¥åŠ ä¸€ä¸‹æƒé™. ä½ éœ€è¦é…ç½®çš„ä¿¡æ¯å¦‚ä¸‹: è¿™é‡Œè¦æ³¨æ„çš„å°±æ˜¯æˆ‘ç¬¬äºŒå¼ å›¾é‡Œé¢æŒ‡å‘çš„åœ°æ–¹, è¿™äº›ä½ éƒ½å¡«å†™å®Œæ¯•åå°±å¯ä»¥æ‹¿åˆ° appid äº†,æœ‰äº†è¿™ä¸ªidåä½ å¯ä»¥ç»™å…¶ä»–çš„é¡¹ç›®ç›¸å…³æµ‹è¯•äººå‘˜åœ¨å¾®ä¿¡åå°æ·»åŠ  æˆå‘˜å¹¶ç»™ä»–ä»¬ç›¸åº”çš„æƒé™,è¿™æ ·ä»–ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæµ‹è¯•ä½ ç°åœ¨å¼€å‘çš„å°æ¸¸æˆäº†. ç„¶ååœ¨ cocos creator å¼•æ“ä¸­å»å¡«å†™, æˆ‘è¿™é‡ŒæŒ‡å‘äº†å‡ ä¸ªåœ°æ–¹,è¿™é‡Œä½ ä»¬è¦æ˜¯æ˜ç™½çš„è¯å°±æ›´å¥½,è¦æ˜¯ä¸æ˜ç™½,å…ˆè¿™æ ·åš,æˆ‘åªæ˜¯ä¸æƒ³è¦è¿™ç¯‡æ–‡ç« ç¯‡å¹…è¿‡é•¿. è‡³äºä¸‹é¢çš„ å¼€æ”¾æ•°æ®åŸŸ, æœåŠ¡å™¨åœ°å€, ç°åœ¨å¯ä»¥å…ˆä¸é…ç½®, åˆ°åé¢æˆ‘ä¼šå»ä»‹ç»çš„. åœ¨è¿™é‡Œå†è¯´ä¸€ä¸‹,åœ¨ç‚¹å‡»è¿è¡Œçš„æ—¶å€™éœ€è¦å…ˆé…ç½®,å¾®ä¿¡å¼€å‘å·¥å…·,å¾®ä¿¡å¼€å‘å·¥å…· download é‚£é‡Œé¢æœ‰é…ç½®çš„å®Œæ•´è·¯å¾„.^-^ ç„¶åå¼•æ“ä¼šåœ¨æ„å»ºå®Œæˆä¹‹å,ç‚¹å‡»è¿è¡Œ,å¾®ä¿¡å¼€å‘è€…å·¥å…·å¯åŠ¨å,ç‚¹å‡»é¢„è§ˆä¼šç”Ÿæˆä¸€ä¸ªäºŒç»´ç ,ç„¶ååœ¨å¾®ä¿¡åå°,æˆå‘˜ç®¡ç†é‡Œé¢çš„æˆå‘˜åªè¦æœ‰æµ‹è¯•æƒé™çš„éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªäºŒç»´ç è¿›è¡Œæ¸¸æˆæµ‹è¯•. å¥½äº†åˆ°è¿™é‡Œä½ å°±å‘å¸ƒæˆåŠŸäº†. è¿™ä¸ªæ˜¯ cocos creator å®˜æ–¹å›¢é˜Ÿæä¾›å‘å¸ƒå¾®ä¿¡å°æ¸¸æˆçš„æ•™ç¨‹ å¦‚æœè¿è¡Œå‡ºç°é”™è¯¯å¯ä»¥åˆ°è¿™é‡Œçœ‹çœ‹æœ‰æ²¡æœ‰å¾®ä¿¡å°æ¸¸æˆé—®é¢˜æ€»æ±‡ #å¾®ä¿¡å°æ¸¸æˆAPI å¾®ä¿¡å°æ¸¸æˆAPIå¾®ä¿¡å°æ¸¸æˆæ–‡æ¡£ è¿™é‡Œåªæ˜¯æ¼”ç¤º cocos creator æ˜¯æ€ä¹ˆè°ƒç”¨å¾®ä¿¡å°æ¸¸æˆçš„ api,å¤æ‚çš„è°ƒç”¨æˆ‘å°±å…ˆä¸è¯´äº†. 123456789101112131415161718192021function test(argument) &#123; // CC_WECHATGAME è¿™ä¸ªæ˜¯ creator å…¨å±€å®ç”¨æ¥åˆ¤æ–­æ˜¯å¦åœ¨å¾®ä¿¡å°æ¸¸æˆç¯å¢ƒä¸‹ if(CC_WECHATGAME)&#123; wx.login(&#123; success: ()=&gt; &#123; // è°ƒç”¨æˆåŠŸåå›è°ƒ wx.getUserInfo(&#123; success: res =&gt; &#123; console.log(res) &#125; &#125;) &#125;, fail: ()=&gt; &#123; // è°ƒç”¨å¤±è´¥åå›è°ƒ &#125;, complete: ()=&gt; &#123; // æˆåŠŸå¤±è´¥éƒ½ä¼šè°ƒç”¨ &#125; &#125;); &#125;&#125; #å¾®ä¿¡å¼€æ”¾æ•°æ®åŸŸ å¾®ä¿¡çš„å¼€æ”¾æ•°æ®åŸŸè¦æ±‚,è§£é‡Šèµ·æ¥æ¯”è¾ƒå¤æ‚,æˆ‘å…ˆç»™ä½ æä¾›å¾®ä¿¡å®˜æ–¹çš„è§£é‡Š,å’Œcreator å›¢é˜Ÿåšå‡ºçš„è§£é‡Šå’Œä¾‹å­. å¾®ä¿¡çš„è§£é‡Šcreatorå›¢é˜Ÿçš„è§£é‡Š ç›¸ä¿¡ä½ çœ‹å®Œè¿™ä¸¤ä¸ªè§£é‡Š,ä¼šæœ‰ä¸€äº›æ¦‚å¿µäº†,è¿™é‡Œæˆ‘å°±å¼€å§‹ç›´æ¥ä¸Šä»£ç ,è¿™ä¸ªæ˜¯æœ€ç›´æ¥. è¿™ä¸ªæ˜¯ä¸»åŸŸæ¸²æŸ“çš„ä»£ç sharedCanvas æ˜¯å¾®ä¿¡æä¾›çš„å…¨å±€å˜é‡,åœ¨å¾®ä¿¡ç¯å¢ƒä¸‹æœ‰ç”¨,å½“ç„¶è¿™ä¸ªæ˜¯æœ‰å¼€æ”¾æ•°æ®åŸŸçš„å·¥ç¨‹åæ‰è¡Œ. 123456789101112131415161718192021222324252627cc.Class(&#123; extends: cc.Component, properties: &#123; rankView: cc.Sprite, &#125;, onLoad() &#123; if (CC_WECHATGAME) &#123; this.tex = new cc.Texture2D() window.sharedCanvas.width = 720 window.sharedCanvas.height = 1280 &#125; &#125;, update() &#123; this._updateSubDomainCanvas() &#125;, // åˆ·æ–°å­åŸŸçš„çº¹ç† _updateSubDomainCanvas() &#123; if (CC_WECHATGAME) &#123; if (window.sharedCanvas != undefined) &#123; this.tex.initWithElement(window.sharedCanvas) this.tex.handleLoadedTexture() this.rankView.spriteFrame = new cc.SpriteFrame(this.tex) &#125; &#125; &#125;,&#125;); å‘é€å‘é€æ•°æ®çš„ä»£ç  1234567891011121314151617181920212223242526272829303132// è¿™ä¸ªæ˜¯ä¸Šä¼ åˆ†æ•°çš„ä¸€æ®µä»£ç /** @param score_ è¦ä¸Šä¼ çš„åˆ†æ•°*/uploadScore(score_)&#123; if(!this.checkIsWeChat()) &#123;return;&#125; GameTools.sendMessage(&#123; type: GameTools.msgType.submitScore, scoreData: &#123; key: cc.TB.GAME.weChatData.keyList[0], score: score_, &#125;, &#125;);&#125;// è¿™ç±»å‹å’Œå¼€æ”¾æ•°æ®åŸŸé‚£é‡Œçš„ç±»å‹ä¿æŒä¸€è‡´å°±è¡Œäº†.msgType: &#123; clear: 0, updateRank: 1, submitScore: 2, updateSelfRank: 3, groupShare: 4,&#125;,// è¿™ä¸ªæ˜¯è°ƒç”¨å¾®ä¿¡çš„API ç»™å¼€æ”¾æ•°æ®åŸŸå‘é€æ•°æ®çš„ APIsendMessage(data) &#123; if(CC_WECHATGAME) &#123; console.log('send sub content data'); let content = window.wx.getOpenDataContext(); content.postMessage(data); &#125;&#125;, å¼€æ”¾æ•°æ®åŸŸçš„ä»£ç  è¿™é‡Œæˆ‘ç›´æ¥æ”¾ä¸€ä¸ªæ–‡ä»¶çš„é“¾æ¥,æˆ‘å°±ä¸æ¥å»éƒ¨åˆ†ä»£ç äº†,ä½ å¯ä»¥ç›´æ¥ä¿®æ”¹ç„¶åè‡ªå·±ä½¿ç”¨. å¼€æ”¾æ•°æ®åŸŸä»£ç  openContentData.txt è¿™é‡Œåœ¨ä½ å‘å¸ƒå¼€æ”¾æ•°æ®åŸŸçš„å·¥ç¨‹çš„æ—¶å€™ å¥½äº†å¼€æ”¾æ•°æ®åŸŸ ä»‹ç»ç»“æŸ ^-^ #é—®é¢˜è®°å½• 1.æ¸¸æˆåŒ…ä½“è¶…è¿‡4M 1.å°†ä½ çš„èµ„æºæ”¾ç½®æœåŠ¡å™¨,åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°åç«¯é…ç½®ä½ çš„æœåŠ¡å™¨åœ°å€,è¿™é‡Œæ³¨æ„å¾®ä¿¡æ˜¯ä¸æ”¯æŒç›´æ¥å¡«å†™ip,è€Œä¸”è¿˜å¿…é¡»æ˜¯httpsåè®®. 2.æœ€è¿‘å¾®ä¿¡å‡ºç°ä¸ªåˆ†åŒ…åŠ è½½æœºåˆ¶,ä¹Ÿå¯ä»¥çªç ´å¾®ä¿¡ä¸èƒ½è¶…è¿‡4Mçš„æœºåˆ¶,è¿™ä¸ªæˆ‘è¿˜æ²¡æœ‰å®é™…å®ç°è¿‡å°±å…ˆä¸å†™åšæ³•äº†, 2.å¾®ä¿¡å°æ¸¸æˆåˆ†äº«ä¼ å‚é—®é¢˜1234567891011121314151617181920212223242526272829303132333435wx.shareAppMessage(&#123; title: 'è·Ÿæˆ‘ä¸€èµ·ç©', query: 'invite=1&amp;wc=2', imageUrl: address + 'share.jpg', success: (res) =&gt; &#123; console.log('åˆ†äº« æˆåŠŸ ', res); if (res.shareTickets != undefined &amp;&amp; res.shareTickets.length &gt; 0) &#123; &#125; &#125;&#125;);// è¿™é‡Œä¸»è¦æ˜¯åˆ©ç”¨ query è¿™ä¸ªå­—æ®µè¿›è¡Œå‚æ•°ä¼ é€’// **********************************************// å¯åŠ¨let option = wx.getLaunchOptionsSync();console.log('å°æ¸¸æˆå¯åŠ¨',option);if(option.shareTicket != undefined) &#123; cc.TB.GAME.weChatData.shareTicket = option.shareTicket; this.onGroupShareFunc();&#125;// ç”±åå°åˆ‡æ¢åˆ°å‰å°æ˜¯è°ƒç”¨çš„å‡½æ•°wx.onShow((res)=&gt;&#123; // shareTicket console.log('åˆ‡æ¢åˆ°å‰å°',res); if(res.shareTicket)&#123; cc.TB.GAME.weChatData.shareTicket = res.shareTicket; // æ˜¾ç¤ºç¾¤æ’è¡Œ this.onGroupShareFunc(); &#125;&#125;);// åœ¨è¿™é‡Œ è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼é‡Œ wx.getLaunchOptionsSync();// å’Œ è¿™ä¸ªå‡½æ•° wx.onShow() å›è°ƒé‡Œé¢ä¼šæœ‰åˆšæ‰ä¼ è¿›æ¥çš„å‚æ•° å¾®ä¿¡åˆ†äº«ä¸»è¦æ˜¯åˆ©ç”¨ query å­—æ®µ,è¿™ä¸ªå­—æ®µç±»å‹æ˜¯ string åªè¦æŒ‰ç…§è¿™ä¸ªæ ¼å¼å°±å¯ä»¥åœ¨åœ¨é€šè¿‡åˆ†äº«çš„é“¾æ¥è¿›å…¥æ¸¸æˆæ˜¯è·å–ç›¸åº”å‚æ•°çš„å€¼. å¥½äº†,ä»Šå¤©å°±å…ˆåˆ°è¿™é‡Œäº†.","tags":[{"name":"Cocos Creator","slug":"Cocos-Creator","permalink":"https://leng521.top/tags/Cocos-Creator/"},{"name":"å¾®ä¿¡å°æ¸¸æˆ","slug":"å¾®ä¿¡å°æ¸¸æˆ","permalink":"https://leng521.top/tags/å¾®ä¿¡å°æ¸¸æˆ/"}]},{"title":"è§£å†³è¿è¡Œexeæ—¶ç¼ºå°‘dllé—®é¢˜","date":"2018-05-23T09:01:51.000Z","path":"/posts/8e17853e/","text":"ä»Šå¤©ä¸»è¦æ˜¯è§£å†³å¦‚æœä½ ä½¿ç”¨ cocos2dx åšçš„æ¸¸æˆ(exe) è¦æ”¾åˆ°åˆ«äººçš„ç”µè„‘ä¸Šè¿è¡Œé—®é¢˜,åœ¨æœ‰äº›æ—¶å€™ä½ å¯èƒ½ä¼šå°†è‡ªå·±çš„exeæ”¾åˆ°åˆ«äººçš„ç”µè„‘ä¸Š,ä½†æ˜¯ä¸å¹¸çš„æ˜¯,è¿è¡Œä¸äº†,æç¤ºè¯´æ‰¾ä¸åˆ°*.dll. è§£å†³æ€è·¯1.ä½ å¯èƒ½ä¼šç›´æ¥å»ç™¾åº¦ä¸Šä¸‹è½½ä¸€å †dllä½†æ˜¯å‘ç°æ²¡ä»€ä¹ˆç”¨,è¿˜æ˜¯ä¼šæŠ¥é”™.é‚£å°±çœ‹æ¥è¿™ä¸ªæ€è·¯æ˜¯è¡Œä¸é€šçš„,æ¢ä¸€ä¸ªæ€è·¯å°±æ˜¯ä½ å»æ€è€ƒä½ çš„ç”µè„‘æ¯”ä»–ç”µè„‘å¤šäº†ä»€ä¹ˆä¸œè¥¿,å…¶å®ä¹Ÿå°±æ˜¯å¤šäº†cocos2dxçš„è¿è¡Œæ¡†æ¶,å¤šäº†ä¸ªVS.é‚£æ—¢ç„¶æˆ‘ä»¬å·²ç»å°†cocos2dxç¼–è¯‘å‡ºæ¥çš„å’Œé”ä¾èµ–çš„dllå·²ç»å…¨éƒ¨æ”¾åœ¨ä»–çš„ç”µè„‘ä¸Šäº†,é‚£å°±å‰©ä¸‹ä¸ªVS,è¿™ä¸‹ç›®æ ‡å¾ˆæ¸…æ™°å–½,ç›´æ¥ä»VSä¸‹æ‰‹,äº‹å®è¯æ˜è¿™æ˜¯å¯¹çš„. è§£å†³æ–¹æ¡ˆ1.å»æ‰¾VSçš„dllå­˜æ”¾çš„åœ°æ–¹,æˆ‘è¿™é‡Œå°±ä¸æ‰¾,ç›´æ¥åˆ©ç”¨ç”µè„‘ç®¡å®¶å»å…¨å±€æœç´¢æŸä¸ªæ–‡ä»¶,å¦‚ä¸‹å›¾ 2.å°†ä½ ç¼ºå°‘çš„dllå…¨éƒ¨æ”¾åœ¨å¯¹æ–¹è¿™ä¸ªè·¯å¾„ä¸‹C:\\Windows\\SysWOW64 Note:å½“ç„¶è¿™é‡Œä½ æ€•æ”¾åœ¨è¿™é‡Œå½±å“å…¶ä»–çš„åº”ç”¨çš„è¯ä½ ä¹Ÿå¯ä»¥ä¸æ”¾åœ¨,ç›´æ¥æ”¾åœ¨å’Œä½ è¦è¿è¡Œçš„exeåŒçº§ç›®å½•ä¸‹å°±è¡Œ.æˆ‘è¿™é‡Œåªæ˜¯ä¸ºäº†è§£å†³å¤šäººæ—¶å‡ºç°çš„é—®é¢˜. 3.copyä½ é€šè¿‡VSç¼–è¯‘å‡ºæ¥çš„exeå’Œå®ƒæ‰€ä¾èµ–çš„dllæ–‡ä»¶,å…·ä½“ç›®å½•åœ¨~/simulator/win32/*~ä»£è¡¨ä½ é¡¹ç›®çš„æ ¹ç›®å½•,ç„¶åå°†ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„srcå’Œresæ–‡ä»¶å¤¹æ‹·è´åˆ°ä»–çš„ç”µè„‘ä¸Š,å…¶å®å°±æ˜¯å°†win32ç›®å½•ä¸‹çš„srcå’Œresç»™åˆ é™¤,å°†ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„srcå’Œresæ”¾è¿›å»,ä¸ºäº†åªæ˜¯ä¿è¯èµ„æºå’Œä»£ç æ˜¯æœ€æ–°çš„. 4.å¦‚æœæœ‰äººåŠ¨äº†c++ä»£ç çš„è¯,ä½ å¦‚æœä¸æ˜¯å¤ªäº†è§£C++ä¸­dllæ˜¯å¹²å•¥çš„å°±ç›´æ¥å°†è‡ªå·±~/simulator/win32/*.dllè¿™ä¸ªç›®å½•ä¸‹çš„dllå†é‡æ–°è¦†ç›–ä¸€ä¸‹. å¥½äº†å°±å…ˆåˆ°è¿™é‡Œäº†.","tags":[{"name":"ç¼ºå°‘dll","slug":"ç¼ºå°‘dll","permalink":"https://leng521.top/tags/ç¼ºå°‘dll/"}]},{"title":"ç»™sublimeå†™è‡ªå®šä¹‰çš„æ’ä»¶","date":"2018-05-10T06:17:48.000Z","path":"/posts/b1de475b/","text":"ä»¥å‰æ€»æ˜¯åœ¨sublimeä¸­è£…å„ç§æ’ä»¶,å»å®ç°æŸç§ä¾¿æ·,å¦‚è£…ä¸€ä¸ª git æ’ä»¶å¯ä»¥ç›´æ¥å¿«é€Ÿçš„å»æŸ¥çœ‹å½“å‰æ‰“å¼€çš„æ–‡ä»¶ä¸è¿œç«¯çš„è¿™ä¸ªæ–‡ä»¶çš„å·®å¼‚.ä½†æ˜¯è¿™äº›æ’ä»¶æ€»æ˜¯æ»¡è¶³ä¸äº†ä½ çš„æ¬²æœ›,æœ‰çš„æ—¶å€™åœ¨æœ‰ä¸€äº›å¥‡è‘©çš„éœ€æ±‚,å¯èƒ½æ²¡æœ‰ç°æœ‰çš„æ’ä»¶å¯ç”¨,è¿™ä¸ªæ—¶å€™å°±è¦è‡ªå·±å»å†™æ’ä»¶äº†.é¦–å…ˆSublimeæ˜¯æ”¯æŒè‡ªå®šä¹‰æ’ä»¶çš„,å…¶æ¬¡æ˜¯Sublimeçš„æ’ä»¶æ˜¯é‡‡ç”¨pythonçš„è¯­æ³•,æ‰€ä»¥ä½ è¦åœ¨å†™æ’ä»¶ä¹‹å‰è‡³å°‘è¦äº†è§£pythonè¯­æ³•.ä¸ç„¶å°±æœ›è€Œç”Ÿç•äº†. ç¬¬ä¸€æ­¥ åˆ›å»ºpythonè„šæœ¬æ–‡ä»¶ç›´æ¥æ‰“å¼€ Sublime åœ¨æœ€ä¸Šé¢å·¥å…·æ ä¸­ æ‰¾åˆ° Tools/Developer/New Plugin ç‚¹å‡»å®Œæˆä¹‹åä¼šæœ‰ä¸€ä¸ªå†…å®¹ç±»ä¼¼ä¸‹é¢çš„æœªä¿å­˜æ–‡ä»¶1234567import sublimeimport sublime_pluginclass ExampleCommand(sublime_plugin.TextCommand): def run(self, edit): self.view.insert(edit, 0, \"Hello, World!\") å…³äº sublime è¿™ä¸¤ä¸ªåŒ…çš„ APIå¯ä»¥å» SublimeAPI å¯èƒ½éœ€è¦ç¿»å¢™,æˆ‘åªæ˜¯ç¿»å¢™ä¹‹åå¿«äº†è®¸å¤š. ç¬¬äºŒæ­¥ å¡«å……è‡ªå·±çš„pythonæ–‡ä»¶å¹¶ä¿å­˜åˆ°ç›¸åº”ä½ç½® æ‰“å¼€ä¸Šé¢æ‰€æŒ‡å‘çš„ç›®å½•è‡ªå·±æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹,å’Œä½ é‚£ä¸ªUserç›®å½•åŒçº§å°±è¡Œäº†.åˆ—å¦‚æˆ‘å»ºç«‹ä¸€ä¸ªPythonHead çš„ç›®å½•å¦‚ä¸‹: é‡Œé¢æœ‰ä¸ª head.py çš„pythonæ–‡ä»¶,å…·ä½“å†…å®¹å¦‚ä¸‹ 123456789101112import sublimeimport sublime_pluginimport datetimestr_head = \"\"\"#!usr/bin/env python2#-*- coding: utf-8 -*-#data:%s\\n\"\"\"class PyHeadCommand(sublime_plugin.TextCommand): def run(self, edit): self.view.insert(edit, 0,str_head % (datetime.datetime.now().strftime(\"%y-%m-%d %H:%m:%s\"))) è¿™ä¸ªè‡ªå®šä¹‰çš„åŠŸèƒ½ä¸»è¦æ˜¯ç»™è‡ªå·±pythonæ–‡ä»¶å®šä¹‰åŠ äº†ä¸€äº›é€šç”¨çš„æ³¨é‡Šè€Œå·².æ ·å­å°±å¦‚ä¸‹é¢è¿™æ · è¿™ä¸€å†™å®Œä¹‹åä½ å¯ä»¥ç›´æ¥æ‰“å¼€ Sublime çš„å‘½ä»¤è¡Œ å¿«æ·é”® ctrl+` å¦‚æœå¿«æ·é”®å†²çªå¯ä»¥ç›´æ¥ View/Show Console è¿™ä¸ªä¹Ÿå¯ä»¥ ç›´æ¥åœ¨è¿™é‡Œé¢è¾“å…¥å¦‚ä¸‹ä»£ç  å°±ä¼šå‘ä¸Šé¢æ˜¾ç¤ºçš„é‚£æ ·. å½“ç„¶è¿™æ ·è‚¯å®šæ˜¯ä¸è¡Œçš„å› ä¸ºè¿™ä¸ªæ•ˆç‡å¤ªä½ä¸‹,è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å¿«æ·é”® ç¬¬ä¸‰æ­¥ ç»‘å®šå¿«æ·é”®åœ¨ä¸Šé¢çš„é‚£ä¸ªPyHeadçš„æ–‡ä»¶å¤¹ä¸‹é¢æœ‰ä¸ª Default (Windows).sublime-keymap å®ƒè¿™ä¸ªåˆ†äº†ä¸€äº›å¹³å° å¦‚ Default (OSX).sublime-keymap Default (Linux).sublime-keymapè¿™æ ·çš„æ–‡ä»¶å¤¹,è¿™ä¸ªæ˜¯ä½ ç»‘å®šå¿«æ·é”®åˆ°ä½ è¿™ä¸ª åŠŸèƒ½ä¸Šé¢.é‡Œé¢çš„å†…å®¹å¦‚ä¸‹(ä½¿ç”¨jsonçš„æ•°æ®æ ¼å¼): 123[ &#123;\"keys\": [\"ctrl+alt+h\"], \"command\": \"py_head\"&#125;] å¦‚æœä¸ç†Ÿæ‚‰jsonçš„è¯å¯ä»¥è‡ªå·±å»è¡¥ä¸€ä¸‹. å‰é¢è¿™ä¸ªå®šä¹‰å¿«æ·é”®,åé¢æ˜¯ä½ è¦è°ƒç”¨çš„å‡½æ•°,è¿™é‡Œä½ å¯èƒ½æœ‰ç–‘é—®äº†,ä¸ºå•¥å®šä¹‰æ˜¯PyHeadCommand è¿™ä¸ªåå­— å´å†™ä¸ªè¿™,é‚£æ˜¯å› ä¸ºåœ¨Sublimeä¸­ å‡½æ•°çš„ç»‘å®šéƒ½æ˜¯å°å†™, å¦‚æœä½ æ˜¯å¤§å†™å°±åƒä¸Šé¢é‚£æ ·é©¼å³°å¼å‘½ååœ¨ç»‘å®šçš„æ—¶å€™æ˜¯ä»¥ä¸‹åˆ’çº¿å¼€å¤´åœ¨è¿™ä¸ªå¤§å†™å­—æ¯å‰é¢,ç„¶åå…¨éƒ¨å°å†™.ä¸¾ä¸€ä¸ªä¾‹å­å§123å¦‚ å‡½æ•°å PyHead ç»‘å®šçš„ command æ˜¯ py_headå‡½æ•°å pyhead ç»‘å®šçš„ command æ˜¯ pyhead å‡½æ•°å PYHead ç»‘å®šçš„ command æ˜¯ p_y_head è¿™ä¸‹åº”è¯¥æ˜ç™½äº†å§. è¿™æ ·ä½ å°±æˆåŠŸçš„å†™äº†ä¸€ä¸ª Sublime æ’ä»¶çš„ hello world,å¦‚æœä½ è¦å†™æ›´å‰å®³çš„æ’ä»¶ä½ è¿˜å¾—å»å­¦ä¹  æ­£åˆ™è¡¨è¾¾å¼,è‡³äºè¿™ä¸ªæ˜¯å•¥æ€ä¹ˆç”¨è‡ªå·±å»æ‰¾,ç½‘ä¸Šä¸€å¤§å †. å¥½äº†ä»Šå¤©å°±å…ˆåˆ°è¿™.æœ‰æ—¶é—´æˆ‘åœ¨æ¥ç€å†™ä¸€äº›å…¶ä»–çš„æ–‡æ¡£å¦‚ Sublimeçš„APIæ–‡æ¡£.","tags":[{"name":"sublimeæ’ä»¶","slug":"sublimeæ’ä»¶","permalink":"https://leng521.top/tags/sublimeæ’ä»¶/"}]},{"title":"linuxå‡çº§gcc","date":"2018-05-09T01:37:30.000Z","path":"/posts/f62a7c7d/","text":"è¿™ä¸€ç¯‡æ˜¯å¯¹linux centos7 ä¸­ gcc çš„å‡çº§.è¿™æ¬¡å‡çº§gccçš„ç‰ˆæœ¬æ˜¯ 8.1.0 æ–¹æ³•ä¸€12345678910111213141516171819$ su \\\\è¿›å…¥ root# sudo yum install libmpc-devel mpfr-devel gmp-devel...# cd ä¸‹è½½# curl ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/* \\\\* å·ä¸ºè‡ªå·±æƒ³è¦æ›´æ–°çš„ç‰ˆæœ¬å·\\\\ åšæ³•æ˜¯è‡ªå·±å°†è¿™ä¸ª åœ°å€æ”¾åˆ°æµè§ˆå™¨ä¸­è‡ªå·±å»é€‰å–åˆé€‚çš„ç‰ˆæœ¬ç›´æ¥ä¸‹è½½.\\\\ æˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯ 8.1.0 # tar zxfv gcc-8.1.0.tar.gz# cd gcc-8.1.0# ./configure --disable-multilib --enable-languages=c,c++# make -j 4...# make install...# gcc -v...çº¿ç¨‹æ¨¡å¼:posixgcc ç‰ˆæœ¬ 8.1.0(GCC)\\\\ ... æ„æ€çœç•¥ æ–¹æ³•äºŒåœ¨ etc/yum.repos.dä¸‹é¢æ·»åŠ repo1touch FedoraRepo.repo ç„¶åæ·»åŠ ä¸‹é¢çš„å†…å®¹: 123456[warning:fedora] name=fedora mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-23&amp;arch=$basearch enabled=1 gpgcheck=1 gpgkey=https://getfedora.org/static/34EC9CBA.txt ç„¶åæ›´æ–°gcc 1yum -y update gcc gcc-c++ ç„¶åå°±æ˜¯æ–°ç‰ˆæœ¬äº†ä½†æ˜¯è¿™æˆ‘è¿˜ä¸å¤ªæ‡‚.æ‰€ä»¥å°±æ²¡æœ‰ç”¨è¿™ä¸ªæ–¹æ³•. æˆ‘ç”¨çš„æ˜¯æ–¹æ³•ä¸€.å› ä¸ºæ–¹æ³•ä¸€å¯ä»¥è‡ªå·±é€‰æ‹©gccç‰ˆæœ¬,å¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¸œè¥¿éƒ½è¦æ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬,å½“ç„¶è¿™ä¸ªæ ¹æ®ä½ ä»¬è‡ªå·±äº†.æ ¹æ®æƒ…å†µè€Œå®š. æ–¹æ³•äºŒæ›´ç®€å•ä¸€ç‚¹. å¥½äº†ä»Šå¤©å°±å…ˆåˆ°è¿™äº†.","tags":[{"name":"gcc","slug":"gcc","permalink":"https://leng521.top/tags/gcc/"}]},{"title":"9å®«æ ¼çº¹ç†çš„æ›´æ–°é—®é¢˜","date":"2018-04-26T01:40:53.000Z","path":"/posts/1e09c0f5/","text":"è¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®²è§£ä¸€ä¸‹ cocos2dx 9å®«æ ¼çº¹ç†æ›´æ–°é—®é¢˜æˆ‘è¿™é‡Œå°±ä¸è¯´ cocos2dx 9å®«æ ¼æ€ä¹ˆä½¿ç”¨äº†ã€‚åœ¨ç½‘ä¸Šä¸€æœä¸€å¤§å †ã€‚åŸºæœ¬å†…å®¹éƒ½æ˜¯é‚£æ ·ã€‚æˆ‘ä¸æƒ³åšæ— è°“çš„å™è¿°äº†ã€‚ é—®é¢˜æè¿°ç°åœ¨çš„ç¯å¢ƒæ˜¯ï¼š cocos2dx 3.15 VS 2015 ä½¿ç”¨ lua å†™é¡¹ç›® æ³¨æ„è¿™é‡Œæ˜¯è¯´ä½¿ç”¨ plist é‡Œé¢çš„çº¹ç† ä¹Ÿå°±æ˜¯ç²¾çµå¸§ ç°åœ¨é¢ä¸´çš„é—®é¢˜æ˜¯: cocos2dx å¯¹9å®«æ ¼çº¹ç†æ›´æ–°ï¼Œä¸èƒ½åƒæ›´æ–°ç²¾çµé‚£æ ·ä½¿ç”¨å®ƒæä¾›çš„å‡½æ•° setSpriteFrameè™½ç„¶9å®«æ ¼å°±æ˜¯å¯¹ç²¾çµçš„åœ¨æ¬¡å°è£…ã€‚ cocos2dx ä¹å®«æ ¼çš„è¿™ä¸ªå‡½æ•°ï¼ˆsetSpriteFrameï¼‰åœ¨C++å®šä¹‰çš„å¤´æ–‡ä»¶ä¸­æ˜¯é•¿è¿™æ ·çš„ 123// UIScale9Sprite.hvirtual void setSpriteFrame(SpriteFrame * spriteFrame, const Rect&amp; capInsets);//å®ƒæ²¡æœ‰æä¾›ç›´æ¥è¾“å…¥å­—ç¬¦ä¸²æ¥å®ç°çº¹ç†çš„æ›´æ¢. è¿™è¯´æ˜æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç²¾çµå¸§ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªç±»å‹æˆ‘ç”¨äº†è¿™ä¹ˆæ—¶é—´ï¼ŒåŸºæœ¬æ²¡ç”¨è¿‡ã€‚ é—®é¢˜å‰–ææˆ‘ä¸Šé¢æœ‰è¯´è¿‡ä¹å®«æ ¼æ˜¯å¯¹çº¹ç†çš„å†æ¬¡å°è£…å®ç°çš„ï¼Œè¯´ä»¥å°±å»æŸ¥çœ‹ä»–çš„çˆ¶ç±»Sprite.hè¿™ä¸ªæ˜¯æ€ä¹ˆåˆå§‹åŒ–çš„ã€‚ è¿½äº† å®ƒçˆ¶ç±»çš„åˆå§‹åŒ–å‡½æ•° Sprite.h çœ‹åˆ°äº†å®ƒæ˜¯æ€ä¹ˆåˆ›å»ºå‡ºç²¾çµå¸§çš„ï¼Œä¸‹é¢æ˜¯ä»–åˆå§‹åŒ–å®ƒå†…éƒ¨çš„ç²¾çµå¸§çš„æ“ä½œã€‚12345678910111213141516void Sprite::setSpriteFrame(const std::string &amp;spriteFrameName)&#123; CCASSERT(!spriteFrameName.empty(), \"spriteFrameName must not be empty\"); if (spriteFrameName.empty()) &#123; return; &#125; SpriteFrameCache *cache = SpriteFrameCache::getInstance(); // æ ¹æ®åå­—åœ¨ç²¾çµå¸§ç¼“å­˜ä¸­æŸ¥æ‰¾ç›¸åº”çš„ç²¾çµå¸§ã€‚ SpriteFrame *spriteFrame = cache-&gt;getSpriteFrameByName(spriteFrameName); CCASSERT(spriteFrame, std::string(\"Invalid spriteFrameName :\").append(spriteFrameName).c_str()); // è®¾ç½®è‡ªå·±å†…éƒ¨çš„ç²¾çµå¸§å¯¹è±¡ setSpriteFrame(spriteFrame);&#125; åŸç†æ˜¯åœ¨ç²¾çµå¸§ç¼“å­˜ä¸­æŸ¥æ‰¾å¯¹è±¡è®¾ç½®ç²¾çµçš„ç²¾çµå¸§ ä»£ç å®ç°è¿™ä¸‹å°±å¥½åŠäº†ã€‚ luaå±‚çš„ä»£ç å°±æ˜¯ 12345local spriteFrameCache = cc.SpriteFrameCache:getInstance()local frame = spriteFrameCache:getSpriteFrame(\"xxx.png\")-- xxx.png å°±æ˜¯ä½  plistæ–‡ä»¶ä¸­å¯¹åº”çš„æ–‡ä»¶åå­—ã€‚-- è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç²¾çµå¸§å¯¹è±¡-- ç„¶ååœ¨è°ƒç”¨å®ƒçš„ setSpriteFrame å…·ä½“çš„å®ç°ä»£ç luaå±‚çš„c++å±‚æˆ‘å°±ä¸è¯´äº†ã€‚æš‚æ—¶æ²¡æœ‰ç”¨åˆ°ã€‚åšæ³•éƒ½ä¸€æ ·ã€‚ä¸Šé¢çš„å®ç°åœ¨ cocos2dx displayçš„luaæ–‡ä»¶é‡Œé¢æœ‰å®ç°ã€‚æ‰€ä»¥å°±ç›´æ¥è°ƒç”¨ã€‚1234567891011121314151617181920212223242526-- desc: åˆ›å»º9å®«æ ¼å›¾ç‰‡-- params [ path | pos | capInsets | size | rect ]-- params.path å¯ä»¥æ˜¯ç²¾çµå¸§ ej: params.path = \"#xxx.png\"-- params.pos ç²¾çµçš„ä½ç½®-- params.capInsets æ˜¯9å®«æ ¼ä¸­é—´ Rect çš„ä½ç½®å’Œå¤§å°-- params.rect å¯ä»¥ä¸ç”¨å¡«function T.cp_s9( parentNode, params ) local pos = params.pos local s = display.newSprite(params.path,pos.x,pos.y,params) local _ = parentNode and parentNode:addChild(s) return send-- desc: 9å®«æ ¼å›¾ç‰‡çº¹ç†çš„æ›´æ–°-- path æ— æ•ˆæ·»åŠ æŠ¥é”™æœºåˆ¶function T.update_s9( node, path, capInsets, size ) if string.byte(path) == 35 then local sp = display.newSpriteFrame(path) node:setSpriteFrame(sp,capInsets) else if not cc.FileUtils:getInstance():isFileExist(path) then error(string.format(\"invalid path , file isn't exist , path - %s\",path)) end node:setTexture(path) end node:setContentSize(size)end éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯åœ¨ä¹å®«æ ¼æ›´æ–°çº¹ç†åå°ºå¯¸åˆå˜å›åŸæ¥çš„å¤§å°ï¼Œä½ éœ€è¦é‡æ–°è®¾ç½®å¤§å°ã€‚","tags":[{"name":"cocos2d-x","slug":"cocos2d-x","permalink":"https://leng521.top/tags/cocos2d-x/"},{"name":"9å®«æ ¼","slug":"9å®«æ ¼","permalink":"https://leng521.top/tags/9å®«æ ¼/"}]},{"title":"python-é—­åŒ…é—®é¢˜","date":"2018-04-20T02:31:51.000Z","path":"/posts/87435431/","text":"æœ¬æ–‡ä¸»è¦æ˜¯pythoné—­åŒ…é—®é¢˜çš„è®°å½•ã€‚python å®ç°çš„æœ‰å†…éƒ¨å‡½æ•°ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¼šä½¿ç”¨å†…éƒ¨å‡½æ•°å¤–é¢çš„å˜é‡ ã€‚ æ³¨æ„è¿™é‡Œæ˜¯è¦æ”¹å˜å±€éƒ¨å˜é‡ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç­–ç•¥ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„å¼•ç”¨ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ ä¸ç”¨ä½¿ç”¨ nonlocal å…³é”®å­— 123456789101112131415#!/usr/bin/env python3# -*- coding: utf-8 -*-def A(): xxx = 0 def B(): #è¿™ä¸ªæ—¶å€™ä½ å¯èƒ½ä¼šä½¿ç”¨xxxå˜é‡ã€‚ ç›´æ¥å¼•ç”¨æ˜¯ä¼šæŠ¥é”™çš„ #å‘Šè¯‰ä½ ä½¿ç”¨äº†æ²¡æœ‰åˆ†é…çš„å¼•ç”¨ referenced before assignment nonlocal xxx xxx += 1 return xxx return Bf = A()print(f(),f(),f())# è¾“å‡º 1 2 3 è¿™é‡Œä¸»è¦æ˜¯ä½¿ç”¨äº†python å†…éƒ¨çš„å…³é”®å­— nonlocalä¸»è¦æ˜¯å¼•ç”¨å†…éƒ¨å‡½æ•°ä»¥å¤–çš„å±€éƒ¨å˜é‡ æ³¨æ„è¿™é‡Œä¸æ˜¯å…¨å±€å˜é‡ã€‚ æ³¨æ„è¿™ä¸ªå…³é”®å­—æ˜¯python3.x ä¸­å¯ä»¥å‡ºç°çš„å…³é”®å­—ã€‚åœ¨python2.xä¸­ä¼šæŠ¥é”™ã€‚åœ¨python2.xçš„ç‰ˆæœ¬ä¸­å¯ä»¥ä½¿ç”¨ list å°è£…ä¸€å±‚ï¼Œå®ç°ä½¿ç”¨å†…éƒ¨å‡½æ•°ä»¥å¤–çš„å±€éƒ¨å˜é‡ã€‚è¿™é‡Œä¸èƒ½ä½¿ç”¨ å…ƒç¥– å› ä¸ºå…ƒç¥–çš„å˜é‡æ—¶ä¸å¯å˜çš„ã€‚ å¦‚æœè¦å¼•ç”¨å…¨å±€å˜é‡è¦æ˜¯ç”¨pythonçš„å¦å¤–ä¸€ä¸ªå…³é”®å­— globalã€‚ç”¨æ³•å’Œä¸Šé¢ç›¸åŒã€‚ ä½¿ç”¨ä¾‹å­å¦‚ä¸‹ï¼š 123456789101112131415#!/usr/bin/env python3# -*- coding: utf-8 -*-xxx = 0def A(): def B(): #è¿™ä¸ªæ—¶å€™ä½ å¯èƒ½ä¼šä½¿ç”¨xxxå˜é‡ã€‚ ç›´æ¥å¼•ç”¨æ˜¯ä¼šæŠ¥é”™çš„ #å‘Šè¯‰ä½ ä½¿ç”¨äº†æ²¡æœ‰åˆ†é…çš„å¼•ç”¨ referenced before assignment global xxx xxx += 1 return xxx return Bf = A()print(f(),f(),f())# è¾“å‡º 1 2 3","tags":[{"name":"python","slug":"python","permalink":"https://leng521.top/tags/python/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"https://leng521.top/tags/é—­åŒ…/"}]},{"title":"è®°å½•ä½¿ç”¨hexoå†™åšå®¢çš„é—®é¢˜","date":"2018-04-14T08:17:16.000Z","path":"/posts/a9ff66a6/","text":"åœ¨ä½¿ç”¨ hexo æ€»ä¼šé‡åˆ°è¿™ç§é‚£ç§çš„é”™è¯¯æˆ‘è¿™é‡Œå°±è®°å½•ä¸€ä¸‹,å¸Œæœ›åé¢ä½¿ç”¨ hexo å†™åšå®¢çš„äººèƒ½å°‘é‡åˆ°ä¸€ç‚¹éº»çƒ¦ï¼Œå°‘èµ°ä¸€ç‚¹å¼¯è·¯ï¼ŒOKï¼ŒåºŸè¯ä¸å¤šè¯´ã€‚ 1. Hexo: TypeError: Cannot set property â€˜lastIndexâ€™ of undefinedè§£å†³æ–¹æ¡ˆæ˜¯ å°†ä½ å·¥ç¨‹ä¸‹çš„ _config.yml (è¿™ä¸ªä¸æ˜¯ä¸»é¢˜çš„_config.yml) æ–‡ä»¶é‡Œé¢çš„ `auto_detect` è®¾ç½®ä¸º false. 2. hexo skip_render çš„ä½¿ç”¨123skip_render: - 'dir/**' # å¿½ç•¥dirè¿™ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸è¿›è¡Œæ¸²æŸ“ - 'xx/**' # é“ç†åŒä¸Šã€‚ 3. ä¿®æ”¹å®Œ hexo ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ é‡æ–° generate æ–‡ä»¶ä¸ç”Ÿæ•ˆä½¿ç”¨ hexo çš„å‘½ä»¤ `hexo clean`,æ¯æ¬¡è®°å¾—ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¸…é™¤ä¸€ä¸‹","tags":[{"name":"hexo","slug":"hexo","permalink":"https://leng521.top/tags/hexo/"}]},{"title":"python_optionparseræ¨¡å—","date":"2018-04-11T08:01:20.000Z","path":"/posts/ce1d3b12/","text":"æœ¬æ–‡ä¸»è¦æ˜¯ python å¯¹å‘½ä»¤è¡Œçš„å¤„ç†æ¨¡å— å°±è±¡æ˜¯è¿™æ ·çš„","tags":[{"name":"python","slug":"python","permalink":"https://leng521.top/tags/python/"},{"name":"optionParser","slug":"optionParser","permalink":"https://leng521.top/tags/optionParser/"}]},{"title":"gitå‘½ä»¤çš„è®°å½•","date":"2018-03-07T03:00:24.000Z","path":"/posts/82a402af/","text":"ç°åœ¨å¯¹gitä¹Ÿä½¿ç”¨å¿«ä¸€å¹´äº†ç°åœ¨æ€»ç»“ä¸€ä¸‹å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤ã€‚ æœ¬æ–‡çš„å¤§çº²å¯¹ä»¥ä¸‹å‘½ä»¤åšä¸€äº›è®°å½•1.git clone2.git pull3.git commit4.git push5.git branch6.git remote7.git checkout8.git reset9.git stash10.gité…ç½®ä¸€äº›å¤–éƒ¨å·¥å…·11.git merge12.git log13.git show git clonegit clone æ˜¯å…‹éš†åˆ«çš„ä»“åº“ 1234git clone &lt;repo&gt; &lt;directory&gt;å‚æ•°è¯´æ˜ï¼š repo:Git ä»“åº“ directory:æœ¬åœ°ç›®å½• ej:æ¯”å¦‚ï¼Œè¦å…‹éš† Ruby è¯­è¨€çš„ Git ä»£ç ä»“åº“ Gritï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š git clone git://github.com/schacon/grit.git æˆ–è€…æ˜¯è¿™æ ·çš„ git clone git://github.com/schacon/grit.git test è¿™ä¸ªå°±ä¼šå…‹éš†åˆ° ../test å’Œç›®å½• git pullæ‹‰å–åˆ«äººåœ¨è¿œç¨‹ä»“åº“æ›´æ–°çš„å†…å®¹ é»˜è®¤æ˜¯è¿œç¨‹çš„ origin åˆ†æ”¯ git addå°†æœ¬åœ°çš„æ”¹å˜æäº¤åˆ°ç¼“å­˜åŒº git add -u æ˜¯å°†æœ¬åœ°è¿½è¸ªçš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒº 123ej:git add -u *.png--æ·»åŠ æ‰€æœ‰è¿½è¸ªçš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒº å‰ææ˜¯ä»¥.png ä¸ºç»“å°¾çš„æ–‡ä»¶ git add -A æ˜¯å°†æœ¬åœ°æœªè¿½è¸ªçš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒº 123ej:git add -A .--æ·»åŠ æ‰€æœ‰çš„æœªè¿½è¸ªçš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒº git commit å°†æœ¬åœ°çš„æ”¹å˜æäº¤åˆ°ç¼“å­˜åŒºçš„å†…å®¹åˆ°æœ¬åœ°ç‰ˆæœ¬åº“ 123ej:git commit -m &quot;test&quot;-- -m æ˜¯å¯¹æ­¤æ¬¡çš„æäº¤å†…å®¹çš„æè¿°(desc) git push å°†æœ¬åœ°çš„æ”¹å˜æäº¤åˆ°æœ¬åœ°ç‰ˆæœ¬åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ç‰ˆæœ¬åº“ 123ej:git push-- é»˜è®¤æ˜¯ä¸»ä¸ºåˆ†æ”¯(origin) git push å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°äº‘ç«¯ 1git push origin/è¿œç¨‹åˆ†æ”¯çš„åå­— æœ¬åœ°åˆ†æ”¯çš„åå­— git branch æœ‰å…³åˆ†æ”¯çš„ä¸€äº›ä½¿ç”¨ git branch æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ git branch -vv æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ ä¸ è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³» git branch -a æŸ¥çœ‹ æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯ git branch -r æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git branch xx åˆ›å»ºæ–°çš„xxåˆ†æ”¯ git branch -D xx åˆ é™¤xxåˆ†æ”¯ git branch upstream(git åˆ†æ”¯çš„æ˜ å°„å…³ç³»)å»ºç«‹æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³»ï¼ˆæˆ–è€…ä¸ºè·Ÿè¸ªå…³ç³»trackï¼‰ã€‚è¿™æ ·ä½¿ç”¨`git pull`æˆ–è€…`git push`æ—¶å°±ä¸å¿…æ¯æ¬¡éƒ½è¦æŒ‡å®šä»è¿œç¨‹çš„å“ªä¸ªåˆ†æ”¯æ‹‰å–åˆå¹¶å’Œæ¨é€åˆ°è¿œç¨‹çš„å“ªä¸ªåˆ†æ”¯äº†ã€‚ ej:ä»è¿™ä¸Šé¢å¯ä»¥çœ‹åˆ°æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³»è‹¥æ²¡æœ‰æ˜ å°„å…³ç³» git pull æˆ–æ˜¯ git push ä¼šå¤±è´¥ ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹æ˜ å°„å…³ç³» ä½¿ç”¨ git branch -u origin/xx ä¸è¿œç¨‹åˆ†æ”¯ å»ºç«‹ æ˜ å°„å…³ç³»xx ä¸º è¿œç¨‹åˆ†æ”¯çš„åå­— ä¸è¿œç¨‹åˆ†æ”¯å–æ¶ˆæ˜ å°„å…³ç³»ä½¿ç”¨ git branch --unset-upstream è¡¥å……ï¼šä¸åŒåå­—å®¢ä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥å»ºç«‹æ˜ å°„å…³ç³»çš„ åˆ é™¤è¿œç¨‹çš„åˆ†æ”¯12git push origin --delete xxx-- xxx ä¸ºè¿œç¨‹åˆ†æ”¯çš„åå­— git fetch æ¥ä¸€ä¸ªå…³ç³»å¼ git pull = git fecth + git mergeæ‹‰å–åˆ«äººè¿œç¨‹ä»“åº“çš„å†…å®¹åˆ°è‡ªå·±æœ¬åœ°çš„ä¸€ä¸ªåˆ†æ”¯ä¸Š 1234ej: git fecth origin test:temp -- æ‹‰å–è¿œç¨‹åˆ†æ”¯ test åˆ° æœ¬åœ° temp åˆ†æ”¯ä¸Š -- æ³¨æ„è¿™ç§æ‹‰å– æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ æ˜¯æ²¡æœ‰æ˜ å°„å…³ç³»çš„ git remotegit remote and git remote -v git remoteç”¨æ¥ç®¡ç†æœ¬åœ°å·¥ä½œç›®å½•å¯¹åº”çš„è¿œç¨‹ä»£ç ä»“åº“ï¼Œåœ¨ä¸€èˆ¬çš„å·¥ä½œç›®å½•ä¸‹ï¼Œæ‰§è¡Œgit remoteç»“æœå¦‚ä¸‹ï¼š git remote add æˆ‘ä»¬å¯ä»¥ä½¿ç”¨git remote addå‘½ä»¤æ¥å¢åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œè¿™ä¸ªè¿œç¨‹ä»“åº“å¯ä»¥æ˜¯sshåœ°å€ï¼ˆå¦‚ä¸Šé¢è¿™ç§ï¼‰ï¼Œå¯ä»¥æ˜¯æœ¬åœ°ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯gitåè®®æˆ–è€…httpåè®®çš„åœ°å€ã€‚ ä¾‹å¦‚ï¼Œæˆ‘è¦æŠŠlimingçš„ä»“åº“ä½œä¸ºæˆ‘çš„è¿œç¨‹ä»“åº“ä¹‹ä¸€ï¼Œå¯ä»¥æ‰§è¡Œgit remote add æ¥å¢åŠ ä»“åº“ï¼Œä¾‹å¦‚ï¼š 123456789$ git remote add liming /home/liming/repo$ git remotelimingorigin$ git remote -vliming /home/liming/repo (fetch)liming /home/liming/repo (push)origin git@remoteRepo (fetch)origin git@remoteRepo (push) ç›¸åº”çš„ï¼Œå¯ä»¥ä½¿ç”¨git remote rmæˆ–è€…git remote renameå¯¹è¿œç¨‹ä»£ç ä»“åº“çš„åç§°è¿›è¡Œä¿®æ”¹ï¼ˆæœ¬åœ°çš„ï¼Œä¸ä¼šå½±å“åˆ°å¯¹æ–¹çš„ç›®å½•ï¼‰ git checkoutä½œç”¨ï¼š 1.åˆ‡æ¢åˆ†æ”¯ 2.æ”¾å¼ƒå¯¹æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹ 3.åˆ›å»ºæ–°çš„åˆ†æ”¯ git checkout xx åˆ‡æ¢åˆ°xxåˆ†æ”¯ git checkout -b xx åœ¨æ²¡æœ‰çš„æ—¶å€™ åˆ›å»ºçš„æ–°çš„åˆ†æ”¯xx å¹¶è·³è½¬åˆ° xx åˆ†æ”¯ä¸Š git checkout xx.ext æ”¾å¼ƒä¿®æ”¹ç›´æ¥è¿˜åŸå’Œç‰ˆæœ¬åº“ä¿æŒä¸€è‡´ æ‹‰å–è¿œç¨‹æ–¹æ³•123git checkout -b æœ¬åœ°åˆ†æ”¯åx origin/è¿œç¨‹åˆ†æ”¯åxNote:ä½¿ç”¨è¯¥æ–¹å¼ä¼šåœ¨æœ¬åœ°æ–°å»ºåˆ†æ”¯xï¼Œå¹¶è‡ªåŠ¨åˆ‡æ¢åˆ°è¯¥æœ¬åœ°åˆ†æ”¯xã€‚ é‡‡ç”¨æ­¤ç§æ–¹æ³•å»ºç«‹çš„æœ¬åœ°åˆ†æ”¯ä¼šå’Œè¿œç¨‹åˆ†æ”¯å»ºç«‹æ˜ å°„å…³ç³»ã€‚ git resetä½œç”¨ï¼š 1.æ–‡ä»¶ä»æš‚å­˜åŒºå›é€€åˆ°å·¥ä½œåŒº 2.ç‰ˆæœ¬å›é€€ ä½œç”¨1ï¼š git reset HEAD filename(xx)ä½œç”¨2: æˆ‘å°±ç›´æ¥è½¬è½½ä¸€ç¯‡æ–‡ç« å†™çš„æŒºå¥½çš„ git resetçš„ä½¿ç”¨ git ä¸­æ–‡çš„æ•™ç¨‹ â€“è²Œä¼¼è¦ç§‘å­¦ä¸Šç½‘ git stashä½ å½“å‰æ­£åœ¨å¼€å‘çš„åˆ†æ”¯ä¸Šé¢ï¼Œè¿˜æœ‰æœªæäº¤çš„ä»£ç ï¼Œä½ åˆä¸æƒ³æŠŠä»£ç æäº¤äº†ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿä½œç”¨ï¼š å°†æœ¬åœ°çš„æ”¹å˜å­˜å‚¨èµ·æ¥ï¼Œåˆ‡æ¢åˆ°å¦å¤–çš„åˆ†æ”¯ä¸Šã€‚ 1234git stash-- å°†æœ¬åœ°çš„æ”¹å˜å­˜å‚¨èµ·æ¥git stash list-- æŸ¥çœ‹æœ¬åœ°å­˜å‚¨çš„åˆ—è¡¨ å¦‚ä½•æ¢å¤å·¥ä½œç°åœºå‘¢ï¼Ÿ ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œç”¨`git stash apply`æ¢å¤ï¼Œä½†æ˜¯æ¢å¤åï¼Œstashå†…å®¹ä¸åˆ é™¤ï¼Œéœ€è¦ç”¨`git stash drop`æ¥åˆ é™¤ ç¬¬äºŒç§æ–¹æ¡ˆï¼Œç”¨`git stash pop`,æ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ é™¤äº†ã€‚ gité…ç½®ä¸€äº›å¤–éƒ¨å·¥å…·é…ç½®ä»£ç å¯¹æ¯”å·¥å…·æˆ‘é…ç½®äº†ä¸€ä¸ªå«diffuseçš„å·¥å…· æˆ‘è¿™é‡Œç»™ä½ æä¾›ä¸€ä¸ªä¸‹è½½åœ°å€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å»ä¸‹è½½åˆ«çš„ download diffuse 1.gitæŸ¥çœ‹æœ‰å“ªäº›å¯¹æ¯”å·¥å…·å¯ä»¥è®¾ç½®å‘½ä»¤ï¼š 1git difftool --tool-help 2.ç„¶åå†è®¾ç½®å¯¹æ¯”å·¥å…·ï¼Œå¦‚ï¼š 12git config --global diff.tool diffusegit config --global difftool.diffuse.path &quot;E:\\Program Files (x86)\\Diffuse\\diffuse.exe&quot; 3.è®¾ç½®å¥½åï¼Œä½¿ç”¨å‘½ä»¤æ˜¯ git difftool è€Œä¸æ˜¯ä¹‹å‰çš„ git diff äº† git ProblemProblem : 1.ä¸ºä»€ä¹ˆåœ¨åˆ‡æ¢åˆ†æ”¯çš„æ—¶,ä¼šå‡ºç°æœ‰æ—¶è¦ä½ æäº¤æœ¬åœ°çš„æ”¹å˜æ‰å¯ä»¥åˆ‡æ¢ï¼Œæœ‰çš„æ—¶å€™å´ä¸éœ€è¦ï¼Ÿ å‡ºç°èåˆçš„æ—¶å€™æ˜¯ä½ å½“å‰åˆ†æ”¯æ”¹å˜çš„å†…å®¹ä¸ä½ å°†è¦åˆ‡æ¢åˆ†æ”¯çš„å†…å®¹æœ‰å†²çªï¼Œè¿™ä¸ªæ—¶å€™ä¸çŸ¥è¦ä½ èåˆã€‚ 1234è§£å†³çš„æ–¹æ³•æœ‰æˆ‘ç§ï¼š 1.ä½¿ç”¨ git stash ä¿å­˜å½“å‰çš„æ”¹å˜ git stash çš„ç”¨æ³•åœ¨ä¸Šé¢ 2.ä½¿ç”¨ git merge èåˆè¦åˆ‡æ¢çš„åˆ†æ”¯åˆ°å½“å‰çš„åˆ†æ”¯ 3.ä½¿ç”¨ git checkout è¿˜åŸå½“å‰å†²çªçš„æ–‡ä»¶ git mergeâ€“ 2018å¹´3æœˆ20æ—¥14:36:34git èåˆï¼šæ˜¯èåˆä½ å½“å‰ç‰ˆæœ¬åº“æ²¡æœ‰çš„ä¸œè¥¿ã€‚ä½ å¯ä»¥é€‰æ‹©æœ¬åœ°çš„åˆ†æ”¯ä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹çš„åˆ†æ”¯ 123456-- èåˆè¿œç¨‹åˆ†æ”¯ej: git merge origin/åˆ†æ”¯çš„åå­—-- èåˆæœ¬åœ°åˆ†æ”¯ej: git merge åˆ†æ”¯çš„åå­— git æ›´é«˜çº§çš„ç”¨æ³•é—®é¢˜: åœ¨ä½ çš„ä½¿ç”¨ git merge çš„æ—¶å€™ä¹Ÿä¼šå‡ºç°å†²çª. git merge â€“aborté€‰é¡¹ä¼šå°è¯•æ¢å¤åˆ°ä½ è¿è¡Œåˆå¹¶å‰çš„çŠ¶æ€ã€‚ ä½†å½“è¿è¡Œå‘½ä»¤å‰ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­æœ‰æœªå‚¨è—ã€æœªæäº¤çš„ä¿®æ”¹æ—¶å®ƒä¸èƒ½å®Œç¾å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–å®ƒéƒ½å·¥ä½œåœ°å¾ˆå¥½ git status -sbç½—åˆ—å‡ºéœ€è¦è§£å†³å†²çªçš„æ–‡ä»¶. åœ¨ä½ åˆå¹¶çš„æ—¶å€™ ä½ å¯ä»¥å°†è¿œç«¯å…±åŒç¥–å…ˆçš„æ–‡ä»¶, è‡ªå·±æœ¬åœ°çš„æ–‡ä»¶, è¦èåˆåˆ†æ”¯çš„æ–‡ä»¶,éƒ½ä¸‹è½½åˆ°æœ¬åœ°, 123git show :1:hello.rb &gt; hello.common.rbgit show :2:hello.rb &gt; hello.ours.rbgit show :3:hello.rb &gt; hello.theirs.rb git clean -fåœ¨è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ git clean å‘½ä»¤æ¥æ¸…ç†æˆ‘ä»¬ä¸ºæ‰‹åŠ¨åˆå¹¶è€Œåˆ›å»ºä½†ä¸å†æœ‰ç”¨çš„é¢å¤–æ–‡ä»¶ã€‚å°±æ˜¯é€šè¿‡ä¸Šé¢çš„å‘½ä»¤ git show :1 â€¦ è¿™ä¸ªå‘½ä»¤äº§å‡ºçš„æ–‡ä»¶. git logè¿™é‡Œåœ¨æ›´æ–°ä¸€ä¸‹ git log çš„ä¸€äº›å‘½ä»¤çš„ä½¿ç”¨ git log -nç½—åˆ—å‡ºæœ€è¿‘ n æ¬¡æäº¤ ej: git log -3 // ç½—åˆ—å‡ºæœ€è¿‘ä¸‰æ¬¡çš„æäº¤ä¿¡æ¯ git showæ˜¾ç¤ºä¸€äº›æäº¤çš„çŠ¶æ€ä¿¡æ¯ git show â€“stat [commitId] ej: git show â€“stat 96daa2f6bb9b413ae3ce5a1ccf3f58ee22b32b42å®ƒä¼šç½—åˆ—å‡ºå½“å‰è¿™æ¬¡æäº¤çš„ä¿¡æ¯,ä»¥æ–‡ä»¶æ›´æ”¹åˆ—è¡¨çš„å½¢å¼æ˜¾ç¤º,å¦‚ä¸‹å›¾ git show [commitId]è¿™ä¸ªå‘½ä»¤å’Œä¸Šä¸ªå‘½ä»¤å¾ˆç›¸ä¼¼ , åªæ˜¯å»æ‰ä¸€ä¸ª â€“stat ej git show 96daa2f6bb9b413ae3ce5a1ccf3f58ee22b32b42 src/a.luaæ˜¾ç¤ºè¿™æ¬¡è¿™ä¸ªæ–‡ä»¶æäº¤çš„å†…å®¹","tags":[{"name":"gitå‘½ä»¤","slug":"gitå‘½ä»¤","permalink":"https://leng521.top/tags/gitå‘½ä»¤/"}]},{"title":"ä¼˜åŒ–cocos2dxSpineåº“","date":"2018-01-22T12:44:31.000Z","path":"/posts/c4c0a180/","text":"å¯¹cocos2dxSpineåº“çš„å‡çº§å’Œä¼˜åŒ–æœ¬æ–‡çš„å¤§çº²1.å‡çº§spineåœ¨cocos2dx-3.15çš„è¿è¡Œæ—¶åº“2.ä¼˜åŒ–spineåœ¨åˆ›å»ºçš„æ—¶å€™æ•ˆç‡ åœ¨å¼€å‘çš„æ—¶å€™å‡ºç°çš„é—®é¢˜1.spineè¿™ä¸ªè½¯ä»¶å¯¼å‡º3.6æ–°åŠ çš„ç‰¹æ•ˆåœ¨cocos2dx3.15 ä¸èƒ½ä½¿ç”¨2.spineåœ¨æ‰¹é‡åˆ›å»ºçš„æ—¶å€™å¸§æ•°ä¼šä¸‹é™ å‡çº§spine -&gt;3.6spine code github åœ°å€å»è¿™ä¸ªåœ°å€cloneæˆ–è€…æ˜¯ä¸‹è½½Zipè¿™ä¸ªä½ éšä¾¿ç„¶åä¼šäº§ç°è¿™ä¸ªç›®å½•ä¸»è¦å°±æ˜¯æˆ‘ä½¿ç”¨ç®­å¤´æ ‡è®°çš„è¿™ä¸¤ä¸ªç›®å½• spine-c/spine-c/include/spine/*.h spine-c/spine-c/src/spine/*.c spine-cocos2dx/src/spine/*.cpp and spine-cocos2dx/src/spine/*.h æ‰¾åˆ°è‡ªå·±çš„å·¥ç¨‹çš„æ ¹ç›®å½• ç„¶åå»æ‰¾è¿™ä¸ªç›®å½•å…¨éƒ¨æ”¾åœ¨ Â·Â·Â·/frameworks/cocos2d-x/cocos/editor-support/spine ç›´æ¥å…¨éƒ¨æ›¿æ¢ç„¶åæ‰“å¼€è‡ªå·±çš„VSå»ç¼–è¯‘è®°ä½ä¸€ç‚¹å°†ä½ æ·»åŠ çš„Cæˆ–C++çš„æ–‡ä»¶ç»™æ·»åŠ åˆ°libSpineçš„å·¥ç¨‹ä¸­çš„æºæ–‡ä»¶ä¸­ é€‰ä¸­ Source Files æ‰§è¡Œ Shift + Alt + A æ·»åŠ ç°æœ‰é¡¹ æˆ–è€…æ˜¯é¼ æ ‡å³é”®æ·»åŠ å¥½å¯ä»¥ ç„¶åç¼–è¯‘,ä½ ä¼šæƒŠå¥‡çš„å‘ç°ç¼–è¯‘æˆåŠŸäº†,ä½†æ˜¯ä¸è¦é«˜å…´çš„å¤ªæ—©äº†,å› ä¸ºè¿™ä¸ªåœ¨ç¼–è¯‘Androidçš„æ—¶å€™ä¼šæŠ¥é”™,å½“ç„¶åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œæ¥ç€å¾€ä¸‹é¢çœ‹ã€‚ åœ¨Androidä¸­çš„å®ç°ä½ æ‰¾åˆ° è¿™ä¸ªç›®å½•é‡Œé¢ä¼šæœ‰ Â·Â·Â·/frameworks/cocos2d-x/cocos/editor-support/spineAndroid.mkçš„æ–‡ä»¶å°†ä½ æ·»åŠ çš„å†™åœ¨è¿™ä¸ªé…ç½®é‡Œé¢ æ³¨æ„åªå†™ *.h çš„æ–‡ä»¶ç„¶åä½¿ç”¨ Android Studio ç¼–è¯‘ Apk, è¿™é‡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨NDKç¼–è¯‘,ä½†æ˜¯åœ¨Android2.ï¼Ÿè¿™ä¸ªä¸è®°å¾—äº†,å°±å·²ç»ä¸åœ¨æ”¯æŒNDKç¼–è¯‘äº†æ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨Android Studio å§ åœ¨ ios ä¸­çš„å®ç°ä¹Ÿæ˜¯åŒæ ·å¦‚æ­¤ï¼Œè¿™é‡Œå°±ä¸å†è®²è¿°äº† ä¼˜åŒ–spineåœ¨åˆ›å»ºçš„æ—¶å€™æ•ˆç‡åœ¨åŸå…ˆçš„ spine åˆ›å»ºçš„æ—¶å€™æ¯æ¬¡éƒ½éœ€è¦è§£ææ•°æ®,ç”Ÿæˆéª·é«…æ•°æ®,å…¶å®è¿™ä¸ªæ˜¯å¾ˆæ¶ˆè€—CPUçš„,å¯¼è‡´FPSä¸‹é™ã€‚æˆ‘çš„åšæ³•æ˜¯ä¿ç•™ spine create çš„åŸæœ‰æ¥å£,è‡ªå·±å†ä»æ–°å†™ä¸€ä¸ªæ–°çš„æ¥å£ã€‚åŸç†ï¼šåˆ›å»ºå­—å…¸ä¿ç•™éª·é«…æ•°æ®æ¯æ¬¡åˆ›å»ºçš„æ—¶å€™è¯¢é—®è¿™ä¸ª Map æ˜¯å¦å­˜åœ¨ key æ²¡æœ‰åˆ›å»º,æœ‰ç›´æ¥ä½¿ç”¨ã€‚ ä»£ç çš„å†™æ³•æœ‰å¾ˆå¤šç§,æˆ‘è¿™åªæ˜¯å‚è€ƒ åœ¨SkeletonAnimation.cpp ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798SkeletonAnimation* SkeletonAnimation::createFromCache(const std::string&amp; key_skeletonData)&#123; if (spSkeletonData* skeleton_data = SkeletonAnimation::getSkeletonDataFromCache(key_skeletonData)) &#123; return SkeletonAnimation::createWithData(skeleton_data, false); &#125; else &#123; skeleton_data = SkeletonAnimation::loadSkeletonDataToCache(key_skeletonData, key_skeletonData + \".json\", key_skeletonData + \".atlas\"); if (skeleton_data) &#123; return SkeletonAnimation::createWithData(skeleton_data, false); &#125; &#125; return nullptr;&#125;spSkeletonData* SkeletonAnimation::loadSkeletonDataToCache(const std::string&amp; key_skeletonData, const std::string&amp; skeletonJsonFile, const std::string&amp; atlasFile, float scale)&#123; iteratorSkeletonData it = _allSkeletonDataCache.find(key_skeletonData); if (it == _allSkeletonDataCache.end()) &#123; SkeletonDataInCache skeleton_data_in_cache; spAtlas* atlas = nullptr; spAttachmentLoader* attachmentLoader = nullptr; skeleton_data_in_cache._skeleton_data = nullptr; atlas = spAtlas_createFromFile(atlasFile.c_str(), 0); CCASSERT(atlas, \"loadSkeletonDataToCache Error atlas file.\"); attachmentLoader = SUPER(Cocos2dAttachmentLoader_create(atlas)); spSkeletonJson* json = spSkeletonJson_createWithLoader(attachmentLoader); json-&gt;scale = scale; skeleton_data_in_cache._skeleton_data = spSkeletonJson_readSkeletonDataFile(json, skeletonJsonFile.c_str()); CCASSERT(skeleton_data_in_cache._skeleton_data, json-&gt;error ? json-&gt;error : \"loadSkeletonDataToCache Error reading skeleton data file.\"); spSkeletonJson_dispose(json); spAtlas_dispose(atlas); if (skeleton_data_in_cache._skeleton_data) &#123; _allSkeletonDataCache[key_skeletonData] = skeleton_data_in_cache; return skeleton_data_in_cache._skeleton_data; &#125; else &#123; //error release if (skeleton_data_in_cache._skeleton_data) &#123; spSkeletonData_dispose(skeleton_data_in_cache._skeleton_data); &#125; &#125; &#125; return nullptr;&#125;spSkeletonData* SkeletonAnimation::getSkeletonDataFromCache(const std::string&amp; key_skeletonData)&#123; iteratorSkeletonData it = _allSkeletonDataCache.find(key_skeletonData); if (it != _allSkeletonDataCache.end()) &#123; return it-&gt;second._skeleton_data; &#125; return nullptr;&#125;bool SkeletonAnimation::removeSkeletonData(const std::string&amp; key_skeletonData)&#123; iteratorSkeletonData it = _allSkeletonDataCache.find(key_skeletonData); if (it != _allSkeletonDataCache.end()) &#123; if (it-&gt;second._skeleton_data) spSkeletonData_dispose(it-&gt;second._skeleton_data); _allSkeletonDataCache.erase(it); return true; &#125; return false;&#125;void SkeletonAnimation::removeAllSkeletonData()&#123; for (iteratorSkeletonData it = _allSkeletonDataCache.begin(); it != _allSkeletonDataCache.end(); ++it) &#123; if (it-&gt;second._skeleton_data) spSkeletonData_dispose(it-&gt;second._skeleton_data); &#125; _allSkeletonDataCache.clear();&#125;bool SkeletonAnimation::isExistSkeletonDataInCache(const std::string&amp; key_skeletonData)&#123; iteratorSkeletonData it = _allSkeletonDataCache.find(key_skeletonData); if (it != _allSkeletonDataCache.end()) &#123; return true; &#125; return false;&#125;//endstd::map&lt;std::string, SkeletonAnimation::SkeletonDataInCache&gt; SkeletonAnimation::_allSkeletonDataCache; åœ¨ SkeletonAnimation.h ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç 1234567891011121314static SkeletonAnimation* createFromCache(const std::string&amp; key_skeletonData);static spSkeletonData* loadSkeletonDataToCache(const std::string&amp; key_skeletonData, const std::string&amp; skeletonJsonFile, const std::string&amp; atlasFile, float scale = 1);static spSkeletonData* getSkeletonDataFromCache(const std::string&amp; key_skeletonData);static bool removeSkeletonData(const std::string&amp; key_skeletonData);static void removeAllSkeletonData();static bool isExistSkeletonDataInCache(const std::string&amp; skeletonDataKeyName);private: struct SkeletonDataInCache &#123; spSkeletonData* _skeleton_data; &#125;; typedef std::map&lt;std::string, SkeletonDataInCache&gt;::iterator iteratorSkeletonData; static std::map&lt;std::string, SkeletonDataInCache&gt; _allSkeletonDataCache; //end Binding to luaæ—¢ç„¶å†™äº†è¿™ä¹ˆå¤šäº†,å°±è¦å°†è¿™äº›ä»£ç ç»‘å®šåˆ°luaä¸­å» æ‰¾åˆ°è‡ªå·±å·¥ç¨‹çš„çš„libluacocos2dçš„å·¥ç¨‹è¿™é‡Œä½ å¯ä»¥è‡ªå·±å†™ä»£ç åœ¨ lua_cocos2dx_spine_auto.cpp ä¸­,ä½†æ˜¯è¿™ä¸æ˜¯ä¸€ä¸ªç¨‹åºå‘˜åº”è¯¥åšçš„ã€‚ç¬¬äºŒç§åšæ˜¯:æ—¢ç„¶å®ƒçš„æ–‡ä»¶åæœ‰ auto è¿™ä¸ªå•è¯,ä¸€çœ‹å°±ä¸æ˜¯äººå†™å‡ºæ¥çš„,OK,å»å¯»æ‰¾ç­”æ¡ˆã€‚ åˆ°è¿™ä¸ªç›®å½•ä¸­å» Â·Â·Â·/frameworks/cocos2d-x/tools/tolua/ ä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªgenbindings.pyçš„æ–‡ä»¶ä½ ä¸€è¿è¡Œå¯èƒ½æŠ¥é”™,ä½ å»è¯»ä»–çš„ README.md ,å‘ç°ä»–è¦ä½ è£…ä¸€äº›pythonçš„åº“,é‚£å°±æŒ‰ç…§è¯´çš„å®‰è£…å§ä½ å¯ä»¥ pip å‘½ä»¤ä¹Ÿå¯ä»¥ è‡ªå·±ä¸‹è½½zip è¿™ä¸ªéšæ„ã€‚ç„¶åå°±æ˜¯é…ç½®NDK,è¿™ä¸ªä¸‹è½½è§£å‹,é…ç½® path å°±å®Œäº†,æˆ‘å°±ä¸å¤šè¯´äº†ã€‚ ç„¶åä½ è¿è¡Œå¯èƒ½è¿˜ä¼šæŠ¥é”™ é‚£å°±æ‰“å¼€ genbindings.py ä½ ä¼šå‘ç°ä»–éœ€è¦çš„æ˜¯NDK 3.3-3.4 ç„¶è€Œè‡ªå·±çš„NDKç»è¿‡æŸ¥çœ‹ æ˜¯ 3.5-3.6 æ²¡å…³ç³»,æŠŠå®ƒè¿™ä¸ªæ‰€æœ‰ç›¸å…³ 3.3 3.4 å…¨éƒ¨æ”¹æˆ 3.5-3.6çš„å°±OKäº†ã€‚ æ”¹å®Œåè¿è¡Œ Prefect ^-^. åœ¨luaä¸­è°ƒç”¨123456sp.SkeletonAnimation: createFromCache(key)sp.SkeletonAnimation: isExistSkeletonDataInCache(key)sp.SkeletonAnimation: loadSkeletonDataToCache(key,jsonFilePath,atlasFilePath,scale =1) sp.SkeletonAnimation: getSkeletonDataFromCache(key)sp.SkeletonAnimation: removeSkeletonData(key)sp.SkeletonAnimation: removeAllSkeletonData() è¿™é‡Œé¢æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ä½ ä¼šå‘ç°è¿”å›çš„éª¨èƒ³æ•°æ®æ‹¿ä¸åˆ°,è¿™ä¸ªæ˜¯cocos2dxåœ¨ç»‘å®šçš„æ—¶å€™å¹¶æ²¡æœ‰å°†è¿™ä¸ªæ•°æ®ç±»å‹ç»‘å®šluaå»,æˆ‘ä¸Šé¢é‚£ä¹ˆå†™å°±æ˜¯ä¸ºäº†ä»¥åç•™ä¸ªæ¥å£,å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æŠŠé‚£ä¸ªè¿”å›å€¼å»æ‰ã€‚ å¥½äº†ä»Šå¤©å°±åˆ°è¿™å§ã€‚","tags":[{"name":"spine","slug":"spine","permalink":"https://leng521.top/tags/spine/"}]},{"title":"Using-Hexo","date":"2018-01-17T12:07:49.000Z","path":"/posts/6743743b/","text":"è¿™ç¯‡æ–‡ç« åªæ˜¯æˆ‘å¯¹ hexo çš„ä¸€äº›åŠŸèƒ½çš„æµ‹è¯•å§ï¼Œå¯èƒ½åä¼šå¸¸ç”¨åˆ°è¿™äº›ä¸œè¥¿ Requirementsinstall Hexo123&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;content&#123;% endblockquote %&#125; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem. Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy. David Levithan-Wide Awake NEW: DevDocs now comes with syntax highlighting. http://devdocs.io @DevDocstwitter.com/devdocs/status/356095192085962752 Every interaction is both precious and an opportunity to delight. Seth GodinWelcome to Island Marketing 123&#123;% codeblock [title] [lang:language] [url] [link text] %&#125;code snippet&#123;% endcodeblock %&#125; 12alert(&apos;Hello World!&apos;);print(&apos;Hello World!&apos;) language -&gt; OC1[rectangle setX: 10 y: 10 width: 20 height: 20]; language -&gt; python1print('Hello World!') é™„åŠ è¯´æ˜Array.map1array.map(callback[, thisArg]) åå¼•å·ä»£ç å—[language] [title] [url] [link text] code snippet language - &gt;OC1[rectangle setX: 10 y: 10 width: 20 height: 20]; æ’å…¥Imageå›¾ç‰‡12&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;&#123;% asset_img fileName.* title&#125; /posts/6743743b/test.lua test.lua å¼•ç”¨æ–‡ç« 12&#123;% post_path slug %&#125;&#123;% post_link slug [title] %&#125; ä½¿ç”¨iframe1&#123;% iframe url [width] [height] %&#125;","tags":[{"name":"hexo","slug":"hexo","permalink":"https://leng521.top/tags/hexo/"},{"name":"IT","slug":"IT","permalink":"https://leng521.top/tags/IT/"}]},{"title":"Hello World","date":"2018-01-16T16:00:00.000Z","path":"/posts/4a17b156/","text":"æ­å»ºè‡ªå·±çš„åšå®¢åœ¨github pageç»è¿‡2å¤©çš„æŠ˜è…¾çš„ç»ˆäºæŠŠè‡ªå·±çš„åšå®¢ç»™æ­å»ºå‡ºæ¥äº†,ä¹Ÿå¯ä»¥è¯´æ˜¯è‡ªå·±çš„ä¸€ä¸ªHello World å§è¿™ä¸ªä¸»é¢˜æ˜¯ä½¿ç”¨Littençš„themeé€šè¿‡hexoæ­å»º å‡†å¤‡ç¯å¢ƒ* install git * install node * æ³¨å†Œgithubçš„è´¦å· Git Downloadnodejs Downloadgithub æ³¨å†Œçš„åœ°å€ å†åˆ›å»ºä¹‹å‰æ€è€ƒä¸€ä¸ªäº‹æƒ…å°±æ˜¯åœ¨ä½ åšå®Œè¿™äº›ä¹‹åï¼Œä½ å¼€å§‹å†™è‡ªå·±çš„åšå®¢çš„æ—¶å€™ï¼Œçªç„¶ä¹‹é—´è¦æ¢ç”µè„‘äº†ï¼Œè¿™ä¸ªæ—¶å€™ä½ è¦æ€ä¹ˆåŠè¿™ä¸ªæ€è€ƒæ˜¯å¯¹äºé‚£äº›ä½¿ç”¨è¿‡ github æˆ–è€…æ˜¯ä½¿ç”¨è¿‡åˆ«çš„ç‰ˆæœ¬æ§åˆ¶çš„å·¥å…·ã€‚ Build to blogå®‰è£… nodejs å¾ˆç®€å•,å°±æ˜¯å‚»ç“œå¼çš„å®‰è£…ã€‚ åœ¨å®‰è£… git çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€é”®å¼å®‰è£…ã€‚ ç„¶åè‡ªå·±æ³¨å†Œgithubçš„è´¦å·ã€‚ è®°å¾—é…ç½®è‡ªå·±çš„ nodejsçš„Path åœ¨ cmd çª—å£ è¾“å…¥ pathæˆ‘è‡ªå·±çš„ nodejs åœ¨Eç›˜ åŒæ ·çœ‹çœ‹è‡ªå·±çš„ git çš„ path æœ‰æ²¡æœ‰é…ç½® ç„¶åå°±æ˜¯éªŒè¯ä½ çš„å®‰è£…æ˜¯å¦æ­£ç¡®æ‰“å¼€ä½  cmd è¾“å…¥ gitè¾“å…¥ node -vgithub å°±ä¸ç”¨éªŒè¯äº†å§ ç„¶åå°±æ˜¯åˆ©ç”¨ node çš„ npm å·¥å…·å»å®‰è£… hexo è¾“å…¥ npm install -g hexo-cli å¦‚æœè‡ªå·±çš„ hexo å®‰è£…æˆåŠŸçš„è¯ åœ¨ cmd ä¸­ è¾“å…¥ hexo -v åˆ›å»ºè‡ªå·±çš„ hexo å·¥ç¨‹å‡è®¾è‡ªå·±çš„ hexo çš„å·¥ç¨‹ç›®å½•æ˜¯åœ¨ D:\\Pro\\pro_wdh\\nodejs 1. åœ¨ cmd ä¸­ è¾“å…¥ pushd D:\\Pro\\pro_wdh\\nodejs 2. cmdçš„å½“å‰ç›®å½•ç›´æ¥è·³è½¬åˆ° D:\\Pro\\pro_wdh\\nodejs 3. ä½¿ç”¨ hexo init å‘½ä»¤ åˆå§‹åŒ– ï¼ˆï¼‰hexo init [folderName] ï¼‰ hexo init hexocd hexonmp install å®Œæˆä¹‹åç›®å½•ç»“æ„å¦‚ä¸‹ï¼š . â”œâ”€â”€ _config.yml â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source | â”œâ”€â”€ _drafts | â””â”€â”€ _posts â””â”€â”€ themes _config.ymlç½‘ç«™çš„ é…ç½® ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ package.jsonåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚EJS, Stylus å’Œ Markdown renderer å·²é»˜è®¤å®‰è£…ï¼Œæ‚¨å¯ä»¥è‡ªç”±ç§»é™¤ã€‚ scaffoldsæ¨¡ç‰ˆ æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚ Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„markdownæ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚ sourceèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚ themesä¸»é¢˜ æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ è¿è¡Œè‡ªå·±çš„hexoå·¥ç¨‹åœ¨ cmd ä¸­ è¾“å…¥ hexo s åœ¨è‡ªå·±çš„æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:4000/. è¿™æ—¶ä½ ä¼šçœ‹åˆ°è‡ªå·±çš„é™æ€ç½‘é¡µ æ›´å¤šçš„ hexoçš„å‘½ä»¤hexo çš„å®˜ç½‘ éƒ¨ç½²è‡ªå·±çš„ç¬”è®°2githubç½‘ä¸Šçš„ä¸€äº›æ•™ç¨‹éƒ½æ˜¯ ä½¿ç”¨ SSH å»ä¸Šä¼ è‡ªå·±çš„åšå®¢ä½†æ˜¯ä½¿ç”¨ htpp çš„æ–¹å¼ä¹ŸåŒæ ·å¯ä»¥ ä¸Šä¼  åˆ›å»ºè‡ªå·±çš„ github çš„ä»“åº“ä¸Šé¢çš„ä»“åº“åå­—å°±å’Œä½  github çš„åå­—ä¸€æ ·å°±è¡Œäº† ç„¶åå°±æ˜¯åœ¨ hexo çš„æ ¹ç›®å½•ä¸‹çš„ _config.yml ä¸­ æ‰¾åˆ°æŒ‰ç…§å›¾ç‰‡ä¸Šçš„é…ç½®è‡ªå·±çš„ github ä»“åº“çš„åœ°å€github ä»“åº“çš„åœ°å€åœ¨è¿™é‡Œæ‹¿ ç„¶åæ‰§è¡Œ hexoçš„å‘½ä»¤ åœ¨cmdä¸­è¾“å…¥ 1.hexo clean 2.hexo g 3.hexo d é™é™çš„ç­‰å¾… ä¸Šä¼ å®Œæˆä¹‹å æ‰“å¼€ http://Test.github.io å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢äº† å›ç­”ä¸Šé¢çš„æå‡ºçš„æ€è€ƒç­”æ¡ˆå°±æ˜¯ åœ¨ github ä¸Šåˆ›å»ºè‡ªå·±çš„ branch(åˆ†æ”¯) æˆ‘æ˜¯åœ¨è‡ªå·±çš„ github åˆ›å»ºè‡ªå·±çš„ blog(åˆ†æ”¯) git çš„ä¸€äº›å‘½ä»¤ ä¸æ˜¯å¤ªå…¨,ä½†æ˜¯åº”å¯¹æ—¥å¸¸è¿˜æ˜¯å¯ä»¥çš„ åšæ³•å¦‚ä¸‹ï¼š git chcekout -b blog git add -A git commit - m &quot;commit my blog&quot; git push origin blog è§£é‡Šä¸€ä¸‹å§ åˆ›å»ºæ–°çš„åˆ†æ”¯ blogæ·»åŠ è‡ªå·±çš„æ–‡ä»¶åˆ°ç¼“å­˜åŒºæäº¤åˆ°æœ¬åœ°ç‰ˆæœ¬åº“æ¨é€åˆ°è¿œç«¯ æ›´å¤š git çš„çŸ¥è¯† è¿™åªæ˜¯ä¸€äº›åŸºç¡€ æ›´å¤šéœ€è¦ä½ å¤šå»å°è¯•,å¤šè‡ªå·±åŠ¨æ‰‹ã€‚ æœ‰ç–‘é—®å¯ä»¥åŠ QQä¸€èµ·è®¨è®º","tags":[{"name":"hello world","slug":"hello-world","permalink":"https://leng521.top/tags/hello-world/"},{"name":"github page","slug":"github-page","permalink":"https://leng521.top/tags/github-page/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://leng521.top/tags/åšå®¢/"}]}]